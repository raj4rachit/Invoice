"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[1422],{11422:function(e,a,t){t.r(a),t.d(a,{default:function(){return ne}});var n=t(61889),i=t(57621),r=t(9585),s=t(39504),l=t(20890),o=t(77196),d=t(63466),c=t(58956),h=t(17834),u=t(72791),m=t(91923),x=t(23735),p=t(68870),Z=t(68096),j=t(30829),_=t(58406),f=t(23786),v=t(47071),y=t(48550),g=t(97123),C=t(36151),S=t(36571),b=t(87607),D=t(69783),I=t(88893),P=t(27475);var Y=t(92506),A=t(72426),L=t.n(A),w=t(52909),N=t(94022),k=t(19533),M=t(81724),F=t(80184);const z=M.Ry().shape({company_id:M.Z_().required("Company name is required."),financial_year_name:M.Z_().required("name is required."),start_date:M.Z_().required("Start date is required."),end_date:M.Z_().required("End date is required."),is_default:M.Z_().required("Is default is required.")});var R=e=>{let{value:a,formId:t,onSubmit:i,companyList:r,callApi:s}=e;const{company:l,recall:o}=(0,h.Z)(),d=null!==a&&void 0!==a&&a,c=(0,Y.TA)({initialValues:{id:d?d.id:"",company_id:d?d.company_id:"",financial_year_name:d?d.financial_year_name:"",start_date:d?d.start_date:"",end_date:d?d.end_date:"",is_default:d?null===d||void 0===d?void 0:d.is_default:"No",formType:d&&d.id?"edit":"add"},validationSchema:z,onSubmit:e=>{(function(e){const a=new FormData;return a.append("company_id",e.company_id),a.append("financial_year_name",e.financial_year_name),a.append("start_date",e.start_date),a.append("end_date",e.end_date),a.append("is_default",e.is_default),""!==e.id&&"edit"===e.formType?(a.append("id",e.id),P.k.post(I.js,a)):P.k.post(I.vs,a)})(e).then((e=>{e.data&&1===e.data.status?(i&&i(),(0,N.qX)(e)):(0,N.I5)(e)})).catch((e=>{(0,N.c$)(e)}))}});return(0,u.useEffect)((()=>{c.setFieldValue("company_id",d?d.company_id:"0"!==l.company_id?l.company_id:"")}),[o]),(0,F.jsx)(p.Z,{children:(0,F.jsx)("form",{id:t,onSubmit:c.handleSubmit,children:(0,F.jsxs)(n.ZP,{container:!0,spacing:2,children:[(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsx)(n.ZP,{container:!0,alignItems:"center",spacing:2,children:(0,F.jsx)(n.ZP,{item:!0,xs:12,sm:12,children:(0,F.jsxs)(Z.Z,{size:"small",fullWidth:!0,error:c.touched.company_id&&Boolean(c.errors.company_id),children:[(0,F.jsx)(j.Z,{id:"company",children:(0,F.jsx)(k.Z,{title:"Company"})}),(0,F.jsx)(_.Z,{fullWidth:!0,labelId:"company",id:"company_id",name:"company_id",label:(0,F.jsx)(k.Z,{title:"Company"}),value:c.values.company_id,onChange:c.handleChange,children:r.map((e=>(0,F.jsx)(f.Z,{value:e.id,children:e.company_name},e.id)))}),(0,F.jsx)(v.Z,{children:c.touched.company_id&&c.errors.company_id})]})})})}),(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsx)(n.ZP,{container:!0,alignItems:"center",spacing:2,children:(0,F.jsx)(n.ZP,{item:!0,xs:12,sm:12,children:(0,F.jsx)(y.Z,{fullWidth:!0,size:"small",id:"financial_year_name",name:"financial_year_name",label:(0,F.jsx)(k.Z,{title:"Name"}),value:c.values.financial_year_name,onChange:c.handleChange,error:c.touched.financial_year_name&&Boolean(c.errors.financial_year_name),helperText:c.touched.financial_year_name&&c.errors.financial_year_name})})})}),(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsx)(n.ZP,{container:!0,alignItems:"center",spacing:2,children:(0,F.jsx)(n.ZP,{item:!0,xs:12,sm:12,children:(0,F.jsx)(S._,{dateAdapter:D.Z,children:(0,F.jsx)(b.$,{id:"start_date",name:"start_date",label:(0,F.jsx)(k.Z,{title:"Start date"}),inputFormat:"YYYY-MM-DD",value:c.values.start_date,maxDate:L()(),onChange:e=>{c.setFieldValue("start_date",L()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,F.jsx)(y.Z,{fullWidth:!0,size:"small",...e,error:c.touched.start_date&&Boolean(c.errors.start_date),helperText:c.touched.start_date&&c.errors.start_date})})})})})}),(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsx)(n.ZP,{container:!0,alignItems:"center",spacing:2,children:(0,F.jsx)(n.ZP,{item:!0,xs:12,sm:12,children:(0,F.jsx)(S._,{dateAdapter:D.Z,children:(0,F.jsx)(b.$,{id:"end_date",name:"end_date",label:(0,F.jsx)(k.Z,{title:"End date"}),inputFormat:"YYYY-MM-DD",value:c.values.end_date,minDate:L()(c.values.start_date),disabled:!c.values.start_date,onChange:e=>{c.setFieldValue("end_date",L()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,F.jsx)(y.Z,{fullWidth:!0,size:"small",...e,error:c.touched.end_date&&Boolean(c.errors.end_date),helperText:c.touched.end_date&&c.errors.end_date})})})})})}),(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsx)(n.ZP,{container:!0,alignItems:"center",spacing:2,children:(0,F.jsx)(n.ZP,{item:!0,xs:12,sm:12,children:(0,F.jsxs)(Z.Z,{size:"small",fullWidth:!0,error:c.touched.is_default&&Boolean(c.errors.is_default),children:[(0,F.jsx)(j.Z,{id:"IsDefault_label",children:(0,F.jsx)(k.Z,{title:"Is Default ?"})}),(0,F.jsxs)(_.Z,{fullWidth:!0,labelId:"IsDefault_label",id:"is_default",name:"is_default",label:(0,F.jsx)(k.Z,{title:"Is Default ?"}),value:c.values.is_default,onChange:c.handleChange,children:[(0,F.jsx)(f.Z,{value:"Yes",children:"Yes"},0),(0,F.jsx)(f.Z,{value:"No",children:"No"},1)]}),(0,F.jsx)(v.Z,{children:c.touched.is_default&&c.errors.is_default})]})})})}),"add"===c.values.formType&&(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsx)(n.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"flex-end",children:(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsxs)(g.Z,{children:[(0,F.jsx)(w.Z,{children:(0,F.jsx)(C.Z,{variant:"contained",color:"primary",type:"submit",children:"save"})}),(0,F.jsx)(C.Z,{variant:"text",color:"error",onClick:()=>c.resetForm(),children:"clear"})]})})})})]})})})},T=t(39281),q=t(79836),E=t(53382),B=t(35855),V=t(68745),$=t(81918),W=t(13400),H=t(63033),O=t(56890),X=t(80720),G=t(38820),U=t(84220),J=t(53299),K=t(52463);const Q={search:"",displayLength:10,displayStart:0,orderDir:"ASC",orderColumn:0};let ee=0;var ae=e=>{let{search:a,callApi:t,setCompanyList:n,companyList:i}=e;const{checkRestriction:r}=(0,h.Z)(),[s,o]=(0,u.useState)([]),[d,c]=(0,u.useState)(0),[m,x]=(0,u.useState)(10),[p,Z]=(0,u.useState)("asc"),[j,_]=(0,u.useState)("0"),[f,v]=(0,u.useState)(!1),[y,g]=(0,u.useState)(!1),[C,S]=(0,u.useState)({}),b=()=>{(function(e){return P.k.get(I.Bu,e)})(Q).then((e=>{ee=e.data.data.totalCount,o(e.data.data.data),n(e.data.data.companies)})).catch((e=>{(0,N.c$)(e)}))};return(0,u.useEffect)((()=>{var e;Q.search=a,Q.displayLength=m,Q.displayStart=m*d,Q.orderDir=null!==(e=null===p||void 0===p?void 0:p.toUpperCase())&&void 0!==e?e:Q.orderDir,Q.orderColumn=Number(j),b()}),[d,m,p,j,a,t]),(0,F.jsxs)(F.Fragment,{children:[(0,F.jsx)(T.Z,{children:(0,F.jsxs)(q.Z,{children:[(0,F.jsx)(te,{order:p,orderBy:j,onRequestSort:e=>{Z(j===e&&"asc"===p?"desc":"asc"),_(e)}}),(0,F.jsx)(E.Z,{children:s.map(((e,a)=>(0,F.jsxs)(B.Z,{children:[(0,F.jsxs)(V.Z,{align:"left",children:[e.financial_year_name,(0,F.jsx)(l.Z,{variant:"subtitle2",children:e.company_name})]}),(0,F.jsx)(V.Z,{align:"left",children:e.start_date}),(0,F.jsx)(V.Z,{align:"left",children:e.end_date}),(0,F.jsx)(V.Z,{align:"left",children:"Yes"===e.is_default?(0,F.jsx)($.Z,{label:e.is_default,color:"success",variant:"outlined",size:"small"}):(0,F.jsx)($.Z,{label:e.is_default,color:"error",variant:"outlined",size:"small"})}),(0,F.jsxs)(V.Z,{align:"right",children:[r("CAN_EDIT_COMPANY_FINANCIAL_YEAR")&&(0,F.jsx)(W.Z,{color:"primary",component:"label",onClick:()=>{return a=e,v((e=>!e)),void S(a);var a},children:(0,F.jsx)(G.Z,{fontSize:"small"})}),r("CAN_DELETE_COMPANY_FINANCIAL_YEAR")&&(0,F.jsx)(W.Z,{color:"error",component:"label",onClick:()=>{return a=e,g(!0),void S(a);var a},children:(0,F.jsx)(U.Z,{fontSize:"small"})})]})]},a)))})]})}),(0,F.jsx)(H.Z,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Number(ee),rowsPerPage:m,page:d,onPageChange:(e,a)=>{c(a)},onRowsPerPageChange:e=>{x(parseInt(e.target.value,10)),c(0)}}),f&&(0,F.jsx)(K.Z,{title:"Edit Company Financial Year",open:f,onClose:()=>v((e=>!e)),id:"editCompanyFinancialYear",children:(0,F.jsx)(R,{value:C,formId:"editCompanyFinancialYear",onSubmit:()=>{v((e=>!e)),b()},companyList:i})}),y&&(0,F.jsx)(J.Z,{onDeleteHandler:()=>{(function(e){const a=new FormData;return a.append("id",e.id),P.k.post(I.B,a)})({id:C.id}).then((e=>{e.data&&1===e.data.status?(c(0),b(),g(!1),(0,N.qX)(e)):(0,N.I5)(e)})).catch((e=>{(0,N.c$)(e)}))},onClose:()=>g(!1),open:y,dept:"Company Financial Year",name:C.financial_year_name})]})};function te(e){let{order:a,orderBy:t,onRequestSort:n}=e;const i=e=>()=>{n(e)};return(0,F.jsx)(O.Z,{children:(0,F.jsxs)(B.Z,{children:[(0,F.jsx)(V.Z,{sx:{width:"30%"},children:(0,F.jsx)(X.Z,{active:"0"===t,direction:"0"===t?a:"asc",onClick:i("0"),children:"Name"})},"company"),(0,F.jsx)(V.Z,{sx:{width:"20%"},children:(0,F.jsx)(X.Z,{active:"1"===t,direction:"1"===t?a:"asc",onClick:i("1"),children:"Start Date"})},"start_date"),(0,F.jsx)(V.Z,{sx:{width:"20%"},children:(0,F.jsx)(X.Z,{active:"2"===t,direction:"2"===t?a:"asc",onClick:i("2"),children:"End Date"})},"end_date"),(0,F.jsx)(V.Z,{sx:{width:"15%"},children:(0,F.jsx)(X.Z,{active:"3"===t,direction:"3"===t?a:"asc",onClick:i("3"),children:"Is Default"})},"IsDefault"),(0,F.jsx)(V.Z,{align:"right",sx:{width:"15%"},children:"Action"})]})})}var ne=()=>{const{checkRestriction:e}=(0,h.Z)(),[a,t]=(0,u.useState)(""),[p,Z]=(0,u.useState)(!1),[j,_]=(0,u.useState)([]),[,f]=(0,u.useTransition)();return(0,F.jsxs)(n.ZP,{container:!0,spacing:m.dv,children:[(0,F.jsx)(n.ZP,{item:!0,xs:12,sm:12,md:4,children:(0,F.jsxs)(i.Z,{variant:"outlined",children:[(0,F.jsx)(r.Z,{title:"Add Company Financial Year"}),(0,F.jsx)(s.Z,{children:e("CAN_ADD_COMPANY_FINANCIAL_YEAR")?(0,F.jsx)(R,{formID:"addCompanyFinancialYear",onSubmit:()=>{Z((e=>!e))},companyList:j,callApi:p}):(0,F.jsx)(l.Z,{sx:{p:"8%"},textAlign:"center",variant:"h3",color:"inherit",children:"You don't have a permission"})})]})}),(0,F.jsx)(n.ZP,{item:!0,xs:12,sm:12,md:8,children:(0,F.jsx)(x.Z,{title:(0,F.jsx)(n.ZP,{container:!0,spacing:m.dv,sx:{mb:-1,mt:-4},children:(0,F.jsx)(n.ZP,{item:!0,xs:12,children:(0,F.jsxs)(n.ZP,{container:!0,spacing:m.dv,children:[(0,F.jsx)(n.ZP,{item:!0,sx:{flexGrow:1},children:(0,F.jsx)(l.Z,{variant:"column",children:"Company Financial Year List"})}),(0,F.jsx)(n.ZP,{item:!0,children:(0,F.jsx)(o.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,F.jsx)(d.Z,{position:"start",children:(0,F.jsx)(c.jVj,{stroke:1.5,size:"1rem"})}),size:"small",onChange:e=>{f((()=>t(e.target.value)))},autoComplete:"off"})})]})})}),content:!0,children:(0,F.jsx)(ae,{search:a,callApi:p,setCompanyList:_,companyList:j})})})]})}},53299:function(e,a,t){var n=t(5574),i=t(65661),r=t(97123),s=t(36151),l=t(80184);a.Z=e=>{let{onDeleteHandler:a,onClose:t,open:o,dept:d,title:c,name:h}=e;const u=()=>{t()};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(n.Z,{open:o,onClose:u,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:[(0,l.jsxs)(i.Z,{id:"alert-dialog-title",children:["Are you sure you want to delete the",(0,l.jsxs)("strong",{children:[" ",d," ",c," ",h]}),"? Click ",(0,l.jsx)("strong",{children:"Yes, Delete"})," to proceed or ",(0,l.jsx)("strong",{children:"Cancel"})," to cancel this action."]}),(0,l.jsxs)(r.Z,{sx:{pr:2.5},children:[(0,l.jsxs)(s.Z,{variant:"contained",onClick:()=>{a()},children:["Yes, Delete"," "]}),(0,l.jsx)(s.Z,{variant:"text",color:"error",onClick:u,children:"Cancel"})]})]})})}},84220:function(e,a,t){var n=t(76189),i=t(80184);a.Z=(0,n.Z)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},38820:function(e,a,t){var n=t(76189),i=t(80184);a.Z=(0,n.Z)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},80720:function(e,a,t){t.d(a,{Z:function(){return y}});var n=t(63366),i=t(87462),r=t(94419),s=t(28182),l=t(72791),o=t(95080),d=t(76189),c=t(80184),h=(0,d.Z)((0,c.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),u=t(47630),m=t(93736),x=t(14036),p=t(21217);function Z(e){return(0,p.Z)("MuiTableSortLabel",e)}var j=(0,t(75878).Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]);const _=["active","children","className","direction","hideSortIcon","IconComponent"],f=(0,u.ZP)(o.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.root,t.active&&a.active]}})((e=>{let{theme:a}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(a.vars||a).palette.text.secondary},"&:hover":{color:(a.vars||a).palette.text.secondary,[`& .${j.icon}`]:{opacity:.5}},[`&.${j.active}`]:{color:(a.vars||a).palette.text.primary,[`& .${j.icon}`]:{opacity:1,color:(a.vars||a).palette.text.secondary}}}})),v=(0,u.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,a)=>{const{ownerState:t}=e;return[a.icon,a[`iconDirection${(0,x.Z)(t.direction)}`]]}})((e=>{let{theme:a,ownerState:t}=e;return(0,i.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:a.transitions.create(["opacity","transform"],{duration:a.transitions.duration.shorter}),userSelect:"none"},"desc"===t.direction&&{transform:"rotate(0deg)"},"asc"===t.direction&&{transform:"rotate(180deg)"})}));var y=l.forwardRef((function(e,a){const t=(0,m.Z)({props:e,name:"MuiTableSortLabel"}),{active:l=!1,children:o,className:d,direction:u="asc",hideSortIcon:p=!1,IconComponent:j=h}=t,y=(0,n.Z)(t,_),g=(0,i.Z)({},t,{active:l,direction:u,hideSortIcon:p,IconComponent:j}),C=(e=>{const{classes:a,direction:t,active:n}=e,i={root:["root",n&&"active"],icon:["icon",`iconDirection${(0,x.Z)(t)}`]};return(0,r.Z)(i,Z,a)})(g);return(0,c.jsxs)(f,(0,i.Z)({className:(0,s.Z)(C.root,d),component:"span",disableRipple:!0,ownerState:g,ref:a},y,{children:[o,p&&!l?null:(0,c.jsx)(v,{as:j,className:(0,s.Z)(C.icon),ownerState:g})]}))}))}}]);
//# sourceMappingURL=1422.96e0308c.chunk.js.map