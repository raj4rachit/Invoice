"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[707],{58451:function(e,n,a){a.d(n,{El:function(){return i},W7:function(){return c},rT:function(){return s},sU:function(){return d},yv:function(){return o},zi:function(){return l}});var r=a(88893),t=a(27475);function i(){return t.k.get(r.vG)}function s(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),t.k.post(r.oT,n)}function l(){return t.k.get(r.AL)}function c(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),t.k.post(r.g5,n)}function o(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),t.k.post(r.rS,n)}function d(e){const n=new FormData;return n.append("company_id",e.company_id),e.financial_years.map((e=>{n.append("years[]",e.year_id)})),t.k.post(r.Ll,n)}},50707:function(e,n,a){a.r(n),a.d(n,{default:function(){return U}});var r=a(79567),t=a(61889),i=a(20890),s=a(36151),l=a(68870),c=a(58451),o=a(17834),d=a(72791),h=a(91923),u=a(23735),p=a(94022),x=a(52463),m=a(48550),j=a(23786),_=a(14868),Z=a(94454),g=a(45006),y=a(92506),v=a(80184);var f=e=>{let{value:n,formID:a,initData:r,setReportData:i,onSubmit:s}=e;const{company:l}=(0,o.Z)(),[h,u]=(0,d.useState)([]),x=null!==r&&void 0!==r&&r,f=Object.keys(n).length>0&&n,b=(0,y.TA)({initialValues:{company_id:f?f.company_id:l.company_id,financial_years:[]},onSubmit:e=>{console.log(e),(0,c.sU)(e).then((e=>{s&&s(),i(e.data.data)})).catch((e=>{(0,p.c$)(e)}))}}),S=e=>{b.setFieldValue("financial_years",[]),(0,g.Zc)(e).then((e=>{u(e.data.data)})).catch((e=>{console.log(e)}))};return(0,d.useEffect)((()=>{if("0"!=b.values.company_id){const e=b.values.company_id;console.log("id"),S(e)}}),[]),(0,v.jsx)("form",{id:a,onSubmit:b.handleSubmit,children:(0,v.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsxs)(m.Z,{select:!0,size:"small",label:"Company",fullWidth:!0,id:"company_id",name:"company_id",value:b.values.company_id,onChange:e=>{b.handleChange(e),S(e.target.value)},error:b.touched.company_id&&Boolean(b.errors.company_id),helperText:b.touched.company_id&&b.errors.company_id,children:[(0,v.jsx)(j.Z,{value:0,children:"All Companies"},-1),x&&x.companyList.map(((e,n)=>(0,v.jsx)(j.Z,{value:e.id,children:e.company_name},n)))]})}),(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsx)(_.Z,{multiple:!0,size:"small",id:"financial_years",name:"financial_years",options:h||[],getOptionLabel:e=>e.financial_year_name?e.financial_year_name:"",value:b.values.financial_years,renderOption:(e,n,a)=>{let{selected:r}=a;return(0,v.jsxs)("li",{...e,children:[(0,v.jsx)(Z.Z,{checked:r,value:n.id}),n.financial_year_name]})},renderInput:e=>(0,v.jsx)(m.Z,{...e,size:"small",id:"financial_years",name:"financial_years",label:"Financial Year"}),onChange:(e,n)=>{b.setFieldValue("financial_years",n)}})})]})})},b=a(76189),S=(0,b.Z)((0,v.jsx)("path",{d:"m7 14 5-5 5 5H7z"}),"ArrowDropUpOutlined"),D=(0,b.Z)((0,v.jsx)("path",{d:"m7 10 5 5 5-5H7z"}),"ArrowDropDownOutlined"),k=a(39281),w=a(79836),F=a(90618),T=a(56890),C=a(35855),P=a(68745),z=a(53382);var R=e=>{var n,a,r,t,s,l,c,o;let{reportData:h}=e;const u=null!==(n=h.Subscriber_currency_symbol)&&void 0!==n?n:"",p=null!==(a=h.USD_symbol)&&void 0!==a?a:"",x=null!==(r=h.headers)&&void 0!==r?r:[],m=null!==(t=h.incomes)&&void 0!==t?t:[],j=null!==(s=h.expenses)&&void 0!==s?s:[],_=null!==(l=h.total_incomes)&&void 0!==l?l:[],Z=null!==(c=h.total_expenses)&&void 0!==c?c:[],g=null!==(o=h.total_margin)&&void 0!==o?o:[],y=e=>"up"===e?(0,v.jsx)(S,{color:"success",sx:{fontSize:"25px",verticalAlign:"middle"}}):"down"===e?(0,v.jsx)(D,{color:"error",sx:{fontSize:"25px",verticalAlign:"middle"}}):"";return(0,v.jsx)(k.Z,{children:(0,v.jsxs)(w.Z,{size:"small",sx:{marginTop:5,[`& .${F.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:[(0,v.jsxs)(T.Z,{sx:{backgroundColor:"lightblue"},children:[(0,v.jsxs)(C.Z,{children:[(0,v.jsx)(P.Z,{rowSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:"Incomes"})}),x.map(((e,n)=>(0,v.jsx)(P.Z,{align:"center",colSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:e.financial_year_name})},n)))]}),(0,v.jsx)(C.Z,{children:x.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsx)(P.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",u,")"]})}),(0,v.jsx)(P.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",p,")"]})})]},n)))})]}),(0,v.jsxs)(z.Z,{children:[m.map(((e,n)=>(0,v.jsxs)(C.Z,{children:[(0,v.jsx)(P.Z,{children:e.name}),e.income.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),e.subscriber_currency_total_amount]}),(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),e.USD_currency_total_amount]})]},n)))]},n))),(0,v.jsxs)(C.Z,{children:[(0,v.jsx)(P.Z,{children:(0,v.jsx)("b",{children:"Total"})}),_.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]})]}),(0,v.jsx)(z.Z,{children:(0,v.jsx)(C.Z,{})}),(0,v.jsxs)(T.Z,{sx:{backgroundColor:"lightblue"},children:[(0,v.jsxs)(C.Z,{children:[(0,v.jsx)(P.Z,{rowSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:"Expenses"})}),x.map(((e,n)=>(0,v.jsx)(P.Z,{align:"center",colSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:e.financial_year_name})},n)))]}),(0,v.jsx)(C.Z,{children:x.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsx)(P.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",u,")"]})}),(0,v.jsx)(P.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",p,")"]})})]},n)))})]}),(0,v.jsxs)(z.Z,{children:[j.map(((e,n)=>(0,v.jsxs)(C.Z,{children:[(0,v.jsx)(P.Z,{children:e.name}),e.expenses.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),e.subscriber_currency_total_amount]}),(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),e.USD_currency_total_amount]})]},n)))]},n))),(0,v.jsxs)(C.Z,{children:[(0,v.jsx)(P.Z,{children:(0,v.jsx)("b",{children:"Total"})}),Z.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]}),(0,v.jsxs)(C.Z,{sx:{backgroundColor:"antiquewhite"},children:[(0,v.jsx)(P.Z,{children:(0,v.jsx)("b",{children:"Total Margin"})}),g.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(P.Z,{align:"right",children:[y(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]})]})]})})};var U=()=>{const{company:e,recall:n}=(0,o.Z)(),[a,m]=(0,d.useState)(!1),[j,_]=(0,d.useState)({}),[Z,g]=(0,d.useState)({});return(0,d.useEffect)((()=>{(0,c.zi)().then((e=>{g(e.data.data)})).catch((()=>{(0,p.c$)(err)}))}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.Z,{title:(0,v.jsx)(t.ZP,{container:!0,alignItems:"center",spacing:h.dv,sx:{mb:-1,mt:-3},children:(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:h.dv,children:[(0,v.jsx)(t.ZP,{item:!0,sx:{flexGrow:1},children:(0,v.jsx)(i.Z,{variant:"column",children:"Year over Year Report"})}),(0,v.jsx)(t.ZP,{item:!0,children:(0,v.jsxs)(s.Z,{variant:"contained",onClick:()=>{m((e=>!e))},children:[(0,v.jsx)(r.Z,{sx:{mr:.5}})," Generate Report"]})})]})})}),content:!0,children:Object.keys(j).length>0?(0,v.jsx)(R,{reportData:j}):(0,v.jsx)(l.Z,{component:"span",children:(0,v.jsx)(i.Z,{variant:"h2",textAlign:"center",sx:{p:"10%"},color:"GrayText",children:"Please Generate Report"})})}),a&&(0,v.jsx)(x.Z,{title:"Year over Year Report",open:a,onClose:()=>m((e=>!e)),id:"generateForm",children:(0,v.jsx)(f,{value:j,formID:"generateForm",initData:Z,setReportData:_,onSubmit:()=>{m((e=>!e))}})})]})}},56890:function(e,n,a){a.d(n,{Z:function(){return Z}});var r=a(87462),t=a(63366),i=a(72791),s=a(28182),l=a(94419),c=a(829),o=a(93736),d=a(47630),h=a(21217);function u(e){return(0,h.Z)("MuiTableHead",e)}(0,a(75878).Z)("MuiTableHead",["root"]);var p=a(80184);const x=["className","component"],m=(0,d.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,n)=>n.root})({display:"table-header-group"}),j={variant:"head"},_="thead";var Z=i.forwardRef((function(e,n){const a=(0,o.Z)({props:e,name:"MuiTableHead"}),{className:i,component:d=_}=a,h=(0,t.Z)(a,x),Z=(0,r.Z)({},a,{component:d}),g=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"]},u,n)})(Z);return(0,p.jsx)(c.Z.Provider,{value:j,children:(0,p.jsx)(m,(0,r.Z)({as:d,className:(0,s.Z)(g.root,i),ref:n,role:d===_?null:"rowgroup",ownerState:Z},h))})}))}}]);
//# sourceMappingURL=707.11be2d9e.chunk.js.map