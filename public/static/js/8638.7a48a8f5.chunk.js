"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[8638],{58451:function(e,t,n){n.d(t,{$8:function(){return o},El:function(){return i},W7:function(){return l},rT:function(){return s},sU:function(){return p},xb:function(){return h},yv:function(){return c},zi:function(){return d}});var r=n(88893),a=n(27475);function i(){return a.k.get(r.vG)}function s(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),a.k.post(r.oT,t)}function d(){return a.k.get(r.AL)}function o(){return a.k.get(r.XZ)}function l(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),a.k.post(r.g5,t)}function c(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),a.k.post(r.rS,t)}function h(e){const t=new FormData;return t.append("client_id",e.client_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),a.k.post(r.eg,t)}function p(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("type",e.type),e.financial_years.map((n=>{e.type?t.append("years[]",n):t.append("years[]",n.year_id)})),a.k.post(r.Ll,t)}},88638:function(e,t,n){n.r(t),n.d(t,{default:function(){return F}});var r=n(79567),a=n(61889),i=n(20890),s=n(36151),d=n(68870),o=n(58451),l=n(17834),c=n(72426),h=n.n(c),p=n(72791),x=n(91923),m=n(23735),u=n(94022),_=n(52463),Z=n(48550),j=n(23786),g=n(36571),v=n(87607),b=n(69783),y=n(92506),f=n(80184);var D=e=>{let{value:t,formID:n,initData:r,setReportData:i,onSubmit:s}=e;const{company:d}=(0,l.Z)(),c=null!==r&&void 0!==r&&r,p=Object.keys(t).length>0&&t,x=(0,y.TA)({initialValues:{company_id:p?p.company_id:d.company_id,start_date:p?h()(p.start_date):h()(d.start_date),end_date:p?h()(p.end_date):h()(d.end_date)},onSubmit:e=>{e.start_date=h()(e.start_date).format("YYYY-MM-DD"),e.end_date=h()(e.end_date).format("YYYY-MM-DD"),(0,o.rT)(e).then((e=>{s&&s(),i(e.data.data)})).catch((e=>{(0,u.c$)(e)}))}});return(0,f.jsx)("form",{id:n,onSubmit:x.handleSubmit,children:(0,f.jsx)(a.ZP,{container:!0,spacing:2,children:(0,f.jsxs)(g._,{dateAdapter:b.Z,localeText:{start:"Start Date",end:"From Date"},children:[(0,f.jsx)(a.ZP,{item:!0,xs:12,children:(0,f.jsx)(v.$,{id:"start_date",name:"start_date",label:"From Date",inputFormat:"YYYY-MM-DD",value:x.values.start_date,onChange:e=>{x.setFieldValue("start_date",h()(e))},renderInput:e=>(0,f.jsx)(Z.Z,{fullWidth:!0,size:"small",...e})})}),(0,f.jsx)(a.ZP,{item:!0,xs:12,children:(0,f.jsx)(v.$,{id:"end_date",name:"end_date",label:"To date",inputFormat:"YYYY-MM-DD",value:x.values.end_date,onChange:e=>{x.setFieldValue("end_date",h()(e))},renderInput:e=>(0,f.jsx)(Z.Z,{fullWidth:!0,size:"small",...e})})}),(0,f.jsx)(a.ZP,{item:!0,xs:12,children:(0,f.jsxs)(Z.Z,{select:!0,size:"small",label:"Company",fullWidth:!0,id:"company_id",name:"company_id",value:x.values.company_id,onChange:x.handleChange,error:x.touched.company_id&&Boolean(x.errors.company_id),helperText:x.touched.company_id&&x.errors.company_id,children:[(0,f.jsx)(j.Z,{value:0,children:"All Companies"},-1),c.companyList.map(((e,t)=>(0,f.jsx)(j.Z,{value:e.id,children:e.company_name},t)))]})})]})})})},Y=n(39281),M=n(79836),T=n(90618),$=n(56890),w=n(35855),k=n(68745),S=n(53382);var P=e=>{let{reportData:t}=e;const n=t.companyDetails,r=t.incomeDetails,a=t.otherIncomeDetails,s=t.expenseDetails;return(0,f.jsxs)(Y.Z,{children:[(0,f.jsx)(M.Z,{sx:{[`& .${T.Z.root}`]:{borderBottom:"none"}},children:(0,f.jsxs)($.Z,{children:["0"===t.company_id?(0,f.jsx)(w.Z,{children:(0,f.jsx)(k.Z,{align:"center",children:(0,f.jsx)(i.Z,{variant:"h2",children:"All Companies"})})}):(0,f.jsx)(w.Z,{children:(0,f.jsxs)(k.Z,{align:"center",children:[(0,f.jsx)(i.Z,{variant:"h2",children:n.company_name}),(0,f.jsxs)(i.Z,{variant:"inherit",children:[`${n.address_1}${n.address_2&&` ${n.address_2}`}`,",",` ${n.city}, ${n.state} ${n.zip_code}`]}),(0,f.jsxs)(i.Z,{variant:"inherit",children:[`Phone : ${n.contact_number}`," | ",`Email : ${n.email}`]})]})}),(0,f.jsx)(w.Z,{children:(0,f.jsxs)(k.Z,{align:"center",children:[(0,f.jsx)(i.Z,{variant:"h3",children:"Profit & Loss Report"}),(0,f.jsxs)(i.Z,{variant:"h4",children:["For the period ended",` ${h()(t.start_date).format("YYYY-MMM-DD")} To ${h()(t.end_date).format("YYYY-MMM-DD")}`]})]})})]})}),(0,f.jsxs)(M.Z,{size:"small",sx:{marginTop:5,[`& .${T.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:[(0,f.jsx)($.Z,{sx:{backgroundColor:"lightblue"},children:(0,f.jsxs)(w.Z,{children:[(0,f.jsx)(k.Z,{sx:{width:"60%"},children:(0,f.jsx)(i.Z,{variant:"h4",children:"Income"})}),(0,f.jsx)(k.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(i.Z,{variant:"h4",children:["(",t.Subscriber_currency_symbol,")"]})}),(0,f.jsx)(k.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(i.Z,{variant:"h4",children:["(",t.USD_symbol,")"]})})]})}),(0,f.jsxs)(S.Z,{children:[r.map(((e,n)=>(0,f.jsxs)(w.Z,{children:[(0,f.jsxs)(k.Z,{children:[(0,f.jsx)("b",{children:e.title}),"0"===t.company_id&&` - ${e.company_name}`]}),(0,f.jsx)(k.Z,{align:"right",children:e.subscriber_amount}),(0,f.jsx)(k.Z,{align:"right",children:e.usd_amount})]},n))),a.map(((e,n)=>(0,f.jsxs)(w.Z,{children:[(0,f.jsxs)(k.Z,{children:[(0,f.jsx)("b",{children:e.title}),"0"===t.company_id&&` - ${e.company_name}`]}),(0,f.jsx)(k.Z,{align:"right",children:e.subscriber_amount}),(0,f.jsx)(k.Z,{align:"right",children:e.usd_amount})]},n))),(0,f.jsxs)(w.Z,{children:[(0,f.jsx)(k.Z,{children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:"Total Income"})}),(0,f.jsx)(k.Z,{align:"right",children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:t.total_income_subscriber_currency})}),(0,f.jsx)(k.Z,{align:"right",children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:t.total_income_USD})})]})]})]}),(0,f.jsxs)(M.Z,{size:"small",sx:{marginTop:5,[`& .${T.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:[(0,f.jsx)($.Z,{sx:{backgroundColor:"lightblue"},children:(0,f.jsxs)(w.Z,{children:[(0,f.jsx)(k.Z,{sx:{width:"60%"},children:(0,f.jsx)(i.Z,{variant:"h4",children:"Expenses"})}),(0,f.jsx)(k.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(i.Z,{variant:"h4",children:["(",t.Subscriber_currency_symbol,")"]})}),(0,f.jsx)(k.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(i.Z,{variant:"h4",children:["(",t.USD_symbol,")"]})})]})}),(0,f.jsxs)(S.Z,{children:[s.map(((e,n)=>(0,f.jsxs)(w.Z,{children:[(0,f.jsxs)(k.Z,{children:[(0,f.jsx)("b",{children:e.title}),"0"===t.company_id&&` - ${e.company_name}`]}),(0,f.jsx)(k.Z,{align:"right",children:e.subscriber_amount}),(0,f.jsx)(k.Z,{align:"right",children:e.usd_amount})]},n))),(0,f.jsxs)(w.Z,{children:[(0,f.jsx)(k.Z,{children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:"Total Expense"})}),(0,f.jsx)(k.Z,{align:"right",children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:t.total_expense_subscriber_currency})}),(0,f.jsx)(k.Z,{align:"right",children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:t.total_expense_USD})})]})]})]}),(0,f.jsx)(M.Z,{size:"small",sx:{marginTop:5,[`& .${T.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:(0,f.jsx)($.Z,{sx:{backgroundColor:""+("Profit"===t.profit_loss?"lightgreen":"lightsalmon")},children:(0,f.jsxs)(w.Z,{children:[(0,f.jsx)(k.Z,{sx:{width:"60%"},children:(0,f.jsx)(i.Z,{variant:"h4",children:t.profit_loss})}),(0,f.jsx)(k.Z,{sx:{width:"20%"},align:"right",children:(0,f.jsx)(i.Z,{variant:"h4",children:t.total_profit_loss_subscriber_currency})}),(0,f.jsx)(k.Z,{sx:{width:"20%"},align:"right",children:(0,f.jsx)(i.Z,{variant:"h4",children:t.total_profit_loss_amount_USD})})]})})})]})},C=n(6445);var F=()=>{const{company:e,recall:t}=(0,l.Z)(),[n,c]=(0,p.useState)(!1),[Z,j]=(0,p.useState)({}),[g,v]=(0,p.useState)({});return(0,p.useEffect)((()=>{(0,o.El)().then((e=>{v(e.data.data)})).catch((e=>{(0,u.c$)(e)}))}),[]),(0,p.useEffect)((()=>{const t={company_id:e.company_id,start_date:h()(e.start_date).format("YYYY-MM-DD"),end_date:h()(e.end_date).format("YYYY-MM-DD")};(0,o.rT)(t).then((e=>{j(e.data.data)})).catch((e=>{(0,u.c$)(e)}))}),[t]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(m.Z,{title:(0,f.jsx)(a.ZP,{container:!0,alignItems:"center",spacing:x.dv,sx:{mb:-1,mt:-3},children:(0,f.jsx)(a.ZP,{item:!0,xs:12,children:(0,f.jsxs)(a.ZP,{container:!0,alignItems:"center",spacing:x.dv,children:[(0,f.jsx)(a.ZP,{item:!0,sx:{flexGrow:1},children:(0,f.jsx)(i.Z,{variant:"column",children:"Profit Loss Report"})}),(0,f.jsx)(a.ZP,{item:!0,children:(0,f.jsxs)(s.Z,{variant:"outlined",onClick:()=>(()=>{const e={company_id:Z.company_id,start_date:h()(Z.start_date).format("YYYY-MM-DD"),end_date:h()(Z.end_date).format("YYYY-MM-DD"),type:"report"};(0,o.rT)(e).then((e=>{const t=document.createElement("a");t.href=e.data.data.profit_loss,t.download=e.data.data.profit_loss_name,t.click()})).catch((e=>{console.error(e)}))})(),children:[(0,f.jsx)(C.Z,{sx:{mr:.5}})," Export"]})}),(0,f.jsx)(a.ZP,{item:!0,children:(0,f.jsxs)(s.Z,{variant:"contained",onClick:()=>{c((e=>!e))},children:[(0,f.jsx)(r.Z,{sx:{mr:.5}})," Generate Report"]})})]})})}),content:!0,children:Object.keys(Z).length>0?(0,f.jsx)(P,{reportData:Z}):(0,f.jsx)(d.Z,{component:"span",children:(0,f.jsx)(i.Z,{variant:"h2",textAlign:"center",sx:{p:"10%"},color:"GrayText",children:"Please Generate Report"})})}),n&&(0,f.jsx)(_.Z,{title:"Generate Profit Loss Report",open:n,onClose:()=>c((e=>!e)),id:"generateForm",children:(0,f.jsx)(D,{value:Z,formID:"generateForm",initData:g,setReportData:j,onSubmit:()=>{c((e=>!e))}})})]})}},6445:function(e,t,n){var r=n(64836);t.Z=void 0;var a=r(n(45649)),i=n(80184),s=(0,a.default)((0,i.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"}),"FileUploadOutlined");t.Z=s},79567:function(e,t,n){var r=n(76189),a=n(80184);t.Z=(0,r.Z)((0,a.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined")},56890:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(87462),a=n(63366),i=n(72791),s=n(28182),d=n(94419),o=n(829),l=n(93736),c=n(47630),h=n(21217);function p(e){return(0,h.Z)("MuiTableHead",e)}(0,n(75878).Z)("MuiTableHead",["root"]);var x=n(80184);const m=["className","component"],u=(0,c.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),_={variant:"head"},Z="thead";var j=i.forwardRef((function(e,t){const n=(0,l.Z)({props:e,name:"MuiTableHead"}),{className:i,component:c=Z}=n,h=(0,a.Z)(n,m),j=(0,r.Z)({},n,{component:c}),g=(e=>{const{classes:t}=e;return(0,d.Z)({root:["root"]},p,t)})(j);return(0,x.jsx)(o.Z.Provider,{value:_,children:(0,x.jsx)(u,(0,r.Z)({as:c,className:(0,s.Z)(g.root,i),ref:t,role:c===Z?null:"rowgroup",ownerState:j},h))})}))}}]);
//# sourceMappingURL=8638.7a48a8f5.chunk.js.map