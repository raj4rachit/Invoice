"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[707],{58451:function(e,n,a){a.d(n,{$8:function(){return c},El:function(){return i},W7:function(){return o},rT:function(){return s},sU:function(){return h},xb:function(){return p},yv:function(){return d},zi:function(){return l}});var r=a(88893),t=a(27475);function i(){return t.k.get(r.vG)}function s(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.oT,n)}function l(){return t.k.get(r.AL)}function c(){return t.k.get(r.XZ)}function o(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.g5,n)}function d(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.rS,n)}function p(e){const n=new FormData;return n.append("client_id",e.client_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.eg,n)}function h(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("type",e.type),e.financial_years.map((a=>{e.type?n.append("years[]",a):n.append("years[]",a.year_id)})),t.k.post(r.Ll,n)}},50707:function(e,n,a){a.r(n),a.d(n,{default:function(){return H}});var r=a(79567),t=a(61889),i=a(20890),s=a(36151),l=a(68870),c=a(58451),o=a(17834),d=a(72791),p=a(91923),h=a(23735),u=a(94022),x=a(52463),m=a(48550),j=a(23786),_=a(14868),Z=a(94454),y=a(45006),g=a(92506),v=a(80184);var f=e=>{let{value:n,formID:a,initData:r,setReportData:i,onSubmit:s}=e;const{company:l}=(0,o.Z)(),[p,h]=(0,d.useState)([]),x=null!==r&&void 0!==r&&r,f=Object.keys(n).length>0&&n,b=(0,g.TA)({initialValues:{company_id:f?f.company_id:"",financial_years:[]},onSubmit:e=>{(0,c.sU)(e).then((e=>{s&&s(),i(e.data.data)})).catch((e=>{(0,u.c$)(e)}))}}),S=e=>{b.setFieldValue("financial_years",[]),(0,y.Zc)(e).then((e=>{h(e.data.data)})).catch((e=>{(0,u.c$)(e)}))};return(0,d.useEffect)((()=>{if("0"!=b.values.company_id){const e=b.values.company_id;S(e)}}),[]),(0,v.jsx)("form",{id:a,onSubmit:b.handleSubmit,children:(0,v.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsx)(m.Z,{select:!0,size:"small",label:"Company",fullWidth:!0,id:"company_id",name:"company_id",value:b.values.company_id,onChange:e=>{b.handleChange(e),S(e.target.value)},error:b.touched.company_id&&Boolean(b.errors.company_id),helperText:b.touched.company_id&&b.errors.company_id,children:x&&x.companyList.map(((e,n)=>(0,v.jsx)(j.Z,{value:e.id,children:e.company_name},n)))})}),(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsx)(_.Z,{multiple:!0,size:"small",id:"financial_years",name:"financial_years",options:p||[],getOptionLabel:e=>e.financial_year_name?e.financial_year_name:"",value:b.values.financial_years,renderOption:(e,n,a)=>{let{selected:r}=a;return(0,v.jsxs)("li",{...e,children:[(0,v.jsx)(Z.Z,{checked:r,value:n.id}),n.financial_year_name]})},renderInput:e=>(0,v.jsx)(m.Z,{...e,size:"small",id:"financial_years",name:"financial_years",label:"Financial Year"}),onChange:(e,n)=>{b.setFieldValue("financial_years",n)}})})]})})},b=a(76189),S=(0,b.Z)((0,v.jsx)("path",{d:"m7 14 5-5 5 5H7z"}),"ArrowDropUpOutlined"),k=(0,b.Z)((0,v.jsx)("path",{d:"m7 10 5 5 5-5H7z"}),"ArrowDropDownOutlined"),D=a(39281),w=a(79836),F=a(90618),T=a(56890),z=a(35855),C=a(68745),P=a(53382);var U=e=>{var n,a,r,t,s,l,c,o;let{reportData:p}=e;const h=null!==(n=p.Subscriber_currency_symbol)&&void 0!==n?n:"",u=null!==(a=p.USD_symbol)&&void 0!==a?a:"",x=null!==(r=p.headers)&&void 0!==r?r:[],m=null!==(t=p.incomes)&&void 0!==t?t:[],j=null!==(s=p.expenses)&&void 0!==s?s:[],_=null!==(l=p.total_incomes)&&void 0!==l?l:[],Z=null!==(c=p.total_expenses)&&void 0!==c?c:[],y=null!==(o=p.total_margin)&&void 0!==o?o:[],g=e=>"up"===e?(0,v.jsx)(S,{color:"success",sx:{fontSize:"25px",verticalAlign:"middle"}}):"down"===e?(0,v.jsx)(k,{color:"error",sx:{fontSize:"25px",verticalAlign:"middle"}}):"";return(0,v.jsx)(D.Z,{children:(0,v.jsxs)(w.Z,{size:"small",sx:{marginTop:5,[`& .${F.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:[(0,v.jsxs)(T.Z,{sx:{backgroundColor:"lightblue"},children:[(0,v.jsxs)(z.Z,{children:[(0,v.jsx)(C.Z,{rowSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:"Incomes"})}),x.map(((e,n)=>(0,v.jsx)(C.Z,{align:"center",colSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:e.financial_year_name})},n)))]}),(0,v.jsx)(z.Z,{children:x.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsx)(C.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",h,")"]})}),(0,v.jsx)(C.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",u,")"]})})]},n)))})]}),(0,v.jsxs)(P.Z,{children:[m.map(((e,n)=>(0,v.jsxs)(z.Z,{children:[(0,v.jsx)(C.Z,{children:e.name}),e.income.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),e.subscriber_currency_total_amount]}),(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),e.USD_currency_total_amount]})]},n)))]},n))),(0,v.jsxs)(z.Z,{children:[(0,v.jsx)(C.Z,{children:(0,v.jsx)("b",{children:"Total"})}),_.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]})]}),(0,v.jsx)(P.Z,{children:(0,v.jsx)(z.Z,{})}),(0,v.jsxs)(T.Z,{sx:{backgroundColor:"lightblue"},children:[(0,v.jsxs)(z.Z,{children:[(0,v.jsx)(C.Z,{rowSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:"Expenses"})}),x.map(((e,n)=>(0,v.jsx)(C.Z,{align:"center",colSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:e.financial_year_name})},n)))]}),(0,v.jsx)(z.Z,{children:x.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsx)(C.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",h,")"]})}),(0,v.jsx)(C.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",u,")"]})})]},n)))})]}),(0,v.jsxs)(P.Z,{children:[j.map(((e,n)=>(0,v.jsxs)(z.Z,{children:[(0,v.jsx)(C.Z,{children:e.name}),e.expenses.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),e.subscriber_currency_total_amount]}),(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),e.USD_currency_total_amount]})]},n)))]},n))),(0,v.jsxs)(z.Z,{children:[(0,v.jsx)(C.Z,{children:(0,v.jsx)("b",{children:"Total"})}),Z.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]}),(0,v.jsxs)(z.Z,{sx:{backgroundColor:"antiquewhite"},children:[(0,v.jsx)(C.Z,{children:(0,v.jsx)("b",{children:"Total Margin"})}),y.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(C.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]})]})]})})},R=a(6445);var H=()=>{const{company:e,recall:n}=(0,o.Z)(),[a,m]=(0,d.useState)(!1),[j,_]=(0,d.useState)({}),[Z,y]=(0,d.useState)({});return(0,d.useEffect)((()=>{(0,c.zi)().then((e=>{y(e.data.data)})).catch((()=>{(0,u.c$)(err)}))}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(h.Z,{title:(0,v.jsx)(t.ZP,{container:!0,alignItems:"center",spacing:p.dv,sx:{mb:-1,mt:-3},children:(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:p.dv,children:[(0,v.jsx)(t.ZP,{item:!0,sx:{flexGrow:1},children:(0,v.jsx)(i.Z,{variant:"column",children:"Year over Year Report"})}),Object.keys(j).length>0&&(0,v.jsx)(t.ZP,{item:!0,children:(0,v.jsxs)(s.Z,{variant:"outlined",onClick:()=>(()=>{const e={company_id:j.company_id,financial_years:j.financial_ids,type:"report"};(0,c.sU)(e).then((e=>{const n=document.createElement("a");n.href=e.data.data.yoy_data,n.download=e.data.data.yoy_name,n.click()})).catch((e=>{console.error(e)}))})(),children:[(0,v.jsx)(R.Z,{sx:{mr:.5}})," Export"]})}),(0,v.jsx)(t.ZP,{item:!0,children:(0,v.jsxs)(s.Z,{variant:"contained",onClick:()=>{m((e=>!e))},children:[(0,v.jsx)(r.Z,{sx:{mr:.5}})," Generate Report"]})})]})})}),content:!0,children:Object.keys(j).length>0?(0,v.jsx)(U,{reportData:j}):(0,v.jsx)(l.Z,{component:"span",children:(0,v.jsx)(i.Z,{variant:"h2",textAlign:"center",sx:{p:"10%"},color:"GrayText",children:"Please Generate Report"})})}),a&&(0,v.jsx)(x.Z,{title:"Year over Year Report",open:a,onClose:()=>m((e=>!e)),id:"generateForm",children:(0,v.jsx)(f,{value:j,formID:"generateForm",initData:Z,setReportData:_,onSubmit:()=>{m((e=>!e))}})})]})}},6445:function(e,n,a){var r=a(64836);n.Z=void 0;var t=r(a(45649)),i=a(80184),s=(0,t.default)((0,i.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"}),"FileUploadOutlined");n.Z=s},56890:function(e,n,a){a.d(n,{Z:function(){return Z}});var r=a(87462),t=a(63366),i=a(72791),s=a(28182),l=a(94419),c=a(829),o=a(93736),d=a(47630),p=a(21217);function h(e){return(0,p.Z)("MuiTableHead",e)}(0,a(75878).Z)("MuiTableHead",["root"]);var u=a(80184);const x=["className","component"],m=(0,d.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,n)=>n.root})({display:"table-header-group"}),j={variant:"head"},_="thead";var Z=i.forwardRef((function(e,n){const a=(0,o.Z)({props:e,name:"MuiTableHead"}),{className:i,component:d=_}=a,p=(0,t.Z)(a,x),Z=(0,r.Z)({},a,{component:d}),y=(e=>{const{classes:n}=e;return(0,l.Z)({root:["root"]},h,n)})(Z);return(0,u.jsx)(c.Z.Provider,{value:j,children:(0,u.jsx)(m,(0,r.Z)({as:d,className:(0,s.Z)(y.root,i),ref:n,role:d===_?null:"rowgroup",ownerState:Z},p))})}))}}]);
//# sourceMappingURL=707.d54140b4.chunk.js.map