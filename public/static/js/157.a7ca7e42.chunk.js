"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[157],{62157:function(e,t,i){i.r(t),i.d(t,{default:function(){return dt}});var n=i(32815),a=i(79567),r=i(13967),s=i(61889),l=i(20890),d=i(95080),o=i(36151),c=i(77196),u=i(63466),m=i(48550),h=i(23786),_=i(36571),x=i(87607),j=i(69783),Z=i(58956),v=i(49502),p=i(17834),y=i(72426),g=i.n(y),b=i(72791),f=i(91923),C=i(23735),D=i(63868),P=i(62007),I=i(94022),T=i(14868),A=i(68096),S=i(30829),F=i(58406),Y=i(47071),k=i(94454),L=i(50533),z=i(39281),M=i(79836),w=i(56890),V=i(35855),W=i(68745),B=i(53382),q=i(13400),R=i(52791),E=i(19533),N=i(92506),$=i(81724),O=i(80184);const U=$.Ry().shape({item_type:$.Z_().required("Item type is required."),item_resource_name:$.Z_().required("Resource name is required."),item_qty:$.Z_().required("Resource / Hours is required.")}),H={item_type:0,isDate:!1,item_resource_name:"",item_start_date:g()().format("YYYY-MM-DD"),item_end_date:g()().format("YYYY-MM-DD"),item_actual_days:1,item_working_days:1,item_qty:0,item_rate:0,item_deduction:0,item_tax_amount:0,item_discount:0,item_discount_amount:0,item_subtotal:0,item_amount:0},X=e=>{let{value:t,formId:i,onSubmit:n,initData:a,setItemData:r,itemData:l,listingData:d}=e;const o=null!==t&&void 0!==t&&t,[c,u]=(0,b.useState)(!1),Z=()=>{let e=0;return a.tax_id.map((t=>{e+=+t.rate})),e},v=(0,N.TA)({initialValues:{index:o?o.index:"",id:o?o.id:"",bifurcated_client:o?o.bifurcated_client:"",item_type:o?o.item_type:"",item_resource_name:o?o.item_resource_name:"",item_start_date:o?o.item_start_date:g()().format("YYYY-MM-DD"),item_end_date:o?o.item_end_date:g()().format("YYYY-MM-DD"),item_actual_days:o?o.item_actual_days:"1",item_working_days:o?o.item_working_days:"1",item_qty:o?o.item_qty:"0",item_rate:o?o.item_rate:"0",item_deduction:o?o.item_deduction:"0",item_tax_amount:o?o.item_tax_amount:"0",item_discount:o?o.item_discount:"0",item_discount_amount:o?o.item_discount_amount:"0",item_subtotal:o?o.item_subtotal:"0",item_amount:o?o.item_amount:"0",item_description:o?o.item_description:""},validationSchema:U,onSubmit:e=>{""!==e.index?l[e.index]=e:r([...l,e]),n&&n()}}),p=(0,b.useCallback)((()=>{const e=H.item_qty,t=H.item_rate,i=H.item_actual_days,n=H.item_working_days,r=H.item_deduction,s=H.item_discount;let l=n*(e*t)/i-r,o=0,c=0,u=0;const m=a.discount_type;let h=0;"AFTER_TAX_PR"===m||"AFTER_TAX_FLAT"===m?(o=l*Z()/100,h="AFTER_TAX_PR"===m?(l+o)*s/100:s,h=Number(h).toFixed(2),c=l,u=l+o-h):"BEFORE_TAX_PR"===m||"BEFORE_TAX_FLAT"===m?(h="BEFORE_TAX_PR"===m?l*s/100:l+s,l-=h,o=l*Z()/100,c=l,u=l+o):(o=l*Z()/100,c=l,u=l+o),H.item_tax_amount=o.toFixed(2),H.item_discount_amount=h,H.item_subtotal=c.toFixed(2),H.item_amount=u.toFixed(2),v.setFieldValue("item_tax_amount",o.toFixed(2)),v.setFieldValue("item_discount_amount",h),v.setFieldValue("item_subtotal",c.toFixed(2)),v.setFieldValue("item_amount",u.toFixed(2));const _=d.invoiceItemTypeList.findIndex((e=>e.id===H.item_type)),x=d.invoiceItemTypeList[_];let j="";!0===H.isDate&&(j=`${-1!=_?x.item_type_name+" |":""} ${H.item_start_date} to ${H.item_end_date} | Working Days ${H.item_working_days} Out Of ${H.item_actual_days} `),v.setFieldValue("item_description",j)}),[]),y=(0,b.useCallback)((()=>{const e=d.invoiceItemTypeList.findIndex((e=>e.id===H.item_type)),t=d.invoiceItemTypeList[e];u("Yes"===t.is_date),H.isDate="Yes"===t.is_date;const i=H.item_start_date;let n=g()(i).format("YYYY-MM-DD");"Yes"===t.is_date&&(n=g()(i).add(t.date_no,t.date_type),"months"!==t.date_type&&"years"!==t.date_type||(n=g()(n).subtract("1","day")),n=n.format("YYYY-MM-DD")),H.item_end_date=n,v.setFieldValue("item_end_date",n);let a=g()(i),r=g()(n).diff(a,"days");"Yes"!==t.is_date&&(r+=1);let s=0;if(r>0){const e=a;for(let t=0;t<r;t++){let t=e.day();0==t||6==t||s++,e.add("1","days")}}H.item_actual_days=r,H.item_working_days=s,v.setFieldValue("item_actual_days",r),v.setFieldValue("item_working_days",s),p(),v.setFieldValue("item_type",H.item_type)}),[]),f=(e,t)=>{v.setFieldValue(e,t),(()=>{const e=H.item_start_date,t=H.item_end_date;let i=g()(e),n=g()(t).diff(i,"days")+1,a=0;if(n>0){const e=i;for(let t=0;t<n;t++){let t=e.day();0==t||6==t||a++,e.add("1","days")}}H.item_actual_days=n,H.item_working_days=a,v.setFieldValue("item_actual_days",n),v.setFieldValue("item_working_days",a),p()})()};return(0,b.useEffect)((()=>{H.item_type=o?o.item_type:0,H.item_resource_name=o?o.item_resource_name:"",H.item_start_date=o?g()(o.item_start_date).format("YYYY-MM-DD"):g()().format("YYYY-MM-DD"),H.item_end_date=o?g()(o.item_end_date).format("YYYY-MM-DD"):g()().format("YYYY-MM-DD"),H.item_actual_days=o?o.item_actual_days:1,H.item_working_days=o?o.item_working_days:1,H.item_qty=o?o.item_qty:0,H.item_rate=o?o.item_rate:0,H.item_deduction=o?o.item_deduction:0,H.item_tax_amount=o?o.item_tax_amount:0,H.item_discount=o?o.item_discount:0,H.item_discount_amount=o?o.item_discount_amount:0,H.item_subtotal=o?o.item_subtotal:0,H.item_amount=o?o.item_amount:0;const e=d.invoiceItemTypeList.findIndex((e=>e.id===H.item_type)),t=d.invoiceItemTypeList[e];H.isDate=!(!t||"Yes"!==t.is_date),u(!(!t||"Yes"!==t.is_date))}),[]),(0,O.jsx)("form",{id:i,onSubmit:v.handleSubmit,children:(0,O.jsx)(s.ZP,{container:!0,spacing:2,children:(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:["Yes"===a.is_bifurcated&&(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:v.touched.bifurcated_client&&Boolean(v.errors.bifurcated_client),children:[(0,O.jsx)(S.Z,{id:"itemTypeLabel",children:"Bifurcated Client"}),(0,O.jsx)(F.Z,{fullWidth:!0,labelId:"itemTypeLabel",id:"bifurcated_client",name:"bifurcated_client",label:"Bifurcated Client",value:v.values.bifurcated_client,onChange:e=>{v.handleChange(e);const t=d.bifurcatedClientList.findIndex((t=>t.id===e.target.value)),i=d.bifurcatedClientList[t];v.setFieldValue("item_resource_name",`${i.client_name} - `)},children:d.bifurcatedClientList.map(((e,t)=>(0,O.jsxs)(h.Z,{value:e.id,children:[e.client_name," - ",e.company_name]},t)))}),(0,O.jsx)(Y.Z,{children:v.touched.bifurcated_client&&v.errors.bifurcated_client})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:v.touched.item_type&&Boolean(v.errors.item_type),children:[(0,O.jsx)(S.Z,{id:"itemTypeLabel",children:"Item type"}),(0,O.jsx)(F.Z,{fullWidth:!0,labelId:"itemTypeLabel",id:"item_type",name:"item_type",label:"Item type",value:v.values.item_type,onChange:e=>{H.item_type=e.target.value,y(e)},children:d.invoiceItemTypeList.map(((e,t)=>(0,O.jsx)(h.Z,{value:e.id,children:e.item_type_name},t)))}),(0,O.jsx)(Y.Z,{children:v.touched.item_type&&v.errors.item_type})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",id:"item_resource_name",name:"item_resource_name",label:(0,O.jsx)(E.Z,{title:"Resource name"}),value:v.values.item_resource_name,onChange:e=>{v.handleChange(e)},error:v.touched.item_resource_name&&Boolean(v.errors.item_resource_name),helperText:v.touched.item_resource_name&&v.errors.item_resource_name})}),c&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(_._,{dateAdapter:j.Z,children:(0,O.jsx)(x.$,{id:"item_start_date",name:"item_start_date",label:(0,O.jsx)(E.Z,{title:"Start date"}),inputFormat:"YYYY-MM-DD",value:v.values.item_start_date,maxDate:g()(),onChange:e=>{const t=v.values.item_type;H.item_type=t,H.item_start_date=g()(e).format("YYYY-MM-DD"),y(),f("item_start_date",g()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",...e,error:v.touched.item_start_date&&Boolean(v.errors.item_start_date),helperText:v.touched.item_start_date&&v.errors.item_start_date})})})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(_._,{dateAdapter:j.Z,children:(0,O.jsx)(x.$,{id:"item_end_date",name:"item_end_date",label:(0,O.jsx)(E.Z,{title:"End date"}),inputFormat:"YYYY-MM-DD",value:v.values.item_end_date,minDate:v.values.item_start_date,onChange:e=>{H.item_end_date=g()(e).format("YYYY-MM-DD"),f("item_end_date",g()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",...e,error:v.touched.item_end_date&&Boolean(v.errors.item_end_date),helperText:v.touched.item_end_date&&v.errors.item_end_date})})})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",id:"item_actual_days",name:"item_actual_days",label:(0,O.jsx)(E.Z,{title:"Total Working Days"}),value:v.values.item_actual_days,error:v.touched.item_actual_days&&Boolean(v.errors.item_actual_days),helperText:v.touched.item_actual_days&&v.errors.item_actual_days,onChange:e=>{H.item_actual_days=e.target.value,v.handleChange(e),p()}})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",id:"item_working_days",name:"item_working_days",label:(0,O.jsx)(E.Z,{title:"Worked Days"}),value:v.values.item_working_days,onChange:e=>{H.item_working_days=e.target.value,v.handleChange(e),p()},error:v.touched.item_working_days&&Boolean(v.errors.item_working_days),helperText:v.touched.item_working_days&&v.errors.item_working_days})})]}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"item_qty",name:"item_qty",label:(0,O.jsx)(E.Z,{title:"Resource / Hours"}),value:v.values.item_qty,onChange:e=>{H.item_qty=e.target.value,v.handleChange(e),p()},error:v.touched.item_qty&&Boolean(v.errors.item_qty),helperText:v.touched.item_qty&&v.errors.item_qty})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"item_rate",name:"item_rate",label:(0,O.jsx)(E.Z,{title:"Rate"}),value:v.values.item_rate,onChange:e=>{H.item_rate=e.target.value,p(),v.handleChange(e)},error:v.touched.item_rate&&Boolean(v.errors.item_rate),helperText:v.touched.item_rate&&v.errors.item_rate})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"item_deduction",name:"item_deduction",label:(0,O.jsx)(E.Z,{title:"Deduction"}),value:v.values.item_deduction,onChange:e=>{H.item_deduction=e.target.value,p(),v.handleChange(e)},error:v.touched.item_deduction&&Boolean(v.errors.item_deduction),helperText:v.touched.item_deduction&&v.errors.item_deduction})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",id:"item_tax_amount",name:"item_tax_amount",label:(0,O.jsx)(E.Z,{title:"Tax Amount"}),value:v.values.item_tax_amount,onChange:e=>{H.item_tax_amount=e.target.value,v.handleChange(e)},error:v.touched.item_tax_amount&&Boolean(v.errors.item_tax_amount),helperText:v.touched.item_tax_amount&&v.errors.item_tax_amount,disabled:!0})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"item_discount",name:"item_discount",label:(0,O.jsx)(E.Z,{title:"Discount"}),value:v.values.item_discount,onChange:e=>{H.item_discount=e.target.value,p(),v.handleChange(e)},error:v.touched.item_discount&&Boolean(v.errors.item_discount),helperText:v.touched.item_discount&&v.errors.item_discount})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",id:"item_amount",name:"item_amount",label:(0,O.jsx)(E.Z,{title:"Amount"}),value:v.values.item_amount,onChange:e=>{H.item_amount=e.target.value,v.handleChange(e)},disabled:!0})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(m.Z,{fullWidth:!0,multiline:!0,rows:4,size:"small",id:"item_description",name:"item_description",label:"Description",value:v.values.item_description,onChange:v.handleChange,error:v.touched.item_description&&Boolean(v.errors.item_description),helperText:v.touched.item_description&&v.errors.item_description})})]})})})})};var G=i(52463),J=i(76189),Q=(0,J.Z)((0,O.jsx)("path",{d:"m14.06 9.02.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined"),K=(0,J.Z)((0,O.jsx)("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"}),"ContentCopyOutlined"),ee=i(84220);const te=$.Ry().shape({client_id:$.Z_().required("Client is required."),invoice_number:$.Z_().required("Invoice number is required."),invoice_date:$.Z_().required("Invoice date is required."),invoice_due_date:$.Z_().required("Invoice due date is required."),discount_type:$.Z_().required("Discount type is required."),invoice_currency_id:$.Z_().required("Invoice currency is required."),ccr:$.Z_().required("Currency conversion rate is required.")}),ie={currency_id:0,company_id:0};var ne=e=>{var t,i,n,a,r,d,o,c,u;let{value:Z,formId:y,onSubmit:f}=e;const C=null!==Z&&void 0!==Z&&Z,D=null!==(t=null===C||void 0===C?void 0:C.invoice)&&void 0!==t&&t,P=null!==(i=null===C||void 0===C?void 0:C.invoiceTaxes)&&void 0!==i&&i,$=null!==(n=null===C||void 0===C?void 0:C.invoiceBanks)&&void 0!==n&&n,U=null!==(a=null===C||void 0===C?void 0:C.invoiceItems)&&void 0!==a&&a,{company:H}=(0,p.Z)(),[J,ne]=(0,b.useState)(!1),[ae,re]=(0,b.useState)(!1),[se,le]=(0,b.useState)(!1),[de,oe]=(0,b.useState)([]),[ce,ue]=(0,b.useState)({}),[me,he]=(0,b.useState)({totalTax:0,totalDeduction:0,totalDiscount:0,subTotal:0,grandTotal:0});(0,b.useEffect)((()=>{he({totalTax:D?D.total_tax_amount:0,totalDeduction:D?D.total_discount:0,totalDiscount:D?D.total_discount:0,subTotal:D?D.subtotal:0,grandTotal:D?D.invoice_currency_total_amount:0});const e=[];U&&U.map(((t,i)=>{const n={bifurcated_client:t.client_id,id:t.id,item_actual_days:Number(t.actual_days),item_amount:t.total_amount,item_deduction:t.deduction,item_description:t.description,item_discount:t.discount,item_discount_amount:t.discount_amount,item_end_date:t.end_date,item_qty:Number(t.resource_quantity),item_rate:Number(t.rate),item_resource_name:t.resource_name,item_start_date:t.start_date,item_subtotal:t.subtotal,item_tax_amount:t.tax_amount,item_type:t.item_type_id,item_working_days:Number(t.working_days)};e.push(n)})),oe(e);const t=P?C.taxList.filter((e=>P.some((t=>e.id===t.tax_id)))):[];_e.setFieldValue("tax_id",t);const i=$?C.bankList.filter((e=>$.some((t=>e.id===t.company_bank_id)))):[];_e.setFieldValue("bank_id",i)}),[]);const _e=(0,N.TA)({initialValues:{id:D?D.id:"",client_id:D?D.client_id:"",invoice_number:D?D.invoice_no:null===C||void 0===C?void 0:C.invoice_number,invoice_date:D?D.invoice_date:g()().format("YYYY-MM-DD"),invoice_due_date:D?D.invoice_due_date:g()().add(14,"days").format("YYYY-MM-DD"),is_bifurcated:D?D.is_bifurcated:"No",is_display_company_amount:D?D.is_display_company_amount:"No",discount_type:D?D.discount_type:"AFTER_TAX_PR",invoice_currency_id:D?D.invoice_currency_id:"",tax_id:[],bank_id:[],invoice_note:D?D.invoice_note:"",ccr:D?D.currency_conversion_rate:"",company_amount:D?D.company_currency_total_amount:0,subscriber_ccr:D?D.subscriber_currency_conversion_rate:"",subscriber_currency_amount:D?D.subscriber_currency_total_amount:0,USD_ccr:D?D.USD_currency_conversion_rate:"",USD_currency_amount:D?D.USD_currency_total_amount:0,invoice_item:[],payment_term_id:D&&null!=D.term_id?D.term_id:"",formType:D&&D.id?"edit":"add",subscriber_currency_id:D?D.subscriber_currency_id:null===C||void 0===C?void 0:C.subscriber_currency_id},validationSchema:te,onSubmit:e=>{e.invoice_item=de,e.total_tax=me.totalTax,e.total_deduction=me.totalDeduction,e.total_discount=me.totalDiscount,e.subtotal=me.subTotal,e.grand_total=me.grandTotal,(0,v.r0)(e).then((e=>{e.data&&1===e.data.status?(f&&f(),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))}});(0,b.useMemo)((()=>{var e,t,i;let n=0,a=0,r=0,s=0,l=0,d=null!==(e=_e.values.ccr)&&void 0!==e?e:0,o=null!==(t=_e.values.subscriber_ccr)&&void 0!==t?t:0,c=null!==(i=_e.values.USD_ccr)&&void 0!==i?i:0;de.map((e=>{n+=+e.item_tax_amount,a+=+e.item_deduction,r+=+e.item_discount_amount,s+=+e.item_subtotal,l+=+e.item_amount})),he({totalTax:n.toFixed(2),totalDeduction:a.toFixed(2),totalDiscount:r.toFixed(2),subTotal:s.toFixed(2),grandTotal:l.toFixed(2)}),_e.setFieldValue("company_amount",(s*d).toFixed(2)),_e.setFieldValue("subscriber_currency_amount",(s*o).toFixed(2)),_e.setFieldValue("USD_currency_amount",(s*c).toFixed(2))}),[de,se]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(R.Z,{children:(0,O.jsx)("form",{id:y,onSubmit:_e.handleSubmit,children:(0,O.jsxs)(s.ZP,{item:!0,container:!0,spacing:2,children:[(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(T.Z,{disableClearable:!0,size:"small",id:"client_id",name:"client_id",options:null!==(r=null===C||void 0===C?void 0:C.clientList)&&void 0!==r?r:[],value:""!=_e.values.client_id?C.clientList.filter((e=>e.id==_e.values.client_id))[0]:null,getOptionLabel:e=>e.client_name?`${e.client_name} - ${e.company_name}`:"",renderOption:(e,t)=>(0,O.jsx)("li",{...e,children:`${t.client_name} - ${t.company_name}`}),renderInput:e=>(0,O.jsx)(m.Z,{...e,size:"small",name:"client_id",label:(0,O.jsx)(E.Z,{title:"Client"}),error:_e.touched.client_id&&Boolean(_e.errors.client_id),helperText:_e.touched.client_id&&_e.errors.client_id}),onChange:(e,t)=>{_e.setFieldValue("client_id",t?t.id:"")}})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",id:"invoice_number",name:"invoice_number",label:(0,O.jsx)(E.Z,{title:"Invoice Number"}),value:_e.values.invoice_number,onChange:_e.handleChange,error:_e.touched.invoice_number&&Boolean(_e.errors.invoice_number),helperText:_e.touched.invoice_number&&_e.errors.invoice_number})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(_._,{dateAdapter:j.Z,children:(0,O.jsx)(x.$,{id:"invoice_date",name:"invoice_date",label:(0,O.jsx)(E.Z,{title:"Invoice Date"}),inputFormat:"YYYY-MM-DD",value:_e.values.invoice_date,maxDate:g()(),onChange:e=>{_e.setFieldValue("invoice_due_date",g()(e).add(14,"days").format("YYYY-MM-DD")),_e.setFieldValue("invoice_date",g()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",...e,error:_e.touched.invoice_date&&Boolean(_e.errors.invoice_date),helperText:_e.touched.invoice_date&&_e.errors.invoice_date})})})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(_._,{dateAdapter:j.Z,children:(0,O.jsx)(x.$,{id:"invoice_due_date",name:"invoice_due_date",label:(0,O.jsx)(E.Z,{title:"Invoice Due Date"}),inputFormat:"YYYY-MM-DD",value:_e.values.invoice_due_date,onChange:e=>{_e.setFieldValue("invoice_due_date",g()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",...e,error:_e.touched.invoice_due_date&&Boolean(_e.errors.invoice_due_date),helperText:_e.touched.invoice_due_date&&_e.errors.invoice_due_date})})})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:_e.touched.is_bifurcated&&Boolean(_e.errors.is_bifurcated),children:[(0,O.jsx)(S.Z,{id:"isBifurcatedLabel",children:"Is Bifurcated?"}),(0,O.jsxs)(F.Z,{fullWidth:!0,labelId:"isBifurcatedLabel",id:"is_bifurcated",name:"is_bifurcated",label:"Is Bifurcated?",value:_e.values.is_bifurcated,onChange:_e.handleChange,disabled:null!==(d=de.length>0)&&void 0!==d&&d,children:[(0,O.jsx)(h.Z,{value:"Yes",children:"Yes"},0),(0,O.jsx)(h.Z,{value:"No",children:"No"},1)]}),(0,O.jsx)(Y.Z,{children:_e.touched.is_bifurcated&&_e.errors.is_bifurcated})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:_e.touched.is_display_company_amount&&Boolean(_e.errors.is_display_company_amount),children:[(0,O.jsx)(S.Z,{id:"discountLabel",children:"Is Display Company Amount?"}),(0,O.jsxs)(F.Z,{fullWidth:!0,labelId:"discountLabel",id:"is_display_company_amount",name:"is_display_company_amount",label:"Is Display Company Amount?",value:_e.values.is_display_company_amount,onChange:_e.handleChange,children:[(0,O.jsx)(h.Z,{value:"Yes",children:"Yes"},0),(0,O.jsx)(h.Z,{value:"No",children:"No"},1)]}),(0,O.jsx)(Y.Z,{children:_e.touched.is_display_company_amount&&_e.errors.is_display_company_amount})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:_e.touched.discount_type&&Boolean(_e.errors.discount_type),children:[(0,O.jsx)(S.Z,{id:"discountLabel",children:(0,O.jsx)(E.Z,{title:"Discount Type"})}),(0,O.jsx)(F.Z,{fullWidth:!0,labelId:"discountLabel",id:"discount_type",name:"discount_type",label:(0,O.jsx)(E.Z,{title:"Discount Type"}),value:_e.values.discount_type,onChange:_e.handleChange,disabled:null!==(o=de.length>0)&&void 0!==o&&o,children:C.discountType&&C.discountType.map(((e,t)=>(0,O.jsx)(h.Z,{value:e.id,children:e.name},t)))}),(0,O.jsx)(Y.Z,{children:_e.touched.discount_type&&_e.errors.discount_type})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:_e.touched.invoice_currency_id&&Boolean(_e.errors.invoice_currency_id),children:[(0,O.jsx)(S.Z,{id:"invoiceCurrencyLabel",children:(0,O.jsx)(E.Z,{title:"Invoice Currency"})}),(0,O.jsx)(F.Z,{fullWidth:!0,labelId:"invoiceCurrencyLabel",id:"invoice_currency_id",name:"invoice_currency_id",label:(0,O.jsx)(E.Z,{title:"Invoice Currency"}),value:_e.values.invoice_currency_id,onChange:e=>{(e=>{ie.currency_id=e.target.value,ie.company_id=D?D.company_id:H.company_id,(0,v.er)(ie).then((e=>{const t=e.data.data;_e.setFieldValue("ccr",t.company_ccr),_e.setFieldValue("subscriber_ccr",t.subscriber_ccr),_e.setFieldValue("USD_ccr",t.USD_ccr);let i=t.company_ccr,n=t.subscriber_ccr,a=t.USD_ccr,r=(me.grandTotal,me.subTotal);_e.setFieldValue("company_amount",(r*i).toFixed(2)),_e.setFieldValue("subscriber_currency_amount",(r*n).toFixed(2)),_e.setFieldValue("USD_currency_amount",(r*a).toFixed(2))})).catch((e=>{(0,I.c$)(e)}))})(e),_e.handleChange(e)},children:C&&(null===C||void 0===C?void 0:C.currencyList.map(((e,t)=>(0,O.jsx)(h.Z,{value:e.id,children:`${e.currency_symbol} - ${e.currency_name}`},t))))}),(0,O.jsx)(Y.Z,{children:_e.touched.invoice_currency_id&&_e.errors.invoice_currency_id})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(T.Z,{multiple:!0,size:"small",id:"tax_id",name:"tax_id",options:null!==(c=C.taxList)&&void 0!==c?c:[],value:_e.values.tax_id,getOptionLabel:e=>e.tax_name?`${e.tax_name} (${e.rate}${"Yes"===e.is_percentage&&"%"}) `:"",renderOption:(e,t,i)=>{let{selected:n}=i;return(0,O.jsxs)("li",{...e,children:[(0,O.jsx)(k.Z,{checked:n,value:t.id}),`${t.tax_name} (${t.rate}${"Yes"===t.is_percentage&&"%"}) `]})},renderInput:e=>(0,O.jsx)(m.Z,{...e,size:"small",name:"tax_id",label:"TAX's"}),onChange:(e,t)=>{_e.setFieldValue("tax_id",t),(e=>{let t=0;e.map((e=>{t+=+e.rate})),de.map((e=>{let i=e;const n=e.item_qty,a=e.item_rate,r=e.item_actual_days,s=e.item_working_days,l=e.item_deduction,d=e.item_discount;let o=s*(n*a)/r-l,c=0,u=0,m=0;const h=_e.values.discount_type;let _=0;"AFTER_TAX_PR"===h||"AFTER_TAX_FLAT"===h?(c=o*t/100,_="AFTER_TAX_PR"===h?(o+c)*d/100:d,_=Number(_).toFixed(2),u=o,m=o+c-_):"BEFORE_TAX_PR"===h||"BEFORE_TAX_FLAT"===h?(_="BEFORE_TAX_PR"===h?o*d/100:o+d,o-=_,c=o*t/100,u=o,m=o+c):(c=o*t/100,u=o,m=o+c),i.item_tax_amount=c.toFixed(2),i.item_discount_amount=_,i.item_subtotal=u.toFixed(2),i.item_amount=m.toFixed(2)})),le((e=>!e))})(t)}})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:_e.touched.payment_term_id&&Boolean(_e.errors.payment_term_id),children:[(0,O.jsx)(S.Z,{id:"paymentTermID",children:"Payment Term"}),(0,O.jsx)(F.Z,{fullWidth:!0,labelId:"paymentTermID",id:"payment_term_id",name:"payment_term_id",label:"Payment Term",value:_e.values.payment_term_id,onChange:_e.handleChange,children:C.paymentTerms.map(((e,t)=>(0,O.jsx)(h.Z,{value:e.id,children:e.title},t)))}),(0,O.jsx)(Y.Z,{children:_e.touched.payment_term_id&&_e.errors.payment_term_id})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(T.Z,{multiple:!0,size:"small",id:"bank_id",name:"bank_id",options:null!==(u=C.bankList)&&void 0!==u?u:[],value:_e.values.bank_id,getOptionLabel:e=>e.bank_detail_name?e.bank_detail_name:"",renderOption:(e,t,i)=>{let{selected:n}=i;return(0,O.jsxs)("li",{...e,children:[(0,O.jsx)(k.Z,{checked:n,value:t.id}),t.bank_detail_name]})},renderInput:e=>(0,O.jsx)(m.Z,{...e,size:"small",name:"bank_id",label:"Bank Details"}),onChange:(e,t)=>{_e.setFieldValue("bank_id",t)}})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(m.Z,{fullWidth:!0,multiline:!0,rows:4,size:"small",id:"invoice_note",name:"invoice_note",label:"Invoice Note",value:_e.values.invoice_note,onChange:_e.handleChange})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsxs)(s.ZP,{container:!0,justifyContent:"space-between",children:[(0,O.jsx)(l.Z,{variant:"body1",align:"left",children:"Invoice Item"}),(0,O.jsx)(L.Z,{underline:"hover",onClick:()=>{ne((e=>!e))},sx:{cursor:"pointer"},children:"Add Item"})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(z.Z,{children:(0,O.jsxs)(M.Z,{children:[(0,O.jsx)(w.Z,{children:(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:"Description"}),(0,O.jsx)(W.Z,{align:"right",children:"Price"}),(0,O.jsx)(W.Z,{align:"right",children:"QTY"}),(0,O.jsx)(W.Z,{align:"right",children:"Deduction"}),(0,O.jsx)(W.Z,{align:"right",children:"TAX"}),(0,O.jsx)(W.Z,{align:"right",children:"Discount"}),(0,O.jsx)(W.Z,{align:"right",children:"Subtotal"}),(0,O.jsx)(W.Z,{align:"right",children:"Amount"}),(0,O.jsx)(W.Z,{align:"right",children:"Action"})]})}),(0,O.jsxs)(B.Z,{children:[de.map(((e,t)=>(0,O.jsxs)(V.Z,{children:[(0,O.jsxs)(W.Z,{children:[e.item_resource_name,(0,O.jsx)(l.Z,{variant:"subtitle2",children:e.item_description})]}),(0,O.jsx)(W.Z,{align:"right",children:e.item_rate}),(0,O.jsx)(W.Z,{align:"right",children:e.item_qty}),(0,O.jsx)(W.Z,{align:"right",children:e.item_deduction}),(0,O.jsx)(W.Z,{align:"right",children:e.item_tax_amount}),(0,O.jsx)(W.Z,{align:"right",children:e.item_discount_amount}),(0,O.jsx)(W.Z,{align:"right",children:e.item_subtotal}),(0,O.jsx)(W.Z,{align:"right",children:e.item_amount}),(0,O.jsxs)(W.Z,{align:"right",children:[(0,O.jsx)(q.Z,{color:"primary",component:"label",onClick:()=>{return n=t,(i=e).index=n,ue(i),void re((e=>!e));var i,n},children:(0,O.jsx)(Q,{fontSize:"small"})}),(0,O.jsx)(q.Z,{color:"secondary",component:"label",onClick:()=>(e=>{const t=de[e];oe((e=>[...e,t]))})(t),children:(0,O.jsx)(K,{fontSize:"small"})}),(0,O.jsx)(q.Z,{color:"error",component:"label",onClick:()=>{return e=t,de.splice(e,1),void le((e=>!e));var e},children:(0,O.jsx)(ee.Z,{fontSize:"small"})})]})]},t))),0==de.length&&(0,O.jsx)(V.Z,{children:(0,O.jsx)(W.Z,{align:"center",colSpan:9,children:"No Data Found"})})]})]})})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"Total Tax"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:me.totalTax})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"Total Deduction"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:me.totalDeduction})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"Total Discount"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:me.totalDiscount})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"Subtotal"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:me.subTotal})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"Grand Total"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:me.grandTotal})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:7,sm:9,textAlign:"end",children:(0,O.jsx)(l.Z,{variant:"subtitle1",children:"Currency Conversion Rate"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"ccr",name:"ccr",label:(0,O.jsx)(E.Z,{title:"CCR"}),value:_e.values.ccr,onChange:e=>{_e.setFieldValue("company_amount",(me.grandTotal*e.target.value).toFixed(2)),_e.handleChange(e)},error:_e.touched.ccr&&Boolean(_e.errors.ccr),helperText:_e.touched.ccr&&_e.errors.ccr})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:7,sm:9,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"Company Currency Amount"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:_e.values.company_amount})})]})}),_e.values.invoice_currency_id!==_e.values.subscriber_currency_id&&(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:7,sm:9,textAlign:"end",children:(0,O.jsx)(l.Z,{variant:"subtitle1",children:"Subscriber Currency Conversion Rate"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"subscriber_ccr",name:"subscriber_ccr",label:(0,O.jsx)(E.Z,{title:"Subscriber CCR"}),value:_e.values.subscriber_ccr,onChange:e=>{_e.setFieldValue("subscriber_currency_amount",(me.grandTotal*e.target.value).toFixed(2)),_e.handleChange(e)},error:_e.touched.subscriber_ccr&&Boolean(_e.errors.subscriber_ccr),helperText:_e.touched.subscriber_ccr&&_e.errors.subscriber_ccr})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:7,sm:9,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"Subscriber Currency Amount"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:_e.values.subscriber_currency_amount})})]})})]}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:7,sm:9,textAlign:"end",children:(0,O.jsx)(l.Z,{variant:"subtitle1",children:"USD Currency Conversion Rate"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"USD_ccr",name:"USD_ccr",label:(0,O.jsx)(E.Z,{title:"USD CCR"}),value:_e.values.USD_ccr,onChange:e=>{_e.setFieldValue("subscriber_currency_amount",(me.grandTotal*e.target.value).toFixed(2)),_e.handleChange(e)},error:_e.touched.USD_ccr&&Boolean(_e.errors.USD_ccr),helperText:_e.touched.USD_ccr&&_e.errors.USD_ccr})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,justifyContent:"end",children:[(0,O.jsx)(s.ZP,{item:!0,xs:7,sm:9,children:(0,O.jsx)(l.Z,{variant:"subtitle1",textAlign:"end",children:"USD Currency Amount"})}),(0,O.jsx)(s.ZP,{item:!0,xs:5,sm:3,children:(0,O.jsx)(l.Z,{variant:"subtitle",children:_e.values.USD_currency_amount})})]})})]})})}),J&&(0,O.jsx)(G.Z,{title:"Add Item",open:J,onClose:()=>ne((e=>!e)),id:"addEditItem",sx:{"&>div:nth-of-type(3)":{"&>div":{minWidth:{md:"50%",xs:"90%"}}}},children:(0,O.jsx)(X,{formId:"addEditItem",onSubmit:()=>{ne((e=>!e))},initData:_e.values,setItemData:oe,itemData:de,listingData:{bifurcatedClientList:C.bifurcatedClientList,invoiceItemTypeList:C.invoiceItemTypeList}})}),ae&&(0,O.jsx)(G.Z,{title:"Edit Item",open:ae,onClose:()=>re((e=>!e)),id:"addEditItem",sx:{"&>div:nth-of-type(3)":{"&>div":{minWidth:{md:"50%",xs:"90%"}}}},children:(0,O.jsx)(X,{value:ce,formId:"addEditItem",onSubmit:()=>{le((e=>!e)),re((e=>!e))},initData:_e.values,setItemData:oe,itemData:de,listingData:{bifurcatedClientList:C.bifurcatedClientList,invoiceItemTypeList:C.invoiceItemTypeList}})})]})},ae=(0,J.Z)((0,O.jsx)("path",{d:"M20 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h15c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 2v3H5V5h15zm-5 14h-5v-9h5v9zM5 10h3v9H5v-9zm12 9v-9h3v9h-3z"}),"TableChartOutlined"),re=i(47630),se=i(90493),le=i(15021),de=i(20653),oe=i(60220),ce=i(49900),ue=i(57621),me=i(47047);var he=()=>(0,O.jsx)(ue.Z,{sx:{p:2},children:(0,O.jsx)(se.Z,{sx:{py:0},children:(0,O.jsxs)(le.ZP,{alignItems:"center",disableGutters:!0,sx:{py:0},children:[(0,O.jsx)(de.Z,{children:(0,O.jsx)(me.Z,{variant:"rectangular",width:44,height:44})}),(0,O.jsx)(ce.Z,{sx:{py:0},primary:(0,O.jsx)(me.Z,{variant:"rectangular",height:20}),secondary:(0,O.jsx)(me.Z,{variant:"text"})})]})})});const _e=(0,re.ZP)(C.Z)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.primary.dark,color:t.palette.primary.light,overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:210,height:210,background:`linear-gradient(210.04deg, ${t.palette.primary[200]} -50.94%, rgba(144, 202, 249, 0) 83.49%)`,borderRadius:"50%",top:-30,right:-180},"&:before":{content:'""',position:"absolute",width:210,height:210,background:`linear-gradient(140.9deg, ${t.palette.primary[200]} -14.02%, rgba(144, 202, 249, 0) 77.58%)`,borderRadius:"50%",top:-160,right:-130}}}));var xe=e=>{let{isLoading:t,title:i,count:n,amount:a,handleFilter:s,status:d}=e;const o=(0,r.Z)();return(0,O.jsx)(O.Fragment,{children:t?(0,O.jsx)(he,{}):(0,O.jsx)(_e,{border:!1,content:!1,sx:{cursor:"pointer"},onClick:()=>s("filterStatus",d),children:(0,O.jsx)(R.Z,{sx:{p:2},children:(0,O.jsx)(se.Z,{sx:{py:0},children:(0,O.jsxs)(le.ZP,{alignItems:"center",disableGutters:!0,sx:{py:0},children:[(0,O.jsx)(de.Z,{children:(0,O.jsx)(oe.Z,{variant:"rounded",sx:{...o.typography.commonAvatar,...o.typography.largeAvatar,backgroundColor:o.palette.primary[800],color:"#fff"},children:(0,O.jsx)(ae,{fontSize:"inherit"})})}),(0,O.jsx)(ce.Z,{sx:{py:0,mt:.45,mb:.45},primary:(0,O.jsx)(l.Z,{variant:"h4",sx:{color:"#fff"},children:a}),secondary:(0,O.jsx)(l.Z,{variant:"subtitle2",sx:{color:"primary.light",mt:.25},children:i})}),(0,O.jsx)(ce.Z,{primary:(0,O.jsx)(l.Z,{variant:"h2",sx:{color:"#fff"},textAlign:"right",children:n})})]})})})})})};const je=(0,re.ZP)(C.Z)((e=>{let{theme:t}=e;return{backgroundColor:t.palette.secondary.dark,color:t.palette.secondary.light,overflow:"hidden",position:"relative","&:after":{content:'""',position:"absolute",width:210,height:210,background:`linear-gradient(210.04deg, ${t.palette.secondary[200]} -50.94%, rgba(144, 202, 249, 0) 83.49%)`,borderRadius:"50%",top:-30,right:-180},"&:before":{content:'""',position:"absolute",width:210,height:210,background:`linear-gradient(140.9deg, ${t.palette.secondary[200]} -14.02%, rgba(144, 202, 249, 0) 77.58%)`,borderRadius:"50%",top:-160,right:-130}}}));var Ze=e=>{let{isLoading:t,title:i,count:n,amount:a,handleFilter:s,status:d}=e;const o=(0,r.Z)();return(0,O.jsx)(O.Fragment,{children:t?(0,O.jsx)(he,{}):(0,O.jsx)(je,{border:!1,content:!1,sx:{cursor:"pointer"},onClick:()=>s("filterStatus",d),children:(0,O.jsx)(R.Z,{sx:{p:2},children:(0,O.jsx)(se.Z,{sx:{py:0},children:(0,O.jsxs)(le.ZP,{alignItems:"center",disableGutters:!0,sx:{py:0},children:[(0,O.jsx)(de.Z,{children:(0,O.jsx)(oe.Z,{variant:"rounded",sx:{...o.typography.commonAvatar,...o.typography.largeAvatar,backgroundColor:o.palette.secondary[800],color:"#fff"},children:(0,O.jsx)(ae,{fontSize:"inherit"})})}),(0,O.jsx)(ce.Z,{sx:{py:0,mt:.45,mb:.45},primary:(0,O.jsx)(l.Z,{variant:"h4",sx:{color:"#fff"},children:a}),secondary:(0,O.jsx)(l.Z,{variant:"subtitle2",sx:{color:"primary.light",mt:.25},children:i})}),(0,O.jsx)(ce.Z,{primary:(0,O.jsx)(l.Z,{variant:"h2",sx:{color:"#fff"},textAlign:"right",children:n})})]})})})})})},ve=i(81918),pe=i(97639),ye=i(87462),ge=i(63366),be=i(28182),fe=i(94419),Ce=i(829),De=i(93736),Pe=i(21217);function Ie(e){return(0,Pe.Z)("MuiTableFooter",e)}(0,i(75878).Z)("MuiTableFooter",["root"]);const Te=["className","component"],Ae=(0,re.ZP)("tfoot",{name:"MuiTableFooter",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-footer-group"}),Se={variant:"footer"},Fe="tfoot";var Ye=b.forwardRef((function(e,t){const i=(0,De.Z)({props:e,name:"MuiTableFooter"}),{className:n,component:a=Fe}=i,r=(0,ge.Z)(i,Te),s=(0,ye.Z)({},i,{component:a}),l=(e=>{const{classes:t}=e;return(0,fe.Z)({root:["root"]},Ie,t)})(s);return(0,O.jsx)(Ce.Z.Provider,{value:Se,children:(0,O.jsx)(Ae,(0,ye.Z)({as:a,className:(0,be.Z)(l.root,n),ref:t,role:a===Fe?null:"rowgroup",ownerState:s},r))})})),ke=i(63033),Le=i(80720),ze=i(53299),Me=i(38886),we=i(90618);const Ve=$.Ry().shape({invoice_status:$.Z_().required("Invoice status is required."),ref_no:$.Z_().required("Reference no is required."),payment_date:$.Z_().required("Payment date no is required."),way_of_payment:$.Z_().required("Way of payment is required."),invoiceCurrencyAmount:$.Z_().required("Amount in invoice currency is required."),companyCurrencyAmount:$.Z_().required("Amount in company currency is required."),tds:$.Z_().required("TDS is required."),ccr:$.Z_().required("CCR is required."),subscriber_ccr:$.Z_().required("Subscriber ccr is required."),USD_ccr:$.Z_().required("USD ccr is required."),difference:$.Z_().required("Difference is required.")}),We={companyAmount:0,tds:0};var Be=e=>{let{value:t,formId:i,invoiceData:n,currencyRateData:a,onSubmit:r}=e;const d=null!==n&&void 0!==n&&n,o=null!==a&&void 0!==a&&a,c=null!==t&&void 0!==t&&t;(0,b.useEffect)((()=>{We.companyAmount=0,We.tds=0}),[]);const u=(0,N.TA)({initialValues:{id:c?c.id:"",invoice_id:d?d.id:"",invoice_status:c?c.status:"",ref_no:c?c.reference_no:"",payment_date:c?c.payment_date:"",way_of_payment:c?c.payment_source_id:"",remainingAmount:d.remaining_amount,invoiceCurrencyAmount:c?c.invoice_currency_amount:"",companyCurrencyAmount:c?c.company_currency_amount:"",tds:c?c.tds:"",ccr:c?c.currency_conversion_rate:o.company_ccr,subscriber_ccr:c?c.subscriber_ccr:o.subscriber_ccr,USD_ccr:c?c.USD_ccr:o.USD_ccr,difference:c?c.difference_amount:"",note:c?c.note:"",formType:c&&c.id?"edit":"add"},validationSchema:Ve,onSubmit:(e,t)=>{let{resetForm:i}=t;(0,v.fu)(e).then((e=>{e.data&&1===e.data.status?(r&&r(),i(),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))}}),Z=()=>{const e=u.values.remainingAmount,t=We.companyAmount,i=We.tds;let n=0;n=Number(t)+Number(i);const a=n-Number(e);u.setFieldValue("companyCurrencyAmount",t),u.setFieldValue("tds",i),u.setFieldValue("difference",a.toFixed(2))};return(0,O.jsx)("form",{id:i,onSubmit:u.handleSubmit,children:(0,O.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsx)(z.Z,{children:(0,O.jsxs)(M.Z,{size:"small",sx:{[`& .${we.Z.root}`]:{borderBottom:"none"}},children:[(0,O.jsx)(w.Z,{children:(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:"Title"}),(0,O.jsx)(W.Z,{align:"right",children:"In Invoice Currency"}),(0,O.jsx)(W.Z,{align:"right",children:"In Company Currency"})]})}),(0,O.jsxs)(B.Z,{children:[(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:"Currency Rate"}),(0,O.jsx)(W.Z,{align:"right",children:o.invoice_ccr}),(0,O.jsx)(W.Z,{align:"right",children:o.company_ccr})]}),(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:"Net Amount"}),(0,O.jsx)(W.Z,{align:"right",children:d.net_amount_invoice}),(0,O.jsx)(W.Z,{align:"right",children:d.net_amount_company})]}),(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:"Tax"}),(0,O.jsx)(W.Z,{align:"right",children:d.tax_invoice}),(0,O.jsx)(W.Z,{align:"right",children:d.tax_company})]}),(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:"Total Amount"}),(0,O.jsx)(W.Z,{align:"right",children:d.total_amount_invoice}),(0,O.jsx)(W.Z,{align:"right",children:d.total_amount_company})]}),(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{variant:"subtitle1",children:"Remaining Amount"})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{variant:"subtitle1",children:d.remaining_amount_invoice})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{variant:"subtitle1",children:d.remaining_amount_company})})]})]})]})})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:u.touched.invoice_status&&Boolean(u.errors.invoice_status),children:[(0,O.jsx)(S.Z,{id:"itemTypeLabel",children:"Invoice Status"}),(0,O.jsx)(F.Z,{fullWidth:!0,labelId:"itemTypeLabel",id:"invoice_status",name:"invoice_status",label:"Invoice Status",value:u.values.invoice_status,onChange:e=>{u.handleChange(e),(e=>{"Bad Debt"===e.target.value?(u.setFieldValue("ref_no","Bad Debt"),u.setFieldValue("payment_date",d.invoice_date),u.setFieldValue("invoiceCurrencyAmount",0),u.setFieldValue("companyCurrencyAmount",0),u.setFieldValue("tds",0),u.setFieldValue("difference",0),u.setFieldValue("note","Bad Debt Invoice")):"Bad Debt"===u.values.ref_no&&(u.setFieldValue("ref_no",""),u.setFieldValue("note",""),u.setFieldValue("payment_date",null))})(e)},children:d&&d.invoice_status.map(((e,t)=>(0,O.jsx)(h.Z,{value:e,children:e},t)))}),(0,O.jsx)(Y.Z,{children:u.touched.invoice_status&&u.errors.invoice_status})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",id:"ref_no",name:"ref_no",disabled:"Bad Debt"==u.values.invoice_status,label:(0,O.jsx)(E.Z,{title:"Reference No."}),value:u.values.ref_no,onChange:u.handleChange,error:u.touched.ref_no&&Boolean(u.errors.ref_no),helperText:u.touched.ref_no&&u.errors.ref_no})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(_._,{dateAdapter:j.Z,children:(0,O.jsx)(x.$,{id:"payment_date",name:"payment_date",label:(0,O.jsx)(E.Z,{title:"Payment Date"}),inputFormat:"YYYY-MM-DD",value:u.values.payment_date,maxDate:g()(),onChange:e=>{u.setFieldValue("payment_date",g()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",...e,error:u.touched.payment_date&&Boolean(u.errors.payment_date),helperText:u.touched.payment_date&&u.errors.payment_date})})})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,type:"number",size:"small",id:"invoiceCurrencyAmount",name:"invoiceCurrencyAmount",label:(0,O.jsx)(E.Z,{title:d.filed_labels.invoice_amount}),value:u.values.invoiceCurrencyAmount,onChange:u.handleChange,error:u.touched.invoiceCurrencyAmount&&Boolean(u.errors.invoiceCurrencyAmount),helperText:u.touched.invoiceCurrencyAmount&&u.errors.invoiceCurrencyAmount})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",type:"number",id:"companyCurrencyAmount",name:"companyCurrencyAmount",label:(0,O.jsx)(E.Z,{title:d.filed_labels.company_amount}),value:u.values.companyCurrencyAmount,onChange:e=>{We.companyAmount=e.target.value,Z()},error:u.touched.companyCurrencyAmount&&Boolean(u.errors.companyCurrencyAmount),helperText:u.touched.companyCurrencyAmount&&u.errors.companyCurrencyAmount})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",type:"number",id:"tds",name:"tds",label:(0,O.jsx)(E.Z,{title:"TDS"}),value:u.values.tds,onChange:e=>{We.tds=e.target.value,Z()},error:u.touched.tds&&Boolean(u.errors.tds),helperText:u.touched.tds&&u.errors.tds})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",type:"number",id:"ccr",name:"ccr",label:(0,O.jsx)(E.Z,{title:d.filed_labels.company_ccr}),value:u.values.ccr,onChange:u.handleChange,error:u.touched.ccr&&Boolean(u.errors.ccr),helperText:u.touched.ccr&&u.errors.ccr})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",type:"number",id:"difference",name:"difference",label:(0,O.jsx)(E.Z,{title:"Difference"}),value:u.values.difference,onChange:u.handleChange,error:u.touched.difference&&Boolean(u.errors.difference),helperText:u.touched.difference&&u.errors.difference})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",type:"number",id:"subscriber_ccr",name:"subscriber_ccr",label:(0,O.jsx)(E.Z,{title:d.filed_labels.sub_ccr}),value:u.values.subscriber_ccr,onChange:u.handleChange,error:u.touched.subscriber_ccr&&Boolean(u.errors.subscriber_ccr),helperText:u.touched.subscriber_ccr&&u.errors.subscriber_ccr})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",type:"number",id:"USD_ccr",name:"USD_ccr",label:(0,O.jsx)(E.Z,{title:"USD ccr"}),value:u.values.USD_ccr,onChange:u.handleChange,error:u.touched.USD_ccr&&Boolean(u.errors.USD_ccr),helperText:u.touched.USD_ccr&&u.errors.USD_ccr})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsxs)(A.Z,{size:"small",fullWidth:!0,error:u.touched.way_of_payment&&Boolean(u.errors.way_of_payment),children:[(0,O.jsx)(S.Z,{id:"itemTypeLabel",children:(0,O.jsx)(E.Z,{title:"Way of Payment"})}),(0,O.jsx)(F.Z,{fullWidth:!0,labelId:"itemTypeLabel",id:"way_of_payment",name:"way_of_payment",label:(0,O.jsx)(E.Z,{title:"Way of Payment"}),value:u.values.way_of_payment,onChange:u.handleChange,children:d&&d.way_of_payment.map(((e,t)=>(0,O.jsx)(h.Z,{value:e.id,children:e.payment_source_name},t)))}),(0,O.jsx)(Y.Z,{children:u.touched.way_of_payment&&u.errors.way_of_payment})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,O.jsx)(m.Z,{fullWidth:!0,multiline:!0,size:"small",id:"note",name:"note",rows:5,label:"Note",value:u.values.note,onChange:u.handleChange,error:u.touched.note&&Boolean(u.errors.note),helperText:u.touched.note&&u.errors.note})})]})})]})})},qe=i(38820);const Re={invoice_id:"",search:"",displayLength:10,displayStart:0,orderDir:"ASC",orderColumn:0};let Ee=0;var Ne=e=>{let{search:t,invoiceID:i,callApi:n}=e;const[a,r]=(0,b.useState)([]),[s,l]=(0,b.useState)(0),[d,o]=(0,b.useState)(10),[c,u]=(0,b.useState)("asc"),[m,h]=(0,b.useState)("0"),[_,x]=(0,b.useState)(!1),[j,Z]=(0,b.useState)(!1),[p,y]=(0,b.useState)({}),[g,f]=(0,b.useState)({}),C=()=>{(0,v.tN)(Re).then((e=>{Ee=e.data.data.totalCount,r(e.data.data.data)})).catch((e=>{(0,I.c$)(e)}))};(0,b.useEffect)((()=>{var e;Re.invoice_id=i,Re.search=t,Re.displayLength=d,Re.displayStart=d*s,Re.orderDir=null!==(e=null===c||void 0===c?void 0:c.toUpperCase())&&void 0!==e?e:Re.orderDir,Re.orderColumn=Number(m),C()}),[s,d,c,m,t,n]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(z.Z,{children:(0,O.jsxs)(M.Z,{children:[(0,O.jsx)(w.Z,{children:(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:"Ref No."}),(0,O.jsx)(W.Z,{children:"Payment Date"}),(0,O.jsx)(W.Z,{align:"right",children:"Amount"}),(0,O.jsx)(W.Z,{align:"right",children:"TDS"}),(0,O.jsx)(W.Z,{children:"Way Of Payment"}),(0,O.jsx)(W.Z,{children:"Status"}),(0,O.jsx)(W.Z,{align:"right",children:"Action"})]})}),(0,O.jsx)(B.Z,{children:a.map(((e,t)=>(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:e.reference_no}),(0,O.jsx)(W.Z,{children:e.payment_date}),(0,O.jsx)(W.Z,{align:"right",children:e.company_currency_amount}),(0,O.jsx)(W.Z,{align:"right",children:e.tds}),(0,O.jsx)(W.Z,{children:e.payment_source_name}),(0,O.jsx)(W.Z,{children:e.status}),(0,O.jsxs)(W.Z,{align:"right",children:[(0,O.jsx)(q.Z,{color:"primary",component:"label",onClick:()=>{return t=e,void(0,v.rw)({id:t.id,type:"edit",invoice_id:i}).then((e=>{y(e.data.data.paymentData),f(e.data.data.invoiceData),x((e=>!e))})).catch((e=>{(0,I.c$)(e)}));var t},children:(0,O.jsx)(qe.Z,{fontSize:"small"})}),(0,O.jsx)(q.Z,{color:"error",component:"label",onClick:()=>(y(e),void Z(!0)),children:(0,O.jsx)(ee.Z,{fontSize:"small"})})]})]},t)))})]})}),(0,O.jsx)(ke.Z,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Number(Ee),rowsPerPage:d,page:s,onPageChange:(e,t)=>{l(t)},onRowsPerPageChange:e=>{o(parseInt(e.target.value,10)),l(0)}}),_&&(0,O.jsx)(G.Z,{title:"Edit Invoice Payment",open:_,onClose:()=>x((e=>!e)),id:"editPayment",children:(0,O.jsx)(Be,{value:p,formId:"editPayment",invoiceData:g,onSubmit:()=>{x((e=>!e)),C()}})}),j&&(0,O.jsx)(ze.Z,{onDeleteHandler:()=>{(0,v.A1)({id:p.id}).then((e=>{e.data&&1===e.data.status?(l(0),C(),Z(!1),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))},onClose:()=>Z(!1),open:j,dept:"invoice Payment",name:p.reference_no})]})};var $e=e=>{let{invoiceID:t}=e;const[i,n]=(0,b.useState)(""),[r,l]=(0,b.useState)(!1),[d,m]=(0,b.useState)(!1),[h,_]=(0,b.useState)({}),[x,j]=(0,b.useState)({});return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(C.Z,{title:(0,O.jsx)(s.ZP,{container:!0,alignItems:"center",spacing:f.dv,sx:{mb:-1,mt:-4},children:(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:f.dv,children:[(0,O.jsx)(s.ZP,{item:!0,sx:{flexGrow:1}}),(0,O.jsx)(s.ZP,{item:!0,children:(0,O.jsxs)(o.Z,{variant:"contained",onClick:()=>{(0,v.rw)({type:"add",invoice_id:t}).then((e=>{_(e.data.data.invoiceData),j(e.data.data.currency_rate),l((e=>!e))})).catch((e=>{(0,I.c$)(e)}))},children:[(0,O.jsx)(a.Z,{sx:{mr:.5}})," Add Payment"]})}),(0,O.jsx)(s.ZP,{item:!0,children:(0,O.jsx)(c.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,O.jsx)(u.Z,{position:"start",children:(0,O.jsx)(Z.jVj,{stroke:1.5,size:"1rem"})}),size:"small",onChange:e=>{n(e.target.value)},autoComplete:"off"})})]})})}),content:!0,children:(0,O.jsx)(Ne,{search:i,invoiceID:t,callApi:d})}),r&&(0,O.jsx)(G.Z,{title:"Add Invoice Payment",open:r,onClose:()=>l((e=>!e)),id:"addPayment",sx:{"&>div:nth-of-type(3)":{"&>div":{minWidth:{md:"40%",xs:"90%"}}}},children:(0,O.jsx)(Be,{formId:"addPayment",invoiceData:h,currencyRateData:x,onSubmit:()=>{l((e=>!e)),m((e=>!e))}})})]})},Oe=(0,J.Z)((0,O.jsx)("path",{d:"M13 5v6h1.17L12 13.17 9.83 11H11V5h2m2-2H9v6H5l7 7 7-7h-4V3zm4 15H5v2h14v-2z"}),"GetAppOutlined"),Ue=i(22791),He=i(21093);const Xe={invoice_id:0};var Ge=e=>{let{invoiceID:t}=e;const{checkRestriction:i}=(0,p.Z)(),[n,r]=(0,b.useState)([]),[l,d]=(0,b.useState)([]),[c,u]=(0,b.useState)(!1),[m,h]=(0,b.useState)(!1),_=()=>{(0,v.dh)(Xe).then((e=>{r(e.data.data)})).catch((e=>{(0,I.c$)(e)}))};(0,b.useEffect)((()=>{Xe.invoice_id=t,_()}),[m]);return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(C.Z,{title:(0,O.jsx)(s.ZP,{container:!0,alignItems:"center",spacing:f.dv,sx:{mb:-1,mt:-4},children:(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:f.dv,children:[(0,O.jsx)(s.ZP,{item:!0,sx:{flexGrow:1}}),(0,O.jsx)(s.ZP,{item:!0,children:i("CAN_DOWNLOAD_INVOICE_ALL_ATTACHMENT")&&n.length>1&&(0,O.jsx)(pe.Z,{title:"Download All Invoice Attachments",arrow:!0,children:(0,O.jsx)(q.Z,{color:"primary",component:"label",onClick:()=>{(0,v.mQ)({invoice_id:t}).then((e=>{const t=document.createElement("a");t.href=e.data.data.zip,t.download=e.data.data.file_name,t.click()})).catch((e=>{console.log(e)}))},children:(0,O.jsx)(Oe,{fontSize:"small"})})})}),(0,O.jsx)(s.ZP,{item:!0,children:(0,O.jsxs)(o.Z,{variant:"contained",onClick:()=>u((e=>!e)),children:[(0,O.jsx)(a.Z,{sx:{mr:.5}})," Add Attachment"]})})]})})}),content:!0,children:(0,O.jsx)(z.Z,{children:(0,O.jsxs)(M.Z,{size:"small",children:[(0,O.jsx)(w.Z,{children:(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{sx:{width:"40%"},children:"File Name"}),(0,O.jsx)(W.Z,{sx:{width:"40%"},children:"Document Type"}),(0,O.jsx)(W.Z,{align:"right",sx:{width:"20%"},children:"Action"})]})}),(0,O.jsx)(B.Z,{children:n.map(((e,t)=>(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:e.file_name}),(0,O.jsx)(W.Z,{children:e.doc_type_name}),(0,O.jsxs)(W.Z,{align:"right",children:[i("CAN_DOWNLOAD_INVOICE_ATTACHMENT")&&(0,O.jsx)(q.Z,{color:"secondary",component:"label",onClick:()=>(e=>{const t=document.createElement("a");t.href=e.base64_document,t.download=e.document,t.click()})(e),children:(0,O.jsx)(Ue.Z,{fontSize:"small"})}),i("CAN_DELETE_INVOICE_ATTACHMENT")&&(0,O.jsx)(q.Z,{color:"error",component:"label",onClick:()=>{return t=e,void(0,v.Vp)({id:t.id}).then((e=>{e.data&&1===e.data.status?(_(),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}));var t},children:(0,O.jsx)(ee.Z,{fontSize:"small"})})]})]},t)))})]})})}),c&&(0,O.jsx)(G.Z,{title:"Add Attachment",open:c,onClose:()=>u((e=>!e)),id:"addAttachment",children:(0,O.jsx)(He.Z,{attNo:n.length,formID:"addAttachment",onSubmit:()=>{u((e=>!e)),h((e=>!e))},invoiceID:t,initList:l})})]})},Je=(0,J.Z)([(0,O.jsx)("path",{d:"M18 2h-8L4 8v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 2v16H6V8.83L10.83 4H18z"},"0"),(0,O.jsx)("path",{d:"m16 13-4 4-4-4 1.41-1.41L11 13.17V9.02L13 9v4.17l1.59-1.59L16 13z"},"1")],"SimCardDownloadOutlined"),Qe=i(68610),Ke=i(9585),et=i(39504),tt=i(30418);function it(e){let{open:t,title:i,itemList:n}=e;const a=(0,tt.Z)(),[r,s]=(0,b.useState)(null);(0,b.useEffect)((()=>{s(r?null:t)}),[t]);const d=Boolean(r),o=d?"simple-popper":void 0;return(0,O.jsx)("div",{children:(0,O.jsx)(Qe.Z,{id:o,open:d,anchorEl:r,children:(0,O.jsxs)(ue.Z,{variant:"outlined",children:[(0,O.jsx)(Ke.Z,{title:(0,O.jsx)(l.Z,{sx:{color:"#FFFFFF"},children:i}),sx:{padding:"15px",backgroundColor:a.palette.primary[800]}}),(0,O.jsx)(et.Z,{sx:{padding:"10px"},children:n.map(((e,t)=>(0,O.jsx)(l.Z,{variant:"subtitle1",children:n[t]},t)))})]})})})}const nt={search:"",displayLength:10,displayStart:0,orderDir:"ASC",orderColumn:0,client_id:"0",invoice_amount:"0",status:"0",is_due:!1,from_date:null,to_date:null};let at=0;var rt=e=>{let{search:t,callApi:i,initData:n,filter:a,setIsLoading:r,setWidgets:s}=e;const{checkRestriction:d,recall:o}=(0,p.Z)(),[c,u]=(0,b.useState)([]),[m,h]=(0,b.useState)(0),[_,x]=(0,b.useState)(10),[j,Z]=(0,b.useState)("desc"),[y,f]=(0,b.useState)("0"),[C,D]=(0,b.useState)(!1),[T,A]=(0,b.useState)(!1),[S,F]=(0,b.useState)(!1),[Y,k]=(0,b.useState)(!1),[w,R]=(0,b.useState)({}),[E,N]=(0,b.useState)({}),[$,U]=(0,b.useState)({}),[H,X]=(0,b.useState)(!1),[J,Q]=(0,b.useState)(!1),[te,ie]=(0,b.useState)(!1),[ae,re]=(0,b.useState)(null),[se,le]=(0,b.useState)(null),[de,oe]=(0,b.useState)({}),ce=()=>{(0,v.p3)(nt).then((e=>{at=e.data.data.totalCount,u(e.data.data.data),s(e.data.data.widgets),U(e.data.data.footerTotal),r(!1)})).catch((e=>{(0,I.c$)(e)}))};(0,b.useEffect)((()=>{var e;nt.search=t,nt.displayLength=_,nt.displayStart=_*m,nt.orderDir=null!==(e=null===j||void 0===j?void 0:j.toUpperCase())&&void 0!==e?e:nt.orderDir,nt.orderColumn=Number(y),nt.client_id=a.filterClientID,nt.status=a.filterStatus,nt.from_date=a.filterFromDate,nt.to_date=a.filterToDate,ce()}),[m,_,j,y,t,i,o]);const ue=e=>{switch(e){case"Due":return"warning";case"Partial":return"primary";case"Paid":return"secondary";case"Bad Debt":return"error";default:return"default"}};return(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(z.Z,{children:(0,O.jsxs)(M.Z,{children:[(0,O.jsx)(st,{order:j,orderBy:y,onRequestSort:e=>{Z(y===e&&"asc"===j?"desc":"asc"),f(e)}}),(0,O.jsx)(B.Z,{children:c.map(((e,t)=>(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:d("CAN_VIEW_INVOICE")?(0,O.jsx)(L.Z,{underline:"none",sx:{cursor:"pointer"},onClick:()=>{return t=e,void(0,v.fD)({type:"view",id:t.id}).then((e=>{F((e=>!e)),R(e.data.data)})).catch((e=>{(0,I.c$)(e)}));var t},children:e.invoice_no}):e.invoice_no}),(0,O.jsxs)(W.Z,{children:[e.client_company,(0,O.jsx)(l.Z,{variant:"subtitle2",children:e.client_name})]}),(0,O.jsx)(W.Z,{children:e.invoice_date}),(0,O.jsxs)(W.Z,{align:"right",children:[e.subtotal,e.is_discount&&(0,O.jsxs)(l.Z,{variant:"subtitle2",children:["Discount - ",e.total_discount]})]}),(0,O.jsx)(W.Z,{align:"right",children:e.total_tax_amount}),(0,O.jsx)(W.Z,{align:"right",children:e.currency_conversion_rate}),(0,O.jsx)(W.Z,{align:"right",children:e.company_currency_total_amount}),(0,O.jsx)(W.Z,{align:"right",children:e.company_currency_amount_received}),(0,O.jsx)(W.Z,{children:e.is_bifurcated}),(0,O.jsx)(W.Z,{children:(0,O.jsx)(ve.Z,{color:ue(e.invoice_status),label:e.invoice_status,onClick:()=>{return R(t=e),void(t.has_payment?k((e=>!e)):(0,v.rw)({type:"add",invoice_id:t.id}).then((e=>{N(e.data.data.invoiceData),oe(e.data.data.currency_rate),ie((e=>!e))})).catch((e=>{(0,I.c$)(e)})));var t},onMouseEnter:t=>{e.has_payment&&re(t.currentTarget),e.has_payment&&R(e)},onMouseLeave:()=>re(null)})}),(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{onClick:()=>{return R(t=e),void(t.has_attachment?Q((e=>!e)):X((e=>!e)));var t},sx:{cursor:"pointer"},onMouseEnter:t=>{e.has_attachment&&le(t.currentTarget),e.has_attachment&&R(e)},onMouseLeave:()=>le(null),children:null!==e.last_attachment_date?g()(e.last_attachment_date).format("YYYY-MM-DD"):"-"})}),(0,O.jsxs)(W.Z,{align:"right",children:[d("CAN_EDIT_INVOICE")&&(0,O.jsx)(pe.Z,{title:"Edit",arrow:!0,children:(0,O.jsx)(q.Z,{color:"primary",component:"label",onClick:()=>{return t=e,void(0,v.fD)({type:"edit",id:t.id}).then((e=>{D((e=>!e)),R(e.data.data)})).catch((e=>{(0,I.c$)(e)}));var t},children:(0,O.jsx)(qe.Z,{fontSize:"small"})})}),(0,O.jsx)(pe.Z,{title:"Duplicate",arrow:!0,children:(0,O.jsx)(q.Z,{color:"secondary",component:"label",onClick:()=>(e=>{const t={id:e};(0,v.g2)(t).then((e=>{e.data&&1===e.data.status?(ce(),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))})(e.id),children:(0,O.jsx)(K,{fontSize:"small"})})}),d("CAN_DELETE_INVOICE")&&(0,O.jsx)(pe.Z,{title:"Delete",arrow:!0,children:(0,O.jsx)(q.Z,{color:"error",component:"label",onClick:()=>{return t=e,A(!0),void R(t);var t},children:(0,O.jsx)(ee.Z,{fontSize:"small"})})}),d("CAN_DOWNLOAD_INVOICE")&&(0,O.jsx)(pe.Z,{title:"Download Invoice",arrow:!0,children:(0,O.jsx)(q.Z,{color:"primary",component:"label",onClick:()=>{return t=e,void(0,v.X$)({invoice_id:t.id}).then((e=>{const t=document.createElement("a");t.href=e.data.data.invoice,t.download=e.data.data.invoice_name,t.click()})).catch((e=>{console.error(e)}));var t},children:(0,O.jsx)(Je,{fontSize:"small"})})})]})]},t)))}),(0,O.jsx)(Ye,{children:(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{children:"Invoice Number"})}),(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{children:"Client"})}),(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{children:"Date"})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{children:"Amount"})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{children:"Total Tax"})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{children:"CCR"})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{children:null!==$&&void 0!==$&&$.total?(0,O.jsx)("b",{children:$.total}):"Total"})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{children:null!==$&&void 0!==$&&$.received_amount?(0,O.jsx)("b",{children:$.received_amount}):"Received Amount"})}),(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{children:"Is Bifurcated?"})}),(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{children:"Status"})}),(0,O.jsx)(W.Z,{children:(0,O.jsx)(l.Z,{children:"Updated At"})}),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(l.Z,{children:"Action"})})]})})]})}),(0,O.jsx)(ke.Z,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Number(at),rowsPerPage:_,page:m,onPageChange:(e,t)=>{h(t)},onRowsPerPageChange:e=>{x(parseInt(e.target.value,10)),h(0)}}),ae&&(0,O.jsx)(it,{open:ae,title:"Invoice Payments",itemList:w.payment_list}),se&&(0,O.jsx)(it,{open:se,title:"Attachments",itemList:w.attached_list}),S&&(0,O.jsx)(P.Z,{open:S,title:`View - ${w.invoice.invoice_no}`,onClose:()=>{F((e=>!e)),ce()},saveButton:!0,sx:{"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"70%",xs:"100%"},minHeight:"100%"}}},children:(0,O.jsx)(Me.Z,{invoiceData:w})}),C&&(0,O.jsx)(P.Z,{open:C,title:`Edit Invoice - ${w.invoice.invoice_no}`,onClose:()=>D((e=>!e)),id:"editInvoice",sx:{"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"70%",xs:"100%"},minHeight:"100%"}}},children:(0,O.jsx)(ne,{value:w,formId:"editInvoice",onSubmit:()=>{D((e=>!e)),ce()}})}),T&&(0,O.jsx)(ze.Z,{onDeleteHandler:()=>{(0,v.nY)({id:w.id}).then((e=>{e.data&&1===e.data.status?(h(0),ce(),A(!1),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))},onClose:()=>A(!1),open:T,dept:"invoice",name:w.invoice_no}),Y&&(0,O.jsx)(G.Z,{title:`Invoice Payment List - ${w.invoice_no}`,open:Y,onClose:()=>{k((e=>!e)),ce()},id:"addAttachment",saveButton:!0,sx:{"&>div:nth-of-type(3)":{"&>div":{minWidth:{md:"70%",xs:"90%"}}}},children:(0,O.jsx)($e,{formID:"addAttachment",invoiceID:w.id})}),H&&(0,O.jsx)(G.Z,{title:`Add Attachment - ${w.invoice_no}`,open:H,onClose:()=>X((e=>!e)),id:"addAttachment",children:(0,O.jsx)(He.Z,{attNo:0,formID:"addAttachment",onSubmit:()=>{X((e=>!e)),ce()},invoiceID:w.id})}),J&&(0,O.jsx)(G.Z,{title:`Invoice Attachment List - ${w.invoice_no}`,open:J,onClose:()=>{Q((e=>!e)),ce()},saveButton:!0,sx:{"&>div:nth-of-type(3)":{"&>div":{minWidth:{md:"50%",xs:"90%"}}}},children:(0,O.jsx)(Ge,{invoiceID:w.id})}),te&&(0,O.jsx)(G.Z,{title:`Add Invoice Payment - ${w.invoice_no}`,open:te,onClose:()=>ie((e=>!e)),id:"addPayment",sx:{"&>div:nth-of-type(3)":{"&>div":{minWidth:{md:"40%",xs:"90%"}}}},children:(0,O.jsx)(Be,{formId:"addPayment",invoiceData:E,currencyRateData:de,onSubmit:()=>{ie((e=>!e)),ce()}})})]})};function st(e){let{order:t,orderBy:i,onRequestSort:n}=e;const a=e=>()=>{n(e)};return(0,O.jsx)(w.Z,{children:(0,O.jsxs)(V.Z,{children:[(0,O.jsx)(W.Z,{children:(0,O.jsx)(Le.Z,{active:"0"===i,direction:"0"===i?t:"asc",onClick:a("0"),children:"Invoice Number"})},"invoice_number"),(0,O.jsx)(W.Z,{children:(0,O.jsx)(Le.Z,{active:"1"===i,direction:"1"===i?t:"asc",onClick:a("1"),children:"Client"})},"Client"),(0,O.jsx)(W.Z,{children:(0,O.jsx)(Le.Z,{active:"2"===i,direction:"2"===i?t:"asc",onClick:a("2"),children:"Date"})},"date"),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(Le.Z,{active:"3"===i,direction:"3"===i?t:"asc",onClick:a("3"),children:"Amount"})},"amount"),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(Le.Z,{active:"4"===i,direction:"4"===i?t:"asc",onClick:a("4"),children:"Total Tax"})},"total_tax"),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(Le.Z,{active:"5"===i,direction:"5"===i?t:"asc",onClick:a("5"),children:"CCR"})},"ccr"),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(Le.Z,{active:"6"===i,direction:"6"===i?t:"asc",onClick:a("6"),children:"Total"})},"total"),(0,O.jsx)(W.Z,{align:"right",children:(0,O.jsx)(Le.Z,{active:"7"===i,direction:"7"===i?t:"asc",onClick:a("7"),children:"Received Amount"})},"received_amount"),(0,O.jsx)(W.Z,{children:(0,O.jsx)(Le.Z,{active:"8"===i,direction:"8"===i?t:"asc",onClick:a("8"),children:"Is Bifurcated?"})},"is_bifurcated"),(0,O.jsx)(W.Z,{children:(0,O.jsx)(Le.Z,{active:"9"===i,direction:"9"===i?t:"asc",onClick:a("9"),children:"Status"})},"status"),(0,O.jsx)(W.Z,{children:(0,O.jsx)(Le.Z,{active:"10"===i,direction:"10"===i?t:"asc",onClick:a("10"),children:"Updated At"})},"updated_at"),(0,O.jsx)(W.Z,{align:"right",children:"Action"},"action")]})})}const lt={filterFromDate:null,filterToDate:null,filterClientID:"0",filterInvoiceAmount:"0",filterStatus:"0"};var dt=()=>{const e=(0,r.Z)(),{checkRestriction:t,checkCompany:i,company:y,recall:T}=(0,p.Z)(),[A,S]=(0,b.useState)({}),[F,Y]=(0,b.useState)({}),[k,L]=(0,b.useState)(""),[z,M]=(0,b.useState)(!1),[w,V]=(0,b.useState)(lt),[W,B]=(0,b.useState)(!1),[q,R]=(0,b.useState)(!1),[E,N]=(0,b.useState)(!0),[$,U]=(0,b.useState)({}),[,H]=(0,b.useTransition)(),X=(e,t)=>{if("reset"!==e){const i=t;V({...w,[e]:i})}else V({...lt});R((e=>!e))};return(0,b.useEffect)((()=>{(0,v.fD)().then((e=>{S(e.data.data)})).catch((e=>console.log(e)))}),[T]),(0,O.jsxs)(O.Fragment,{children:[(0,O.jsxs)(s.ZP,{container:!0,spacing:f.dv,children:[(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,spacing:f.dv,children:[(0,O.jsx)(s.ZP,{item:!0,sm:6,xs:12,md:6,lg:4,children:(0,O.jsx)(xe,{isLoading:E,title:"Total Invoices",count:null===$||void 0===$?void 0:$.TotalInvoiceCount,amount:null===$||void 0===$?void 0:$.TotalInvoiceAmount,handleFilter:X,status:"0"})}),(0,O.jsx)(s.ZP,{item:!0,sm:6,xs:12,md:6,lg:4,children:(0,O.jsx)(Ze,{isLoading:E,title:"Partial Paid Invoices",count:null===$||void 0===$?void 0:$.TotalPartialCount,amount:null===$||void 0===$?void 0:$.TotalPartialAmount,handleFilter:X,status:"Partial"})}),(0,O.jsx)(s.ZP,{item:!0,sm:6,xs:12,md:6,lg:4,children:(0,O.jsx)(xe,{isLoading:E,title:"Over Due Invoices",count:null===$||void 0===$?void 0:$.TotalOverDueCount,amount:null===$||void 0===$?void 0:$.TotalOverDueAmount,handleFilter:X,status:"Over Due"})}),(0,O.jsx)(s.ZP,{item:!0,sm:6,xs:12,md:6,lg:4,children:(0,O.jsx)(Ze,{isLoading:E,title:"Unpaid Invoices",count:null===$||void 0===$?void 0:$.TotalUnPaidCount,amount:null===$||void 0===$?void 0:$.TotalUnPaidAmount,handleFilter:X,status:"Unpaid"})}),(0,O.jsx)(s.ZP,{item:!0,sm:6,xs:12,md:6,lg:4,children:(0,O.jsx)(xe,{isLoading:E,title:"Paid Invoices",count:null===$||void 0===$?void 0:$.TotalPaidCount,amount:null===$||void 0===$?void 0:$.TotalPaidAmount,handleFilter:X,status:"Paid"})}),(0,O.jsx)(s.ZP,{item:!0,sm:6,xs:12,md:6,lg:4,children:(0,O.jsx)(Ze,{isLoading:E,title:"Bad Debt",count:null===$||void 0===$?void 0:$.TotalBadDeptCount,amount:null===$||void 0===$?void 0:$.TotalBadDeptAmount,handleFilter:X,status:"Bad Debt"})})]})}),(0,O.jsx)(s.ZP,{item:!0,xs:12})]}),(0,O.jsxs)(C.Z,{title:(0,O.jsx)(s.ZP,{container:!0,alignItems:"center",spacing:f.dv,sx:{mb:-1,mt:-4},children:(0,O.jsx)(s.ZP,{item:!0,xs:12,children:(0,O.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:f.dv,children:[(0,O.jsx)(s.ZP,{item:!0,sx:{flexGrow:1},children:(0,O.jsx)(l.Z,{variant:"column",children:"Invoice List"})}),(0,O.jsx)(s.ZP,{item:!0,children:(0,O.jsxs)(d.Z,{disableRipple:!0,onClick:()=>{M((e=>!e))},children:[JSON.stringify(w)!==JSON.stringify(lt)?(0,O.jsx)(n.Z,{sx:{fontWeight:500,color:"secondary.dark"}}):(0,O.jsx)(n.Z,{sx:{fontWeight:500,color:"secondary.200"}}),(0,O.jsx)(l.Z,{variant:"h5",sx:{mt:.5},children:"Filter"})]})}),t("CAN_ADD_INVOICE")&&(0,O.jsx)(s.ZP,{item:!0,children:(0,O.jsxs)(o.Z,{variant:"contained",onClick:()=>{"0"!==y.company_id?(0,v.fD)({type:"add"}).then((e=>{e.data&&1===e.data.status?(Y(e.data.data),B((e=>!e))):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)})):i()},children:[(0,O.jsx)(a.Z,{sx:{mr:.5}})," Add Invoice"]})}),(0,O.jsx)(s.ZP,{item:!0,children:(0,O.jsx)(c.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,O.jsx)(u.Z,{position:"start",children:(0,O.jsx)(Z.jVj,{stroke:1.5,size:"1rem"})}),size:"small",onChange:e=>{H((()=>L(e.target.value)))},autoComplete:"off"})})]})})}),content:!0,children:[z?(0,O.jsx)(D.Z,{type:"grow",in:z,position:"top-left",direction:"up",children:(0,O.jsx)(C.Z,{content:!1,sx:{padding:"20px",background:"dark"===e.palette.mode?e.palette.dark.main:e.palette.primary.light},children:(0,O.jsxs)(s.ZP,{container:!0,spacing:f.dv,children:[(0,O.jsx)(s.ZP,{item:!0,md:3,xs:12,children:(0,O.jsx)(_._,{dateAdapter:j.Z,localeText:{start:"Start Date",end:"From Date"},children:(0,O.jsx)(x.$,{id:"from_date",name:"from_date",label:"From date",maxDate:g()(),inputFormat:"YYYY-MM-DD",value:w.filterFromDate,onChange:e=>{X("filterFromDate",g()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",...e})})})}),(0,O.jsx)(s.ZP,{item:!0,md:3,xs:12,children:(0,O.jsx)(_._,{dateAdapter:j.Z,localeText:{start:"Start Date",end:"From Date"},children:(0,O.jsx)(x.$,{id:"to_date",name:"to_date",label:"To date",inputFormat:"YYYY-MM-DD",minDate:g()(w.filterFromDate),value:w.filterToDate,onChange:e=>{X("filterToDate",g()(e).format("YYYY-MM-DD"))},disabled:!w.filterFromDate,required:!0,renderInput:e=>(0,O.jsx)(m.Z,{fullWidth:!0,size:"small",...e})})})}),(0,O.jsx)(s.ZP,{item:!0,md:3,xs:12,children:(0,O.jsxs)(m.Z,{size:"small",label:"Client",fullWidth:!0,id:"filterClientID",select:!0,value:w.filterClientID,onChange:e=>X("filterClientID",e.target.value),children:[(0,O.jsx)(h.Z,{value:"0",children:"All"},-1),null===A||void 0===A?void 0:A.clientList.map(((e,t)=>(0,O.jsxs)(h.Z,{value:e.id,children:[e.client_name," - ",e.company_name]},t)))]})}),(0,O.jsx)(s.ZP,{item:!0,md:3,xs:12,children:(0,O.jsxs)(m.Z,{size:"small",label:"Status",fullWidth:!0,id:"filterStatus",select:!0,value:w.filterStatus,onChange:e=>X("filterStatus",e.target.value),children:[(0,O.jsx)(h.Z,{value:"0",children:"All"},-1),null===A||void 0===A?void 0:A.paymentStatus.map(((e,t)=>(0,O.jsx)(h.Z,{value:e,children:e},t)))]})}),JSON.stringify(w)!==JSON.stringify(lt)?(0,O.jsx)(s.ZP,{item:!0,children:(0,O.jsx)(o.Z,{variant:"outlined",color:"primary",onClick:()=>X("reset",void 0),children:"Clear All"})}):null]})})}):null,(0,O.jsx)(rt,{search:k,callApi:q,initData:A,filter:w,setIsLoading:N,setWidgets:U})]}),W&&(0,O.jsx)(P.Z,{open:W,title:"Add Invoice",onClose:()=>B((e=>!e)),id:"addInvoice",sx:{"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"70%",xs:"100%"},minHeight:"100%"}}},children:(0,O.jsx)(ne,{value:F,formId:"addInvoice",onSubmit:()=>{B((e=>!e)),R((e=>!e))}})})]})}},53299:function(e,t,i){var n=i(5574),a=i(65661),r=i(97123),s=i(36151),l=i(80184);t.Z=e=>{let{onDeleteHandler:t,onClose:i,open:d,dept:o,title:c,name:u}=e;const m=()=>{i()};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(n.Z,{open:d,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:[(0,l.jsxs)(a.Z,{id:"alert-dialog-title",children:["Are you sure you want to delete the",(0,l.jsxs)("strong",{children:[" ",o," ",c," ",u]}),"? Click ",(0,l.jsx)("strong",{children:"Yes, Delete"})," to proceed or ",(0,l.jsx)("strong",{children:"Cancel"})," to cancel this action."]}),(0,l.jsxs)(r.Z,{sx:{pr:2.5},children:[(0,l.jsxs)(s.Z,{variant:"contained",onClick:()=>{t()},children:["Yes, Delete"," "]}),(0,l.jsx)(s.Z,{variant:"text",color:"error",onClick:m,children:"Cancel"})]})]})})}},38820:function(e,t,i){var n=i(76189),a=i(80184);t.Z=(0,n.Z)((0,a.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},32815:function(e,t,i){var n=i(76189),a=i(80184);t.Z=(0,n.Z)((0,a.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt")},52791:function(e,t,i){const n=(0,i(23814).Z)();t.Z=n}}]);
//# sourceMappingURL=157.a7ca7e42.chunk.js.map