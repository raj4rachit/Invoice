"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[538],{62007:function(e,r,t){var i=t(80169),s=t(55931),a=t(5574),n=t(65661),l=t(20890),d=t(13400),o=t(39157),c=t(61889),u=t(97123),h=t(36151),m=t(72791),x=t(91923),p=t(52909),j=t(80184);const _=(0,m.forwardRef)(((e,r)=>(0,j.jsx)(s.Z,{direction:"left",ref:r,...e})));r.Z=e=>{let{open:r,children:t,title:s,showButton:Z,sx:f={},onClose:g,isComment:C,buttons:b,id:y,saveButton:v}=e;const[S,P]=(0,m.useState)(!1);(0,m.useEffect)((()=>{var e;P(null!==(e=r)&&void 0!==e&&e)}),[r]);const B=()=>{P((e=>!e)),r=!1,g&&g()};return(0,j.jsxs)(a.Z,{open:S,TransitionComponent:_,keepMounted:!0,onClose:B,sx:{h2:{p:"10px 24px"},"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"60%",xs:"100%"},minHeight:"100%"}},...f},children:[s&&(0,j.jsxs)(n.Z,{children:[(0,j.jsx)(l.Z,{variant:"h4",gutterBottom:!0,component:"div",children:s}),(0,j.jsx)(d.Z,{"aria-label":"close",onClick:B,sx:{position:"absolute",right:8,top:0},children:(0,j.jsx)(i.Z,{})})]}),(0,j.jsx)(o.Z,{dividers:!0,children:t}),(0,j.jsx)(c.ZP,{container:!0,alignItems:"center",spacing:x.dv,justifyContent:"flex-end",children:(0,j.jsx)(c.ZP,{item:!0,xs:12,children:(0,j.jsxs)(u.Z,{children:[!v&&(0,j.jsx)(p.Z,{children:(0,j.jsx)(h.Z,{variant:"contained",color:"primary",type:"submit",form:y,children:"Save"})}),(0,j.jsx)(h.Z,{variant:"text",color:"error",onClick:B,children:"Close"})]})})})]})}},88538:function(e,r,t){t.r(r),t.d(r,{default:function(){return ee}});var i=t(79567),s=t(61889),a=t(20890),n=t(36151),l=t(77196),d=t(63466),o=t(58956),c=t(17834),u=t(72791),h=t(91923),m=t(23735),x=t(62007),p=t(68870),j=t(48550),_=t(68096),Z=t(30829),f=t(58406),g=t(23786),C=t(47071),b=t(36571),y=t(67039),v=t(69783),S=t(88893),P=t(27475);var B=t(92506),z=t(72426),I=t.n(z),D=t(94022),q=t(19533),E=t(81724),R=t(80184);const k=["image/jpg","image/jpeg","image/png"],T=E.Ry().shape({official_name:E.Z_().required("Official name is required."),first_name:E.Z_().required("First name is required."),last_name:E.Z_().required("Last name is required."),email:E.Z_().email().required("Email is required."),phone:E.Z_().required("Mobile number is required."),address_1:E.Z_().required("Address is required."),city:E.Z_().required("City is required."),state:E.Z_().required("State is required."),zipcode:E.Z_().required("Zipcode is required."),country_id:E.Z_().required("Country is required."),currency_id:E.Z_().required("Currency is required."),start_date:E.hT().required("Financial Year Start date is required."),end_date:E.hT().required("Financial Year End date is required."),logo:E.nK().nullable().test(2e6,"File size is too big put under 2 MB",(e=>!e||e&&e.size<=2e6)).test("format","Invalid file formate",(e=>!e||e&&k.includes(e.type)))}),A=[{label:"Active"},{label:"Inactive"}];var L=e=>{let{value:r,formId:t,onSubmit:i,subscriberCountryList:a,subscriberCurrencyList:n}=e;const l=null!==r&&void 0!==r&&r,d=(0,B.TA)({initialValues:{id:l?l.id:"",official_name:l?l.official_name:"",first_name:l?l.first_name:"",last_name:l?l.last_name:"",email:l?l.email:"",phone:l?l.phone:"",logo:"",address_1:l?l.address_1:"",address_2:l?l.address_2:"",city:l?l.city:"",state:l?l.state:"",zipcode:l?l.zipcode:"",country_id:l?l.country_id:"",currency_id:l?l.currency_id:"",start_date:l?I()(l.financial_start_date):I()("2023-01-01"),end_date:l?I()(l.financial_end_date):I()("2023-12-31"),status:"Active",formType:l&&l.id?"edit":"add"},validationSchema:T,onSubmit:e=>{e.start_date=I()(e.start_date).format("YYYY-MM-DD"),e.end_date=I()(e.end_date).format("YYYY-MM-DD"),function(e){const r=new FormData;return r.append("official_name",e.official_name),r.append("first_name",e.first_name),r.append("last_name",e.last_name),r.append("email",e.email),r.append("phone",e.phone),r.append("logo",e.logo),r.append("address_1",e.address_1),r.append("address_2",e.address_2),r.append("city",e.city),r.append("state",e.state),r.append("zipcode",e.zipcode),r.append("country_id",e.country_id),r.append("currency_id",e.currency_id),r.append("financial_start_date",e.start_date),r.append("financial_end_date",e.end_date),r.append("status",e.status),""!==e.id&&"edit"===e.formType?(r.append("id",e.id),P.k.post(S.RW,r)):P.k.post(S.ps,r)}(e).then((e=>{e.data&&1===e.data.status?(i&&i(),(0,D.qX)(e)):(0,D.I5)(e)})).catch((e=>{(0,D.c$)(e)}))}});return console.log(d.values),(0,R.jsx)(p.Z,{children:(0,R.jsx)("form",{id:t,onSubmit:d.handleSubmit,children:(0,R.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"official_name",name:"official_name",label:(0,R.jsx)(q.Z,{title:"Official Name"}),value:d.values.official_name,onChange:d.handleChange,error:d.touched.official_name&&Boolean(d.errors.official_name),helperText:d.touched.official_name&&d.errors.official_name})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"first_name",name:"first_name",label:(0,R.jsx)(q.Z,{title:"First Name"}),value:d.values.first_name,onChange:d.handleChange,error:d.touched.first_name&&Boolean(d.errors.first_name),helperText:d.touched.first_name&&d.errors.first_name})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"last_name",name:"last_name",label:(0,R.jsx)(q.Z,{title:"Last Name"}),value:d.values.last_name,onChange:d.handleChange,error:d.touched.last_name&&Boolean(d.errors.last_name),helperText:d.touched.last_name&&d.errors.last_name})})]})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"email",name:"email",label:(0,R.jsx)(q.Z,{title:"Email"}),value:d.values.email,onChange:d.handleChange,error:d.touched.email&&Boolean(d.errors.email),helperText:d.touched.email&&d.errors.email})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"phone",name:"phone",label:(0,R.jsx)(q.Z,{title:"Mobile Number"}),value:d.values.phone,onChange:d.handleChange,error:d.touched.phone&&Boolean(d.errors.phone),helperText:d.touched.phone&&d.errors.phone})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsx)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,R.jsx)(j.Z,{fullWidth:!0,multiline:!0,size:"small",id:"address_1",name:"address_1",label:(0,R.jsx)(q.Z,{title:"Address 1"}),value:d.values.address_1,onChange:d.handleChange,error:d.touched.address_1&&Boolean(d.errors.address_1),helperText:d.touched.address_1&&d.errors.address_1})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,R.jsx)(j.Z,{fullWidth:!0,multiline:!0,size:"small",id:"address_2",name:"address_2",label:"Address 2",value:d.values.address_2,onChange:d.handleChange})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"city",name:"city",label:(0,R.jsx)(q.Z,{title:"City"}),value:d.values.city,onChange:d.handleChange,error:d.touched.city&&Boolean(d.errors.city),helperText:d.touched.city&&d.errors.city})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"state",name:"state",label:(0,R.jsx)(q.Z,{title:"State"}),value:d.values.state,onChange:d.handleChange,error:d.touched.state&&Boolean(d.errors.state),helperText:d.touched.state&&d.errors.state})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",id:"zipcode",name:"zipcode",label:(0,R.jsx)(q.Z,{title:"Zipcode"}),value:d.values.zipcode,onChange:d.handleChange,error:d.touched.zipcode&&Boolean(d.errors.zipcode),helperText:d.touched.zipcode&&d.errors.zipcode})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsxs)(_.Z,{size:"small",fullWidth:!0,error:d.touched.country_id&&Boolean(d.errors.country_id),children:[(0,R.jsx)(Z.Z,{id:"country_id",children:(0,R.jsx)(q.Z,{title:"Country"})}),(0,R.jsx)(f.Z,{fullWidth:!0,labelId:"country_id",id:"country_id",name:"country_id",label:(0,R.jsx)(q.Z,{title:"Country"}),value:d.values.country_id,onChange:d.handleChange,children:a.map(((e,r)=>(0,R.jsx)(g.Z,{value:e.id,children:e.country_name},r)))}),(0,R.jsx)(C.Z,{children:d.touched.country_id&&d.errors.country_id})]})})]})})})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsxs)(_.Z,{size:"small",fullWidth:!0,error:d.touched.currency_id&&Boolean(d.errors.currency_id),children:[(0,R.jsx)(Z.Z,{id:"currency_id",children:(0,R.jsx)(q.Z,{title:"Currency"})}),(0,R.jsx)(f.Z,{fullWidth:!0,labelId:"currency_id",id:"currency_id",name:"currency_id",label:(0,R.jsx)(q.Z,{title:"Currency"}),value:d.values.currency_id,onChange:d.handleChange,children:n.map(((e,r)=>(0,R.jsx)(g.Z,{value:e.id,children:`${e.currency_name} (${e.currency_symbol})`},r)))}),(0,R.jsx)(C.Z,{children:d.touched.currency_id&&d.errors.currency_id})]})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(b._,{dateAdapter:v.Z,children:(0,R.jsx)(y.M,{views:["year","month"],id:"start_date",name:"start_date",label:(0,R.jsx)(q.Z,{title:"Financial Year Start Date"}),value:d.values.start_date,onChange:e=>{d.setFieldValue("start_date",I()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",...e,error:d.touched.start_date&&Boolean(d.errors.start_date),helperText:d.touched.start_date&&d.errors.start_date})})})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:6,children:(0,R.jsx)(b._,{dateAdapter:v.Z,children:(0,R.jsx)(y.M,{views:["year","month"],id:"end_date",name:"end_date",label:(0,R.jsx)(q.Z,{title:"Financial Year End Date"}),value:d.values.end_date,onChange:e=>{d.setFieldValue("end_date",I()(e).format("YYYY-MM-DD"))},renderInput:e=>(0,R.jsx)(j.Z,{fullWidth:!0,size:"small",...e,error:d.touched.end_date&&Boolean(d.errors.end_date),helperText:d.touched.end_date&&d.errors.end_date})})})})]})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsx)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:(0,R.jsx)(s.ZP,{item:!0,xs:12,sm:12,children:(0,R.jsx)(j.Z,{fullWidth:!0,type:"file",size:"small",id:"logo",name:"logo",inputProps:{accept:"image/png, image/jpeg, image/jpg"},onChange:e=>{d.setFieldValue("logo",e.currentTarget.files[0])},error:d.touched.logo&&Boolean(d.errors.logo),helperText:d.touched.logo&&d.errors.logo})})})}),(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsxs)(_.Z,{size:"small",fullWidth:!0,error:d.touched.status&&Boolean(d.errors.status),children:[(0,R.jsx)(Z.Z,{id:"status",children:"Status"}),(0,R.jsx)(f.Z,{fullWidth:!0,labelId:"status",id:"status",name:"status",label:"Status",value:d.values.status,onChange:d.handleChange,children:A.map(((e,r)=>(0,R.jsx)(g.Z,{value:e.label,children:e.label},r)))}),(0,R.jsx)(C.Z,{children:d.touched.status&&d.errors.status})]})})]})})})},W=t(38820),Y=t(84220),M=t(39281),w=t(79836),F=t(53382),N=t(35855),U=t(68745),V=t(13400),H=t(63033),$=t(56890),O=t(80720),X=t(53299);const G={search:"",displayLength:10,displayStart:0,orderDir:"ASC",orderColumn:0};let K=0;var J=e=>{let{search:r,callApi:t,subscriberCountryList:i,setSubscriberCountryList:s,subscriberCurrencyList:a,setSubscriberCurrencyList:n}=e;const{checkRestriction:l}=(0,c.Z)(),[d,o]=(0,u.useState)([]),[h,m]=(0,u.useState)(0),[p,j]=(0,u.useState)(10),[_,Z]=(0,u.useState)("asc"),[f,g]=(0,u.useState)("0"),[C,b]=(0,u.useState)(!1),[y,v]=(0,u.useState)(!1),[B,z]=(0,u.useState)({}),I=()=>{(function(e){return P.k.get(S.V9,e)})(G).then((e=>{K=e.data.data.totalCount,o(e.data.data.data),s(e.data.data.countryList),n(e.data.data.currencyList)})).catch((e=>{(0,D.c$)(e)}))};return(0,u.useEffect)((()=>{var e;G.search=r,G.displayLength=p,G.displayStart=p*h,G.orderDir=null!==(e=null===_||void 0===_?void 0:_.toUpperCase())&&void 0!==e?e:G.orderDir,G.orderColumn=Number(f),I()}),[h,p,_,f,r,t]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(M.Z,{children:(0,R.jsxs)(w.Z,{children:[(0,R.jsx)(Q,{order:_,orderBy:f,onRequestSort:e=>{Z(f===e&&"asc"===_?"desc":"asc"),g(e)}}),(0,R.jsx)(F.Z,{children:d.map(((e,r)=>(0,R.jsxs)(N.Z,{children:[(0,R.jsx)(U.Z,{align:"left",children:e.official_name}),(0,R.jsx)(U.Z,{align:"left",children:e.email}),(0,R.jsx)(U.Z,{align:"left",children:e.country_name}),(0,R.jsx)(U.Z,{align:"left",children:e.status}),l("CAN_EDIT_SUBSCRIBER")&&l("CAN_DELETE_SUBSCRIBER")&&(0,R.jsxs)(U.Z,{align:"right",children:[l("CAN_EDIT_SUBSCRIBER")&&(0,R.jsx)(V.Z,{color:"primary",component:"label",onClick:()=>{return r=e,b((e=>!e)),void z(r);var r},children:(0,R.jsx)(W.Z,{fontSize:"small"})}),l("CAN_DELETE_SUBSCRIBER")&&(0,R.jsx)(V.Z,{color:"error",component:"label",onClick:()=>{return r=e,v(!0),void z(r);var r},children:(0,R.jsx)(Y.Z,{fontSize:"small"})})]})]},r)))})]})}),(0,R.jsx)(H.Z,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Number(K),rowsPerPage:p,page:h,onPageChange:(e,r)=>{m(r)},onRowsPerPageChange:e=>{j(parseInt(e.target.value,10)),m(0)}}),C&&(0,R.jsx)(x.Z,{open:C,title:"Edit Subscriber",onClose:()=>b((e=>!e)),id:"editSubscriber",sx:{"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"40%",xs:"100%"},minHeight:"100%"}}},children:(0,R.jsx)(L,{value:B,formId:"editSubscriber",onSubmit:()=>{b((e=>!e)),I()},subscriberCountryList:i,subscriberCurrencyList:a})}),y&&(0,R.jsx)(X.Z,{onDeleteHandler:()=>{(function(e){const r=new FormData;return r.append("id",e.id),P.k.post(S.Dr,r)})({id:B.id}).then((e=>{e.data&&1===e.data.status?(m(0),I(),v(!1),(0,D.qX)(e)):(0,D.I5)(e)})).catch((e=>{(0,D.c$)(e)}))},onClose:()=>v(!1),open:y,dept:"Subscriber",name:B.official_name})]})};function Q(e){let{order:r,orderBy:t,onRequestSort:i}=e;const{checkRestriction:s}=(0,c.Z)(),a=e=>()=>{i(e)};return(0,R.jsx)($.Z,{children:(0,R.jsxs)(N.Z,{children:[(0,R.jsx)(U.Z,{sx:{width:"30%"},children:(0,R.jsx)(O.Z,{active:"0"===t,direction:"0"===t?r:"asc",onClick:a("0"),children:"Official Name"})},"official_name"),(0,R.jsx)(U.Z,{sx:{width:"30%"},children:(0,R.jsx)(O.Z,{active:"1"===t,direction:"1"===t?r:"asc",onClick:a("1"),children:"Email"})},"email"),(0,R.jsx)(U.Z,{sx:{width:"15%"},children:(0,R.jsx)(O.Z,{active:"2"===t,direction:"2"===t?r:"asc",onClick:a("2"),children:"Country Name"})},"country_name"),(0,R.jsx)(U.Z,{sx:{width:"15%"},children:(0,R.jsx)(O.Z,{active:"3"===t,direction:"3"===t?r:"asc",onClick:a("3"),children:"Status"})},"status"),s("CAN_EDIT_SUBSCRIBER")&&s("CAN_DELETE_SUBSCRIBER")&&(0,R.jsx)(U.Z,{align:"right",sx:{width:"10%"},children:"Action"})]})})}var ee=()=>{const{checkRestriction:e}=(0,c.Z)(),[r,t]=(0,u.useState)(""),[p,j]=(0,u.useState)(!1),[_,Z]=(0,u.useState)(!1),[f,g]=(0,u.useState)([]),[C,b]=(0,u.useState)([]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(m.Z,{title:(0,R.jsx)(s.ZP,{container:!0,alignItems:"center",spacing:h.dv,sx:{mb:-1,mt:-4},children:(0,R.jsx)(s.ZP,{item:!0,xs:12,children:(0,R.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:h.dv,children:[(0,R.jsx)(s.ZP,{item:!0,sx:{flexGrow:1},children:(0,R.jsx)(a.Z,{variant:"column",children:"Subscriber List"})}),e("CAN_ADD_SUBSCRIBER")&&(0,R.jsx)(s.ZP,{item:!0,children:(0,R.jsxs)(n.Z,{variant:"contained",onClick:()=>{j((e=>!e))},children:[(0,R.jsx)(i.Z,{sx:{mr:.5}})," Add Subscriber"]})}),(0,R.jsx)(s.ZP,{item:!0,children:(0,R.jsx)(l.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,R.jsx)(d.Z,{position:"start",children:(0,R.jsx)(o.jVj,{stroke:1.5,size:"1rem"})}),size:"small",onChange:e=>{t(e.target.value)},autoComplete:"off"})})]})})}),content:!0,children:(0,R.jsx)(J,{search:r,callApi:_,subscriberCountryList:f,setSubscriberCountryList:g,subscriberCurrencyList:C,setSubscriberCurrencyList:b})}),p&&(0,R.jsx)(x.Z,{open:p,title:"Add Subscriber",onClose:()=>j((e=>!e)),id:"addSubscriber",sx:{"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"40%",xs:"100%"},minHeight:"100%"}}},children:(0,R.jsx)(L,{subscriberCountryList:f,subscriberCurrencyList:C,formId:"addSubscriber",onSubmit:()=>{j((e=>!e)),Z((e=>!e))}})})]})}},53299:function(e,r,t){var i=t(5574),s=t(65661),a=t(97123),n=t(36151),l=t(80184);r.Z=e=>{let{onDeleteHandler:r,onClose:t,open:d,dept:o,title:c,name:u}=e;const h=()=>{t()};return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)(i.Z,{open:d,onClose:h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:[(0,l.jsxs)(s.Z,{id:"alert-dialog-title",children:["Are you sure you want to delete the",(0,l.jsxs)("strong",{children:[" ",o," ",c," ",u]}),"? Click ",(0,l.jsx)("strong",{children:"Yes, Delete"})," to proceed or ",(0,l.jsx)("strong",{children:"Cancel"})," to cancel this action."]}),(0,l.jsxs)(a.Z,{sx:{pr:2.5},children:[(0,l.jsxs)(n.Z,{variant:"contained",onClick:()=>{r()},children:["Yes, Delete"," "]}),(0,l.jsx)(n.Z,{variant:"text",color:"error",onClick:h,children:"Cancel"})]})]})})}}}]);
//# sourceMappingURL=538.9209aa92.chunk.js.map