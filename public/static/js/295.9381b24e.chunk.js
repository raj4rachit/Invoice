"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[295],{1230:function(e,t,n){n.d(t,{Cu:function(){return s},LG:function(){return a},Q$:function(){return o},lS:function(){return l},up:function(){return c}});var i=n(88893),r=n(27475);function s(e){return r.k.get(i.wB,e)}function o(e){return r.k.get(i.PH,e)}function a(e){const t=new FormData;return t.append("name",e.name),t.append("description",e.description),e.permissions.map((e=>{t.append("permissions[]",e)})),e.restrictions.map((e=>{e.restriction.map((e=>{t.append("restrictions[]",e.id)}))})),""!==e.id&&"edit"===e.formType?(t.append("id",e.id),r.k.post(i.BP,t)):r.k.post(i.uO,t)}function l(e){const t=new FormData;return t.append("id",e.id),r.k.post(i.VU,t)}function c(e){const t=new FormData;return t.append("type",e.type),t.append("id",e.id),r.k.post(i.lt,t)}},62007:function(e,t,n){var i=n(80169),r=n(55931),s=n(5574),o=n(65661),a=n(20890),l=n(13400),c=n(39157),d=n(61889),u=n(97123),m=n(36151),p=n(72791),h=n(91923),x=n(52909),Z=n(80184);const f=(0,p.forwardRef)(((e,t)=>(0,Z.jsx)(r.Z,{direction:"left",ref:t,...e})));t.Z=e=>{let{open:t,children:n,title:r,showButton:j,sx:v={},onClose:b,isComment:g,buttons:P,id:C,saveButton:S}=e;const[y,I]=(0,p.useState)(!1);(0,p.useEffect)((()=>{var e;I(null!==(e=t)&&void 0!==e&&e)}),[t]);const D=()=>{I((e=>!e)),t=!1,b&&b()};return(0,Z.jsxs)(s.Z,{open:y,TransitionComponent:f,keepMounted:!0,onClose:D,sx:{h2:{p:"10px 24px"},"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"60%",xs:"100%"},minHeight:"100%"}},...v},children:[r&&(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(a.Z,{variant:"h4",gutterBottom:!0,component:"div",children:r}),(0,Z.jsx)(l.Z,{"aria-label":"close",onClick:D,sx:{position:"absolute",right:8,top:0},children:(0,Z.jsx)(i.Z,{})})]}),(0,Z.jsx)(c.Z,{dividers:!0,children:n}),(0,Z.jsx)(d.ZP,{container:!0,alignItems:"center",spacing:h.dv,justifyContent:"flex-end",children:(0,Z.jsx)(d.ZP,{item:!0,xs:12,children:(0,Z.jsxs)(u.Z,{children:[!S&&(0,Z.jsx)(x.Z,{children:(0,Z.jsx)(m.Z,{variant:"contained",color:"primary",type:"submit",form:C,children:"Save"})}),(0,Z.jsx)(m.Z,{variant:"text",color:"error",onClick:D,children:"Close"})]})})})]})}},20295:function(e,t,n){n.r(t),n.d(t,{default:function(){return H}});var i=n(72791),r=n(91923),s=n(61889),o=n(20890),a=n(36151),l=n(77196),c=n(63466),d=n(23735),u=n(58956),m=n(38820),p=n(84220),h=n(39281),x=n(79836),Z=n(53382),f=n(35855),j=n(68745),v=n(81918),b=n(13400),g=n(63033),P=n(56890),C=n(80720),S=n(1230),y=n(62007),I=n(94022),D=n(53299),w=n(68870),k=n(48550),L=n(94721),R=n(85523),N=n(94454),G=n(14868),M=n(92506),$=n(19533),T=n(81724),z=n(80184);const A=T.Ry().shape({name:T.Z_().required("Group name is required."),description:T.Z_().required("Group description is required.")});var F=e=>{let{value:t,formId:n,onSubmit:i,permissions:r}=e;const a=null!==t&&void 0!==t&&t,l=(0,M.TA)({initialValues:{id:a?a.id:"",name:a?a.name:"",description:a?a.description:"",permissions:a?a.permissions:[],restrictions:a?a.permissionList:[],formType:a&&a.id?"edit":"add"},validationSchema:A,onSubmit:e=>{(0,S.LG)(e).then((e=>{e.data&&1===e.data.status?(i&&i(),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))}}),c=e=>{if("Yes"===e.is_default){if(!(1===l.values.permissions.filter((t=>t===e.id)).length)&&e.id){const t=[...l.values.permissions,e.id];l.setFieldValue("permissions",t)}return!1}return 0===l.values.permissions.filter((t=>Number(t)===Number(e.id))).length&&!0},d=e=>{const t=l.values.restrictions.findIndex((function(t){return t.id===e.id})),n=t>-1?l.values.restrictions[t].restriction:[];return e.restrictions.filter((e=>n.some((t=>Number(t.id)===Number(e.id)))))};return(0,z.jsx)(w.Z,{children:(0,z.jsx)("form",{id:n,onSubmit:l.handleSubmit,children:(0,z.jsxs)(s.ZP,{container:!0,spacing:2,children:[(0,z.jsx)(s.ZP,{item:!0,xs:12,children:(0,z.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,z.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,z.jsx)(o.Z,{variant:"subtitle1",children:(0,z.jsx)($.Z,{title:"Group Name"})})}),(0,z.jsx)(s.ZP,{item:!0,xs:12,sm:8,children:(0,z.jsx)(k.Z,{fullWidth:!0,size:"small",id:"name",name:"name",label:"Group Name",value:l.values.name,onChange:l.handleChange,error:l.touched.name&&Boolean(l.errors.name),helperText:l.touched.name&&l.errors.name})})]})}),(0,z.jsx)(s.ZP,{item:!0,xs:12,children:(0,z.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,z.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,z.jsx)(o.Z,{variant:"subtitle1",children:(0,z.jsx)($.Z,{title:"Group Description"})})}),(0,z.jsx)(s.ZP,{item:!0,xs:12,sm:8,children:(0,z.jsx)(k.Z,{fullWidth:!0,multiline:!0,rows:4,size:"small",id:"description",name:"description",label:"Group Description",defaultValue:l.values.description,onChange:l.handleChange,error:l.touched.description&&Boolean(l.errors.description),helperText:l.touched.description&&l.errors.description})})]})}),(0,z.jsx)(L.Z,{variant:"fullWidth",flexItem:!0}),(0,z.jsx)(s.ZP,{item:!0,xs:12,children:(0,z.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,z.jsx)(s.ZP,{item:!0,xs:12,children:(0,z.jsx)(o.Z,{variant:"h4",children:" Permission "})}),r.map(((e,t)=>{var n,i;return(0,z.jsx)(s.ZP,{item:!0,xs:12,children:(0,z.jsxs)(s.ZP,{container:!0,alignItems:"center",children:[(0,z.jsx)(s.ZP,{item:!0,xs:12,sm:4,children:(0,z.jsx)(R.Z,{sx:{ml:0},control:(0,z.jsx)(N.Z,{sx:{paddingLeft:"0"},size:"medium",name:"permissions",value:e.id,checked:!c(e),onChange:t=>{if(!t.target.checked){const t=l.values.restrictions.filter((t=>t.id!==e.id));l.setFieldValue("restrictions",t)}l.handleChange(t)}}),label:(0,z.jsx)(o.Z,{variant:"subtitle1",children:e.name}),children:(0,z.jsx)(L.Z,{variant:"middle"})})}),(0,z.jsx)(s.ZP,{item:!0,xs:12,sm:8,children:(0,z.jsx)(G.Z,{multiple:!0,options:null!==(n=e.restrictions)&&void 0!==n?n:[],getOptionLabel:e=>e.name?e.name:"",value:d(e),renderOption:(e,t,n)=>{let{selected:i}=n;return(0,z.jsxs)("li",{...e,children:[(0,z.jsx)(N.Z,{checked:i,value:t.id}),t.name]})},renderInput:t=>(0,z.jsx)(k.Z,{...t,size:"small",name:`restrictions.${e.id}`,label:`${e.name} restrictions`}),disabled:(i=e,"Yes"!==i.is_default&&0===l.values.permissions.filter((e=>e===i.id)).length&&!0),onChange:(t,n)=>{const i=l.values.restrictions,r=i.findIndex((function(t){return t.id===e.id}));if(r>-1)l.setFieldValue(`restrictions.${r}.restriction`,n);else{const t={id:e.id,name:e.name,restriction:n},r=[...i,t];l.setFieldValue("restrictions",r)}}})})]})},t)}))]})})]})})})},_=n(17834);const E={search:"",displayLength:10,displayStart:0,orderDir:"ASC",orderColumn:0};let V=0;var B=e=>{let{search:t,callApi:n,setPermissionData:r,permissionData:s}=e;const{checkRestriction:o,recall:a}=(0,_.Z)(),[l,c]=(0,i.useState)([]),[d,u]=(0,i.useState)(0),[P,C]=(0,i.useState)(10),[w,k]=(0,i.useState)("asc"),[L,R]=(0,i.useState)("0"),[N,G]=(0,i.useState)(!1),[M,$]=(0,i.useState)(!1),[T,A]=(0,i.useState)({}),B=()=>{(0,S.Q$)(E).then((e=>{V=e.data.data.totalCount,c(e.data.data.data)})).catch((e=>{(0,I.c$)(e)}))};return(0,i.useEffect)((()=>{var e;E.search=t,E.displayLength=P,E.displayStart=P*d,E.orderDir=null!==(e=null===w||void 0===w?void 0:w.toUpperCase())&&void 0!==e?e:E.orderDir,E.orderColumn=Number(L),B()}),[d,P,w,L,t,n,a]),(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(h.Z,{children:(0,z.jsxs)(x.Z,{children:[(0,z.jsx)(O,{order:w,orderBy:L,onRequestSort:e=>{k(L===e&&"asc"===w?"desc":"asc"),R(e)}}),(0,z.jsx)(Z.Z,{children:l.map(((e,t)=>(0,z.jsxs)(f.Z,{hover:!0,role:"checkbox",children:[(0,z.jsx)(j.Z,{children:e.name}),(0,z.jsx)(j.Z,{children:e.permissions.map(((e,t)=>(0,z.jsx)(v.Z,{label:e,sx:{margin:"5px 5px 0 0"}},t)))}),(0,z.jsxs)(j.Z,{align:"right",children:[o("CAN_EDIT_PERMISSION_GROUP")&&(0,z.jsx)(b.Z,{color:"primary",component:"label",onClick:()=>{return t=e,void(0,S.up)({type:"edit",id:t.id}).then((e=>{e.data&&1===e.data.status?(G((e=>!e)),A(e.data.data.groupData),r(e.data.data.allPermissionList)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}));var t},children:(0,z.jsx)(m.Z,{fontSize:"small"})}),o("CAN_DELETE_PERMISSION_GROUP")&&(0,z.jsx)(b.Z,{color:"error",component:"label",onClick:()=>{return t=e,$(!0),void A(t);var t},children:(0,z.jsx)(p.Z,{fontSize:"small"})})]})]},t)))})]})}),(0,z.jsx)(g.Z,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Number(V),rowsPerPage:P,page:d,onPageChange:(e,t)=>{u(t)},onRowsPerPageChange:e=>{C(parseInt(e.target.value,10)),u(0)}}),N&&(0,z.jsx)(y.Z,{open:N,title:"Edit Permission Group",onClose:()=>G((e=>!e)),id:"editPermissionGroup",children:(0,z.jsx)(F,{value:T,formId:"editPermissionGroup",onSubmit:()=>{G((e=>!e)),B()},permissions:s})}),M&&(0,z.jsx)(D.Z,{onDeleteHandler:()=>{(0,S.lS)({id:T.id}).then((e=>{e.data&&1===e.data.status?(u(0),B(),$(!1),(0,I.qX)(e)):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))},onClose:()=>$(!1),open:M,dept:"Permission Group",name:T.name})]})};function O(e){let{order:t,orderBy:n,onRequestSort:i}=e;return(0,z.jsx)(P.Z,{children:(0,z.jsxs)(f.Z,{children:[(0,z.jsx)(j.Z,{sx:{width:"20%"},children:(0,z.jsx)(C.Z,{active:"0"===n,direction:"0"===n?t:"asc",onClick:(r="0",()=>{i(r)}),children:"Name"})},"name"),(0,z.jsx)(j.Z,{sx:{width:"70%"},children:"Permissions"}),(0,z.jsx)(j.Z,{align:"right",sx:{width:"10%"},children:"Action"})]})});var r}var q=n(79567);var H=()=>{const{checkRestriction:e}=(0,_.Z)(),[t,n]=(0,i.useState)(""),[m,p]=(0,i.useState)(!1),[h,x]=(0,i.useState)(!1),[Z,f]=(0,i.useState)([]),[,j]=(0,i.useTransition)();return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsx)(d.Z,{title:(0,z.jsx)(s.ZP,{container:!0,alignItems:"center",spacing:r.dv,sx:{mb:-1,mt:-4},children:(0,z.jsx)(s.ZP,{item:!0,xs:12,children:(0,z.jsxs)(s.ZP,{container:!0,alignItems:"center",spacing:r.dv,children:[(0,z.jsx)(s.ZP,{item:!0,sx:{flexGrow:1},children:(0,z.jsx)(o.Z,{variant:"column",children:"Permission Group List"})}),e("CAN_ADD_PERMISSION_GROUP")&&(0,z.jsx)(s.ZP,{item:!0,children:(0,z.jsxs)(a.Z,{variant:"contained",onClick:()=>(p((e=>!e)),void(0,S.up)({type:"add"}).then((e=>{e.data&&1===e.data.status?f(e.data.data.allPermissionList):(0,I.I5)(e)})).catch((e=>{(0,I.c$)(e)}))),children:[(0,z.jsx)(q.Z,{sx:{mr:.5}})," Add Permission Group"]})}),(0,z.jsx)(s.ZP,{item:!0,children:(0,z.jsx)(l.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,z.jsx)(c.Z,{position:"start",children:(0,z.jsx)(u.jVj,{stroke:1.5,size:"1rem"})}),size:"small",onChange:e=>{j((()=>n(e.target.value)))},autoComplete:"off"})})]})})}),content:!0,children:(0,z.jsx)(B,{search:t,callApi:h,setPermissionData:f,permissionData:Z})}),m&&(0,z.jsx)(y.Z,{open:m,title:"Add Permission Group",onClose:()=>p((e=>!e)),id:"addPermissionGroup",children:(0,z.jsx)(F,{formId:"addPermissionGroup",onSubmit:()=>{p((e=>!e)),x((e=>!e))},permissions:Z})})]})}},53299:function(e,t,n){var i=n(5574),r=n(65661),s=n(97123),o=n(36151),a=n(80184);t.Z=e=>{let{onDeleteHandler:t,onClose:n,open:l,dept:c,title:d,name:u}=e;const m=()=>{n()};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(i.Z,{open:l,onClose:m,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:[(0,a.jsxs)(r.Z,{id:"alert-dialog-title",children:["Are you sure you want to delete the",(0,a.jsxs)("strong",{children:[" ",c," ",d," ",u]}),"? Click ",(0,a.jsx)("strong",{children:"Yes, Delete"})," to proceed or ",(0,a.jsx)("strong",{children:"Cancel"})," to cancel this action."]}),(0,a.jsxs)(s.Z,{sx:{pr:2.5},children:[(0,a.jsxs)(o.Z,{variant:"contained",onClick:()=>{t()},children:["Yes, Delete"," "]}),(0,a.jsx)(o.Z,{variant:"text",color:"error",onClick:m,children:"Cancel"})]})]})})}},80169:function(e,t,n){var i=n(76189),r=n(80184);t.Z=(0,i.Z)((0,r.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined")},84220:function(e,t,n){var i=n(76189),r=n(80184);t.Z=(0,i.Z)((0,r.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},38820:function(e,t,n){var i=n(76189),r=n(80184);t.Z=(0,i.Z)((0,r.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},85523:function(e,t,n){n.d(t,{Z:function(){return b}});var i=n(63366),r=n(87462),s=n(72791),o=n(28182),a=n(94419),l=n(52930),c=n(20890),d=n(14036),u=n(47630),m=n(93736),p=n(21217);function h(e){return(0,p.Z)("MuiFormControlLabel",e)}var x=(0,n(75878).Z)("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error"]),Z=n(76147),f=n(80184);const j=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],v=(0,u.ZP)("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${x.label}`]:t.label},t.root,t[`labelPlacement${(0,d.Z)(n.labelPlacement)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,r.Z)({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${x.disabled}`]:{cursor:"default"}},"start"===n.labelPlacement&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},"top"===n.labelPlacement&&{flexDirection:"column-reverse",marginLeft:16},"bottom"===n.labelPlacement&&{flexDirection:"column",marginLeft:16},{[`& .${x.label}`]:{[`&.${x.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})}));var b=s.forwardRef((function(e,t){const n=(0,m.Z)({props:e,name:"MuiFormControlLabel"}),{className:u,componentsProps:p={},control:x,disabled:b,disableTypography:g,label:P,labelPlacement:C="end"}=n,S=(0,i.Z)(n,j),y=(0,l.Z)();let I=b;"undefined"===typeof I&&"undefined"!==typeof x.props.disabled&&(I=x.props.disabled),"undefined"===typeof I&&y&&(I=y.disabled);const D={disabled:I};["checked","name","onChange","value","inputRef"].forEach((e=>{"undefined"===typeof x.props[e]&&"undefined"!==typeof n[e]&&(D[e]=n[e])}));const w=(0,Z.Z)({props:n,muiFormControl:y,states:["error"]}),k=(0,r.Z)({},n,{disabled:I,labelPlacement:C,error:w.error}),L=(e=>{const{classes:t,disabled:n,labelPlacement:i,error:r}=e,s={root:["root",n&&"disabled",`labelPlacement${(0,d.Z)(i)}`,r&&"error"],label:["label",n&&"disabled"]};return(0,a.Z)(s,h,t)})(k);let R=P;return null==R||R.type===c.Z||g||(R=(0,f.jsx)(c.Z,(0,r.Z)({component:"span",className:L.label},p.typography,{children:R}))),(0,f.jsxs)(v,(0,r.Z)({className:(0,o.Z)(L.root,u),ownerState:k,ref:t},S,{children:[s.cloneElement(x,D),R]}))}))},80720:function(e,t,n){n.d(t,{Z:function(){return g}});var i=n(63366),r=n(87462),s=n(94419),o=n(28182),a=n(72791),l=n(95080),c=n(76189),d=n(80184),u=(0,c.Z)((0,d.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),m=n(47630),p=n(93736),h=n(14036),x=n(21217);function Z(e){return(0,x.Z)("MuiTableSortLabel",e)}var f=(0,n(75878).Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]);const j=["active","children","className","direction","hideSortIcon","IconComponent"],v=(0,m.ZP)(l.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.active&&t.active]}})((e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${f.icon}`]:{opacity:.5}},[`&.${f.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${f.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}})),b=(0,m.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.icon,t[`iconDirection${(0,h.Z)(n.direction)}`]]}})((e=>{let{theme:t,ownerState:n}=e;return(0,r.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},"desc"===n.direction&&{transform:"rotate(0deg)"},"asc"===n.direction&&{transform:"rotate(180deg)"})}));var g=a.forwardRef((function(e,t){const n=(0,p.Z)({props:e,name:"MuiTableSortLabel"}),{active:a=!1,children:l,className:c,direction:m="asc",hideSortIcon:x=!1,IconComponent:f=u}=n,g=(0,i.Z)(n,j),P=(0,r.Z)({},n,{active:a,direction:m,hideSortIcon:x,IconComponent:f}),C=(e=>{const{classes:t,direction:n,active:i}=e,r={root:["root",i&&"active"],icon:["icon",`iconDirection${(0,h.Z)(n)}`]};return(0,s.Z)(r,Z,t)})(P);return(0,d.jsxs)(v,(0,r.Z)({className:(0,o.Z)(C.root,c),component:"span",disableRipple:!0,ownerState:P,ref:t},g,{children:[l,x&&!a?null:(0,d.jsx)(b,{as:f,className:(0,o.Z)(C.icon),ownerState:P})]}))}))}}]);
//# sourceMappingURL=295.9381b24e.chunk.js.map