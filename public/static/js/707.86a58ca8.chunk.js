"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[707],{58451:function(e,n,a){a.d(n,{$8:function(){return l},El:function(){return i},W7:function(){return o},rT:function(){return s},sU:function(){return h},xb:function(){return p},yv:function(){return d},zi:function(){return c}});var r=a(88893),t=a(27475);function i(){return t.k.get(r.vG)}function s(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.oT,n)}function c(){return t.k.get(r.AL)}function l(){return t.k.get(r.XZ)}function o(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.g5,n)}function d(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.rS,n)}function p(e){const n=new FormData;return n.append("client_id",e.client_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),n.append("type",e.type),t.k.post(r.eg,n)}function h(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("type",e.type),e.financial_years.map((a=>{e.type?n.append("years[]",a):n.append("years[]",a.year_id)})),t.k.post(r.Ll,n)}},50707:function(e,n,a){a.r(n),a.d(n,{default:function(){return H}});var r=a(79567),t=a(61889),i=a(20890),s=a(36151),c=a(68870),l=a(58451),o=a(17834),d=a(72791),p=a(91923),h=a(23735),u=a(94022),m=a(52463),x=a(48550),_=a(23786),j=a(14868),y=a(94454),Z=a(45006),g=a(92506),f=a(81724),v=a(80184);const b=f.Ry().shape({company_id:f.Z_().required("Company is required."),financial_years:f.IX().min(1,"At Least Select 1 Year")});var S=e=>{let{value:n,formID:a,initData:r,setReportData:i,onSubmit:s}=e;const{company:c}=(0,o.Z)(),[p,h]=(0,d.useState)([]),m=null!==r&&void 0!==r&&r,f=Object.keys(n).length>0&&n,S=(0,g.TA)({initialValues:{company_id:f?f.company_id:"",financial_years:[]},validationSchema:b,onSubmit:e=>{(0,l.sU)(e).then((e=>{s&&s(),i(e.data.data)})).catch((e=>{(0,u.c$)(e)}))}}),k=e=>{S.setFieldValue("financial_years",[]),(0,Z.Zc)(e).then((e=>{h(e.data.data)})).catch((e=>{(0,u.c$)(e)}))};return(0,d.useEffect)((()=>{if("0"!=S.values.company_id){const e=S.values.company_id;k(e)}}),[]),(0,v.jsx)("form",{id:a,onSubmit:S.handleSubmit,children:(0,v.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsx)(x.Z,{select:!0,size:"small",label:"Company",fullWidth:!0,id:"company_id",name:"company_id",value:S.values.company_id,onChange:e=>{k(e.target.value),S.handleChange(e)},error:S.touched.company_id&&Boolean(S.errors.company_id),helperText:S.touched.company_id&&S.errors.company_id,children:m&&m.companyList.map(((e,n)=>(0,v.jsx)(_.Z,{value:e.id,children:e.company_name},n)))})}),(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsx)(j.Z,{multiple:!0,size:"small",id:"financial_years",name:"financial_years",options:p||[],getOptionLabel:e=>e.financial_year_name?e.financial_year_name:"",value:S.values.financial_years,renderOption:(e,n,a)=>{let{selected:r}=a;return(0,v.jsxs)("li",{...e,children:[(0,v.jsx)(y.Z,{checked:r,value:n.id}),n.financial_year_name]})},renderInput:e=>(0,v.jsx)(x.Z,{...e,size:"small",id:"financial_years",name:"financial_years",label:"Financial Year",error:S.touched.financial_years&&Boolean(S.errors.financial_years),helperText:S.touched.financial_years&&S.errors.financial_years}),onChange:(e,n)=>{S.setFieldValue("financial_years",n)}})})]})})},k=a(76189),D=(0,k.Z)((0,v.jsx)("path",{d:"m7 14 5-5 5 5H7z"}),"ArrowDropUpOutlined"),w=(0,k.Z)((0,v.jsx)("path",{d:"m7 10 5 5 5-5H7z"}),"ArrowDropDownOutlined"),F=a(39281),T=a(79836),C=a(90618),z=a(56890),P=a(35855),R=a(68745),U=a(53382);var I=e=>{var n,a,r,t,s,c,l,o;let{reportData:p}=e;const h=null!==(n=p.Subscriber_currency_symbol)&&void 0!==n?n:"",u=null!==(a=p.USD_symbol)&&void 0!==a?a:"",m=null!==(r=p.headers)&&void 0!==r?r:[],x=null!==(t=p.incomes)&&void 0!==t?t:[],_=null!==(s=p.expenses)&&void 0!==s?s:[],j=null!==(c=p.total_incomes)&&void 0!==c?c:[],y=null!==(l=p.total_expenses)&&void 0!==l?l:[],Z=null!==(o=p.total_margin)&&void 0!==o?o:[],g=e=>"up"===e?(0,v.jsx)(D,{color:"success",sx:{fontSize:"25px",verticalAlign:"middle"}}):"down"===e?(0,v.jsx)(w,{color:"error",sx:{fontSize:"25px",verticalAlign:"middle"}}):"";return(0,v.jsx)(F.Z,{children:(0,v.jsxs)(T.Z,{size:"small",sx:{marginTop:5,[`& .${C.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:[(0,v.jsxs)(z.Z,{sx:{backgroundColor:"lightblue"},children:[(0,v.jsxs)(P.Z,{children:[(0,v.jsx)(R.Z,{rowSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:"Incomes"})}),m.map(((e,n)=>(0,v.jsx)(R.Z,{align:"center",colSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:e.financial_year_name})},n)))]}),(0,v.jsx)(P.Z,{children:m.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsx)(R.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",h,")"]})}),(0,v.jsx)(R.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",u,")"]})})]},n)))})]}),(0,v.jsxs)(U.Z,{children:[x.map(((e,n)=>(0,v.jsxs)(P.Z,{children:[(0,v.jsx)(R.Z,{children:e.name}),e.income.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),e.subscriber_currency_total_amount]}),(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),e.USD_currency_total_amount]})]},n)))]},n))),(0,v.jsxs)(P.Z,{children:[(0,v.jsx)(R.Z,{children:(0,v.jsx)("b",{children:"Total"})}),j.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]})]}),(0,v.jsx)(U.Z,{children:(0,v.jsx)(P.Z,{})}),(0,v.jsxs)(z.Z,{sx:{backgroundColor:"lightblue"},children:[(0,v.jsxs)(P.Z,{children:[(0,v.jsx)(R.Z,{rowSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:"Expenses"})}),m.map(((e,n)=>(0,v.jsx)(R.Z,{align:"center",colSpan:2,children:(0,v.jsx)(i.Z,{variant:"h4",children:e.financial_year_name})},n)))]}),(0,v.jsx)(P.Z,{children:m.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsx)(R.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",h,")"]})}),(0,v.jsx)(R.Z,{align:"center",children:(0,v.jsxs)(i.Z,{variant:"h4",children:["(",u,")"]})})]},n)))})]}),(0,v.jsxs)(U.Z,{children:[_.map(((e,n)=>(0,v.jsxs)(P.Z,{children:[(0,v.jsx)(R.Z,{children:e.name}),e.expenses.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),e.subscriber_currency_total_amount]}),(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),e.USD_currency_total_amount]})]},n)))]},n))),(0,v.jsxs)(P.Z,{children:[(0,v.jsx)(R.Z,{children:(0,v.jsx)("b",{children:"Total"})}),y.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]}),(0,v.jsxs)(P.Z,{sx:{backgroundColor:"antiquewhite"},children:[(0,v.jsx)(R.Z,{children:(0,v.jsx)("b",{children:"Total Margin"})}),Z.map(((e,n)=>(0,v.jsxs)(d.Fragment,{children:[(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.subscriber_currency_total_amount})]}),(0,v.jsxs)(R.Z,{align:"right",children:[g(e.type),(0,v.jsx)("b",{children:e.USD_currency_total_amount})]})]},n)))]})]})]})})},A=a(6445);var H=()=>{const{company:e,recall:n}=(0,o.Z)(),[a,x]=(0,d.useState)(!1),[_,j]=(0,d.useState)({}),[y,Z]=(0,d.useState)({});return(0,d.useEffect)((()=>{(0,l.zi)().then((e=>{Z(e.data.data)})).catch((()=>{(0,u.c$)(err)}))}),[]),(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(h.Z,{title:(0,v.jsx)(t.ZP,{container:!0,alignItems:"center",spacing:p.dv,sx:{mb:-1,mt:-3},children:(0,v.jsx)(t.ZP,{item:!0,xs:12,children:(0,v.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:p.dv,children:[(0,v.jsx)(t.ZP,{item:!0,sx:{flexGrow:1},children:(0,v.jsx)(i.Z,{variant:"column",children:"Year over Year Report"})}),Object.keys(_).length>0&&(0,v.jsx)(t.ZP,{item:!0,children:(0,v.jsxs)(s.Z,{variant:"outlined",onClick:()=>(()=>{const e={company_id:_.company_id,financial_years:_.financial_ids,type:"report"};(0,l.sU)(e).then((e=>{const n=document.createElement("a");n.href=e.data.data.yoy_data,n.download=e.data.data.yoy_name,n.click()})).catch((e=>{console.error(e)}))})(),children:[(0,v.jsx)(A.Z,{sx:{mr:.5}})," Export"]})}),(0,v.jsx)(t.ZP,{item:!0,children:(0,v.jsxs)(s.Z,{variant:"contained",onClick:()=>{x((e=>!e))},children:[(0,v.jsx)(r.Z,{sx:{mr:.5}})," Generate Report"]})})]})})}),content:!0,children:Object.keys(_).length>0?(0,v.jsx)(I,{reportData:_}):(0,v.jsx)(c.Z,{component:"span",children:(0,v.jsx)(i.Z,{variant:"h2",textAlign:"center",sx:{p:"10%"},color:"GrayText",children:"Please Generate Report"})})}),a&&(0,v.jsx)(m.Z,{title:"Year over Year Report",open:a,onClose:()=>x((e=>!e)),id:"generateForm",children:(0,v.jsx)(S,{value:_,formID:"generateForm",initData:y,setReportData:j,onSubmit:()=>{x((e=>!e))}})})]})}},6445:function(e,n,a){var r=a(64836);n.Z=void 0;var t=r(a(45649)),i=a(80184),s=(0,t.default)((0,i.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"}),"FileUploadOutlined");n.Z=s},56890:function(e,n,a){a.d(n,{Z:function(){return y}});var r=a(87462),t=a(63366),i=a(72791),s=a(28182),c=a(94419),l=a(829),o=a(93736),d=a(47630),p=a(21217);function h(e){return(0,p.Z)("MuiTableHead",e)}(0,a(75878).Z)("MuiTableHead",["root"]);var u=a(80184);const m=["className","component"],x=(0,d.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,n)=>n.root})({display:"table-header-group"}),_={variant:"head"},j="thead";var y=i.forwardRef((function(e,n){const a=(0,o.Z)({props:e,name:"MuiTableHead"}),{className:i,component:d=j}=a,p=(0,t.Z)(a,m),y=(0,r.Z)({},a,{component:d}),Z=(e=>{const{classes:n}=e;return(0,c.Z)({root:["root"]},h,n)})(y);return(0,u.jsx)(l.Z.Provider,{value:_,children:(0,u.jsx)(x,(0,r.Z)({as:d,className:(0,s.Z)(Z.root,i),ref:n,role:d===j?null:"rowgroup",ownerState:y},p))})}))}}]);
//# sourceMappingURL=707.86a58ca8.chunk.js.map