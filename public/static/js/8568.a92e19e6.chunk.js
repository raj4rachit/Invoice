"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[8568],{62007:function(e,i,s){var n=s(80169),t=s(55931),r=s(5574),l=s(65661),a=s(20890),o=s(13400),d=s(39157),c=s(61889),m=s(97123),h=s(36151),u=s(72791),x=s(91923),p=s(52909),j=s(80184);const Z=(0,u.forwardRef)(((e,i)=>(0,j.jsx)(t.Z,{direction:"left",ref:i,...e})));i.Z=e=>{let{open:i,children:s,title:t,showButton:g,sx:v={},onClose:f,isComment:P,buttons:C,id:b,saveButton:S}=e;const[_,R]=(0,u.useState)(!1);(0,u.useEffect)((()=>{var e;R(null!==(e=i)&&void 0!==e&&e)}),[i]);const k=()=>{R((e=>!e)),i=!1,f&&f()};return(0,j.jsxs)(r.Z,{open:_,TransitionComponent:Z,keepMounted:!0,onClose:k,sx:{h2:{p:"10px 24px"},"& .MuiDialog-container ":{justifyContent:"flex-end","& .MuiPaper-root":{m:0,p:0,borderRadius:"0px",minWidth:{sm:"60%",xs:"100%"},minHeight:"100%"}},...v},children:[t&&(0,j.jsxs)(l.Z,{children:[(0,j.jsx)(a.Z,{variant:"h4",gutterBottom:!0,component:"div",children:t}),(0,j.jsx)(o.Z,{"aria-label":"close",onClick:k,sx:{position:"absolute",right:8,top:0},children:(0,j.jsx)(n.Z,{})})]}),(0,j.jsx)(d.Z,{dividers:!0,children:s}),(0,j.jsx)(c.ZP,{container:!0,alignItems:"center",spacing:x.dv,justifyContent:"flex-end",children:(0,j.jsx)(c.ZP,{item:!0,xs:12,children:(0,j.jsxs)(m.Z,{children:[!S&&(0,j.jsx)(p.Z,{children:(0,j.jsx)(h.Z,{variant:"contained",color:"primary",type:"submit",form:b,children:"Save"})}),(0,j.jsx)(h.Z,{variant:"text",color:"error",onClick:k,children:"Close"})]})})})]})}},98568:function(e,i,s){s.r(i),s.d(i,{default:function(){return X}});var n=s(79567),t=s(61889),r=s(20890),l=s(36151),a=s(68096),o=s(30829),d=s(58406),c=s(23786),m=s(77196),h=s(63466),u=s(58956),x=s(72791),p=s(91923),j=s(23735),Z=s(62007),g=s(68870),v=s(48550),f=s(14868),P=s(94454),C=s(88893),b=s(27475);var S=s(92506),_=s(94022),R=s(19533),k=s(81724),y=s(80184);const w=k.Ry().shape({name:k.Z_().required("Restriction name is required."),slug:k.Z_().required("Restriction slug is required."),description:k.Z_().required("Restriction description is required."),permission_id:k.Z_().required("Permission is required.")});var I=e=>{let{value:i,formId:s,onSubmit:n,permissions:l}=e;const a=null!==i&&void 0!==i&&i,o=(0,S.TA)({initialValues:{id:a?a.id:"",name:a?a.name:"",slug:a?a.slug:"",description:a?a.description:"",permission_id:a?a.permission_id:"",formType:a&&a.id?"edit":"add"},validationSchema:w,onSubmit:e=>{(function(e){const i=new FormData;return i.append("name",e.name),i.append("slug",e.slug),i.append("description",e.description),i.append("permission_id",e.permission_id),""!==e.id&&"edit"===e.formType?(i.append("id",e.id),b.k.post(C.dt,i)):b.k.post(C.X1,i)})(e).then((e=>{e.data&&1===e.data.status?(n&&n(),(0,_.qX)(e)):(0,_.I5)(e)})).catch((e=>{(0,_.c$)(e)}))}});return(0,y.jsx)(g.Z,{children:(0,y.jsx)("form",{id:s,onSubmit:o.handleSubmit,children:(0,y.jsxs)(t.ZP,{container:!0,spacing:2,children:[(0,y.jsx)(t.ZP,{item:!0,xs:12,children:(0,y.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:4,children:(0,y.jsx)(r.Z,{variant:"subtitle1",children:(0,y.jsx)(R.Z,{title:"Restriction Name"})})}),(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:8,children:(0,y.jsx)(v.Z,{fullWidth:!0,size:"small",id:"name",name:"name",label:"Restriction Name",defaultValue:o.values.name,onChange:o.handleChange,error:o.touched.name&&Boolean(o.errors.name),helperText:o.touched.name&&o.errors.name})})]})}),(0,y.jsx)(t.ZP,{item:!0,xs:12,children:(0,y.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:4,children:(0,y.jsx)(r.Z,{variant:"subtitle1",children:(0,y.jsx)(R.Z,{title:"Restriction Slug"})})}),(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:8,children:(0,y.jsx)(v.Z,{fullWidth:!0,size:"small",id:"slug",name:"slug",label:"Restriction Slug",defaultValue:o.values.slug,onChange:o.handleChange,error:o.touched.slug&&Boolean(o.errors.slug),helperText:o.touched.slug&&o.errors.slug})})]})}),(0,y.jsx)(t.ZP,{item:!0,xs:12,children:(0,y.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:4,children:(0,y.jsx)(r.Z,{variant:"subtitle1",children:(0,y.jsx)(R.Z,{title:"Description"})})}),(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:8,children:(0,y.jsx)(v.Z,{fullWidth:!0,multiline:!0,size:"small",rows:4,label:"Restriction Description",id:"description",name:"description",defaultValue:o.values.description,onChange:o.handleChange,error:o.touched.description&&Boolean(o.errors.description),helperText:o.touched.description&&o.errors.description})})]})}),(0,y.jsx)(t.ZP,{item:!0,xs:12,children:(0,y.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:2,children:[(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:4,children:(0,y.jsx)(r.Z,{variant:"subtitle1",children:(0,y.jsx)(R.Z,{title:"Permissions"})})}),(0,y.jsx)(t.ZP,{item:!0,xs:12,sm:8,children:(0,y.jsx)(f.Z,{options:null!==l&&void 0!==l?l:[],getOptionLabel:e=>e.name?e.name:"",value:o.values.permission_id?l.filter((e=>e.id===o.values.permission_id))[0]:null,renderOption:(e,i,s)=>{let{selected:n}=s;return(0,y.jsxs)("li",{...e,children:[(0,y.jsx)(P.Z,{checked:n,value:i.id}),i.name]})},renderInput:e=>(0,y.jsx)(v.Z,{...e,size:"small",id:"permission_id",name:"permission_id",label:"Permissions",error:o.touched.permission_id&&Boolean(o.errors.permission_id),helperText:o.touched.permission_id&&o.errors.permission_id}),onChange:(e,i)=>{const s=i?i.id:"";o.setFieldValue("permission_id",s)}})})]})})]})})})},z=s(38820),D=s(84220),V=s(39281),q=s(79836),A=s(56890),B=s(35855),M=s(68745),F=s(53382),T=s(13400),H=s(63033),L=s(53299);const W=[{id:"name",label:"Name",align:"left",width:"30%"},{id:"slug",label:"Slug",align:"left",width:"30%"},{id:"permissions",label:"Permissions",align:"left",width:"20%"},{id:"action",label:"Action",align:"right",width:"20%"}],O={search:"",permission_id:"0",orderColumn:1,displayLength:10,displayStart:0};let E=0;var N=e=>{let{search:i,permissionFilter:s,callApi:n,setPermissionData:t,permissionData:r}=e;const[l,a]=(0,x.useState)([]),[o,d]=(0,x.useState)(0),[c,m]=(0,x.useState)(10),[h,u]=(0,x.useState)(!1),[p,j]=(0,x.useState)(!1),[g,v]=(0,x.useState)({}),f=async()=>{await function(e){return b.k.get(C._W,e)}(O).then((e=>{E=e.data.data.totalCount,t(e.data.data.permissionList),a(e.data.data.data)})).catch((e=>{(0,_.c$)(e)}))};return(0,x.useEffect)((()=>{O.search=i,O.permission_id=s,O.orderColumn=0,O.displayLength=c,O.displayStart=c*o,f()}),[i,s,n,o,c]),(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(V.Z,{children:(0,y.jsxs)(q.Z,{children:[(0,y.jsx)(A.Z,{children:(0,y.jsx)(B.Z,{children:W.map((e=>(0,y.jsx)(M.Z,{align:e.align,style:{width:e.width},children:e.label},e.id)))})}),(0,y.jsx)(F.Z,{children:l.map(((e,i)=>(0,y.jsxs)(B.Z,{hover:!0,role:"checkbox",children:[(0,y.jsx)(M.Z,{children:e.name}),(0,y.jsx)(M.Z,{children:e.slug}),(0,y.jsx)(M.Z,{children:e.permission_name}),(0,y.jsxs)(M.Z,{align:"right",children:[(0,y.jsx)(T.Z,{color:"primary",component:"label",onClick:()=>{return i=e,u((e=>!e)),void v(i);var i},children:(0,y.jsx)(z.Z,{fontSize:"small"})}),(0,y.jsx)(T.Z,{color:"error",component:"label",onClick:()=>{return i=e,j(!0),void v(i);var i},children:(0,y.jsx)(D.Z,{fontSize:"small"})})]})]},i)))})]})}),(0,y.jsx)(H.Z,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Number(E),rowsPerPage:c,page:o,onPageChange:(e,i)=>{d(i)},onRowsPerPageChange:e=>{m(parseInt(e.target.value,10)),d(0)}}),h&&(0,y.jsx)(Z.Z,{open:h,title:"Edit Restriction",onClose:()=>u((e=>!e)),id:"editRestriction",children:(0,y.jsx)(I,{value:g,formId:"editRestriction",onSubmit:()=>{u((e=>!e)),f()},permissions:r})}),p&&(0,y.jsx)(L.Z,{onDeleteHandler:()=>{(function(e){const i=new FormData;return i.append("id",e.id),b.k.post(C.bj,i)})({id:g.id}).then((e=>{e.data&&1===e.data.status?(d(0),f(),j(!1),(0,_.qX)(e)):(0,_.I5)(e)})).catch((e=>{(0,_.c$)(e)}))},onClose:()=>j(!1),open:p,dept:"Restriction",name:g.name})]})};var X=()=>{const[e,i]=(0,x.useState)(""),[s,g]=(0,x.useState)("0"),[v,f]=(0,x.useState)(!1),[P,C]=(0,x.useState)([]),[b,S]=(0,x.useState)(!1);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(j.Z,{title:(0,y.jsx)(t.ZP,{container:!0,alignItems:"center",spacing:p.dv,sx:{mb:-1,mt:-4},children:(0,y.jsx)(t.ZP,{item:!0,xs:12,children:(0,y.jsxs)(t.ZP,{container:!0,alignItems:"center",spacing:p.dv,children:[(0,y.jsx)(t.ZP,{item:!0,sx:{flexGrow:1},children:(0,y.jsx)(r.Z,{variant:"column",children:"Restriction List"})}),(0,y.jsx)(t.ZP,{item:!0,children:(0,y.jsxs)(l.Z,{variant:"contained",onClick:()=>{S((e=>!e))},children:[(0,y.jsx)(n.Z,{sx:{mr:.5}})," Add Restriction"]})}),(0,y.jsx)(t.ZP,{item:!0,children:(0,y.jsxs)(a.Z,{size:"small",sx:{minWidth:"100px"},children:[(0,y.jsx)(o.Z,{id:"permission",children:"Permissions"}),(0,y.jsxs)(d.Z,{fullWidth:!0,labelId:"permission",id:"permission",label:"Permissions",defaultValue:"0",onChange:e=>{g(e.target.value)},MenuProps:{style:{maxHeight:500}},children:[(0,y.jsx)(c.Z,{value:"0",children:"All"}),P.map(((e,i)=>(0,y.jsx)(c.Z,{value:e.id,children:e.name},i)))]})]})}),(0,y.jsx)(t.ZP,{item:!0,children:(0,y.jsx)(m.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,y.jsx)(h.Z,{position:"start",children:(0,y.jsx)(u.jVj,{stroke:1.5,size:"1rem"})}),size:"small",onChange:e=>{i(e.target.value)},autoComplete:"off"})})]})})}),content:!0,children:(0,y.jsx)(N,{search:e,permissionFilter:s,callApi:v,setPermissionData:C,permissionData:P})}),b&&(0,y.jsx)(Z.Z,{open:b,title:"Add Restriction",onClose:()=>S((e=>!e)),id:"addRestriction",children:(0,y.jsx)(I,{formId:"addRestriction",onSubmit:()=>{S((e=>!e)),f((e=>!e))},permissions:P})})]})}},53299:function(e,i,s){var n=s(5574),t=s(65661),r=s(97123),l=s(36151),a=s(80184);i.Z=e=>{let{onDeleteHandler:i,onClose:s,open:o,dept:d,title:c,name:m}=e;const h=()=>{s()};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(n.Z,{open:o,onClose:h,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:[(0,a.jsxs)(t.Z,{id:"alert-dialog-title",children:["Are you sure you want to delete the",(0,a.jsxs)("strong",{children:[" ",d," ",c," ",m]}),"? Click ",(0,a.jsx)("strong",{children:"Yes, Delete"})," to proceed or ",(0,a.jsx)("strong",{children:"Cancel"})," to cancel this action."]}),(0,a.jsxs)(r.Z,{sx:{pr:2.5},children:[(0,a.jsxs)(l.Z,{variant:"contained",onClick:()=>{i()},children:["Yes, Delete"," "]}),(0,a.jsx)(l.Z,{variant:"text",color:"error",onClick:h,children:"Cancel"})]})]})})}},80169:function(e,i,s){var n=s(76189),t=s(80184);i.Z=(0,n.Z)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"}),"CloseOutlined")},84220:function(e,i,s){var n=s(76189),t=s(80184);i.Z=(0,n.Z)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},38820:function(e,i,s){var n=s(76189),t=s(80184);i.Z=(0,n.Z)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")}}]);
//# sourceMappingURL=8568.a92e19e6.chunk.js.map