"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[8710],{58451:function(e,n,t){t.d(n,{El:function(){return i},W7:function(){return d},rT:function(){return s},sU:function(){return l},yv:function(){return o},zi:function(){return c}});var a=t(88893),r=t(27475);function i(){return r.k.get(a.vG)}function s(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),r.k.post(a.oT,n)}function c(){return r.k.get(a.AL)}function d(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),r.k.post(a.g5,n)}function o(e){const n=new FormData;return n.append("company_id",e.company_id),n.append("start_date",e.start_date),n.append("end_date",e.end_date),r.k.post(a.rS,n)}function l(e){const n=new FormData;return n.append("company_id",e.company_id),e.financial_years.map((e=>{n.append("years[]",e.year_id)})),r.k.post(a.Ll,n)}},98710:function(e,n,t){t.r(n),t.d(n,{default:function(){return I}});var a=t(79567),r=t(61889),i=t(20890),s=t(36151),c=t(68870),d=t(58451),o=t(17834),l=t(72426),h=t.n(l),m=t(72791),u=t(91923),p=t(23735),x=t(94022),_=t(52463),j=t(48550),Z=t(23786),g=t(36571),b=t(87607),v=t(69783),y=t(92506),f=t(80184);var D=e=>{let{value:n,formID:t,initData:a,setReportData:i,onSubmit:s}=e;const{company:c}=(0,o.Z)(),l=null!==a&&void 0!==a&&a,m=Object.keys(n).length>0&&n,u=(0,y.TA)({initialValues:{company_id:m?m.company_id:c.company_id,start_date:m?h()(m.start_date):h()(c.start_date),end_date:m?h()(m.end_date):h()(c.end_date)},onSubmit:e=>{e.start_date=h()(e.start_date).format("YYYY-MM-DD"),e.end_date=h()(e.end_date).format("YYYY-MM-DD"),(0,d.W7)(e).then((e=>{s&&s(),i(e.data.data)})).catch((e=>{(0,x.c$)(e)}))}});return(0,f.jsx)("form",{id:t,onSubmit:u.handleSubmit,children:(0,f.jsx)(r.ZP,{container:!0,spacing:2,children:(0,f.jsxs)(g._,{dateAdapter:v.Z,localeText:{start:"Start Date",end:"From Date"},children:[(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(b.$,{id:"start_date",name:"start_date",label:"Start Date",inputFormat:"YYYY-MM-DD",value:u.values.start_date,onChange:e=>{u.setFieldValue("start_date",h()(e))},renderInput:e=>(0,f.jsx)(j.Z,{fullWidth:!0,size:"small",...e})})}),(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsx)(b.$,{id:"end_date",name:"end_date",label:"End date",inputFormat:"YYYY-MM-DD",value:u.values.end_date,onChange:e=>{u.setFieldValue("end_date",h()(e))},renderInput:e=>(0,f.jsx)(j.Z,{fullWidth:!0,size:"small",...e})})}),(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsxs)(j.Z,{select:!0,size:"small",label:"Company",fullWidth:!0,id:"company_id",name:"company_id",value:u.values.company_id,onChange:u.handleChange,error:u.touched.company_id&&Boolean(u.errors.company_id),helperText:u.touched.company_id&&u.errors.company_id,children:[(0,f.jsx)(Z.Z,{value:0,children:"All Companies"},-1),l&&l.companyList.map(((e,n)=>(0,f.jsx)(Z.Z,{value:e.id,children:e.company_name},n)))]})})]})})})},S=t(35855),Y=t(68745),M=t(39281),$=t(79836),w=t(90618),k=t(56890),F=t(53382);var C=e=>{let{reportData:n}=e;const t=n.companyDetails,a=n.incomeDetails,r=n.otherIncomesDetails,s="0"===n.company_id?4:3,c=e=>e.map(((e,t)=>e.sub_categories.map(((t,a)=>t.company.map(((r,s)=>r.incomes.map(((c,d)=>(0,f.jsxs)(S.Z,{children:[0===a&&0===s&&0===d&&(0,f.jsxs)(Y.Z,{rowSpan:e.count,children:[e.name,(0,f.jsx)(i.Z,{variant:"subtitle2",mt:1,children:(0,f.jsxs)("b",{children:[e.subscriber_amount," | ",e.USD_amount]})})]}),0===s&&0===d&&(0,f.jsxs)(Y.Z,{rowSpan:t.count,children:[t.name,(0,f.jsx)(i.Z,{variant:"subtitle2",mt:1,children:(0,f.jsxs)("b",{children:[t.subscriber_amount," | ",t.USD_amount]})})]}),"0"===n.company_id&&0===d&&(0,f.jsxs)(Y.Z,{rowSpan:r.count,children:[r.name,(0,f.jsx)(i.Z,{variant:"subtitle2",mt:1,children:(0,f.jsxs)("b",{children:[r.subscriber_amount," | ",r.USD_amount]})})]}),(0,f.jsx)(Y.Z,{children:c.title}),(0,f.jsx)(Y.Z,{align:"right",children:c.subscriber_amount}),(0,f.jsx)(Y.Z,{align:"right",children:c.USD_amount})]},d)))))))));return(0,f.jsxs)(M.Z,{children:[(0,f.jsx)($.Z,{sx:{[`& .${w.Z.root}`]:{borderBottom:"none"}},children:(0,f.jsxs)(k.Z,{children:["0"===n.company_id?(0,f.jsx)(S.Z,{children:(0,f.jsx)(Y.Z,{align:"center",children:(0,f.jsx)(i.Z,{variant:"h2",children:"All Companies"})})}):(0,f.jsx)(S.Z,{children:(0,f.jsxs)(Y.Z,{align:"center",children:[(0,f.jsx)(i.Z,{variant:"h2",children:t.company_name}),(0,f.jsxs)(i.Z,{variant:"inherit",children:[`${t.address_1}${t.address_2&&` ${t.address_2}`}`,",",` ${t.city}, ${t.state} ${t.zip_code}`]}),(0,f.jsxs)(i.Z,{variant:"inherit",children:[`Phone : ${t.contact_number}`," | ",`Email : ${t.email}`]})]})}),(0,f.jsx)(S.Z,{children:(0,f.jsxs)(Y.Z,{align:"center",children:[(0,f.jsx)(i.Z,{variant:"h3",children:"Income Report"}),(0,f.jsxs)(i.Z,{variant:"h4",children:["For the period ended",` ${h()(n.start_date).format("YYYY-MMM-DD")} To ${h()(n.end_date).format("YYYY-MMM-DD")}`]})]})})]})}),(0,f.jsxs)($.Z,{size:"small",sx:{marginTop:5,[`& .${w.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:[(0,f.jsx)(k.Z,{sx:{backgroundColor:"lightblue"},children:(0,f.jsxs)(S.Z,{children:[(0,f.jsx)(Y.Z,{sx:{width:"60%"},colSpan:s,children:(0,f.jsx)(i.Z,{variant:"h4",children:"Income"})}),(0,f.jsx)(Y.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(i.Z,{variant:"h4",children:["(",n.Subscriber_currency_symbol,")"]})}),(0,f.jsx)(Y.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(i.Z,{variant:"h4",children:["(",n.USD_symbol,")"]})})]})}),(0,f.jsxs)(F.Z,{children:[a[1].length>0?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(S.Z,{sx:{background:"wheat"},children:[(0,f.jsxs)(Y.Z,{colSpan:s,children:[a[0].title,` - ${a[0].company_name}`]}),(0,f.jsx)(Y.Z,{align:"right",children:n.total_income_subscriber_currency}),(0,f.jsx)(Y.Z,{align:"right",children:n.total_income_USD})]}),a[1].map(((e,n)=>(0,f.jsxs)(S.Z,{children:[(0,f.jsx)(Y.Z,{colSpan:s,children:e.name}),e.income.map(((e,n)=>(0,f.jsxs)(m.Fragment,{children:[(0,f.jsx)(Y.Z,{align:"right",children:e.subscriber_currency_total_amount}),(0,f.jsx)(Y.Z,{align:"right",children:e.USD_currency_total_amount})]},n)))]},n)))]}):a.map(((e,n)=>(0,f.jsxs)(m.Fragment,{children:[(0,f.jsxs)(S.Z,{sx:{background:"wheat"},children:[(0,f.jsxs)(Y.Z,{colSpan:s,children:[e.title,` - ${e.company_name}`]}),(0,f.jsx)(Y.Z,{align:"right",children:e.subscriber_amount}),(0,f.jsx)(Y.Z,{align:"right",children:e.usd_amount})]}),e.clients.map(((e,n)=>(0,f.jsxs)(S.Z,{children:[(0,f.jsx)(Y.Z,{colSpan:s,children:e.name}),(0,f.jsx)(Y.Z,{align:"right",children:e.income[0].subscriber_currency_total_amount}),(0,f.jsx)(Y.Z,{align:"right",children:e.income[0].USD_currency_total_amount})]},n))),c(e.otherIncomes)]},n))),c(r),a[1].length>0&&(0,f.jsxs)(S.Z,{sx:{backgroundColor:"lightgreen"},children:[(0,f.jsx)(Y.Z,{colSpan:s,children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:"Total Income"})}),(0,f.jsx)(Y.Z,{align:"right",children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:n.total_income_subscriber_currency})}),(0,f.jsx)(Y.Z,{align:"right",children:(0,f.jsx)(i.Z,{variant:"subtitle1",children:n.total_income_USD})})]})]})]})]})};var I=()=>{const{company:e,recall:n}=(0,o.Z)(),[t,l]=(0,m.useState)(!1),[j,Z]=(0,m.useState)({}),[g,b]=(0,m.useState)({});return(0,m.useEffect)((()=>{(0,d.zi)().then((e=>{b(e.data.data)})).catch((()=>{(0,x.c$)(err)}))}),[]),(0,m.useEffect)((()=>{const n={company_id:e.company_id,start_date:h()(e.start_date).format("YYYY-MM-DD"),end_date:h()(e.end_date).format("YYYY-MM-DD")};(0,d.W7)(n).then((e=>{Z(e.data.data)})).catch((e=>{(0,x.c$)(e)}))}),[n]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p.Z,{title:(0,f.jsx)(r.ZP,{container:!0,alignItems:"center",spacing:u.dv,sx:{mb:-1,mt:-3},children:(0,f.jsx)(r.ZP,{item:!0,xs:12,children:(0,f.jsxs)(r.ZP,{container:!0,alignItems:"center",spacing:u.dv,children:[(0,f.jsx)(r.ZP,{item:!0,sx:{flexGrow:1},children:(0,f.jsx)(i.Z,{variant:"column",children:"Income Statement"})}),(0,f.jsx)(r.ZP,{item:!0,children:(0,f.jsxs)(s.Z,{variant:"contained",onClick:()=>{l((e=>!e))},children:[(0,f.jsx)(a.Z,{sx:{mr:.5}})," Generate Report"]})})]})})}),content:!0,children:Object.keys(j).length>0?(0,f.jsx)(C,{reportData:j}):(0,f.jsx)(c.Z,{component:"span",children:(0,f.jsx)(i.Z,{variant:"h2",textAlign:"center",sx:{p:"10%"},color:"GrayText",children:"Please Generate Report"})})}),t&&(0,f.jsx)(_.Z,{title:"Generate Income Statement Report",open:t,onClose:()=>l((e=>!e)),id:"generateForm",children:(0,f.jsx)(D,{value:j,formID:"generateForm",initData:g,setReportData:Z,onSubmit:()=>{l((e=>!e))}})})]})}},79567:function(e,n,t){var a=t(76189),r=t(80184);n.Z=(0,a.Z)((0,r.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined")},56890:function(e,n,t){t.d(n,{Z:function(){return Z}});var a=t(87462),r=t(63366),i=t(72791),s=t(28182),c=t(94419),d=t(829),o=t(93736),l=t(47630),h=t(21217);function m(e){return(0,h.Z)("MuiTableHead",e)}(0,t(75878).Z)("MuiTableHead",["root"]);var u=t(80184);const p=["className","component"],x=(0,l.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,n)=>n.root})({display:"table-header-group"}),_={variant:"head"},j="thead";var Z=i.forwardRef((function(e,n){const t=(0,o.Z)({props:e,name:"MuiTableHead"}),{className:i,component:l=j}=t,h=(0,r.Z)(t,p),Z=(0,a.Z)({},t,{component:l}),g=(e=>{const{classes:n}=e;return(0,c.Z)({root:["root"]},m,n)})(Z);return(0,u.jsx)(d.Z.Provider,{value:_,children:(0,u.jsx)(x,(0,a.Z)({as:l,className:(0,s.Z)(g.root,i),ref:n,role:l===j?null:"rowgroup",ownerState:Z},h))})}))}}]);
//# sourceMappingURL=8710.12dbcc6d.chunk.js.map