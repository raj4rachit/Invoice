"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[1520],{58451:function(e,t,n){n.d(t,{$8:function(){return l},El:function(){return i},W7:function(){return c},rT:function(){return d},sU:function(){return u},xb:function(){return p},yv:function(){return o},zi:function(){return s}});var a=n(88893),r=n(27475);function i(){return r.k.get(a.vG)}function d(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),r.k.post(a.oT,t)}function s(){return r.k.get(a.AL)}function l(){return r.k.get(a.XZ)}function c(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),r.k.post(a.g5,t)}function o(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),r.k.post(a.rS,t)}function p(e){const t=new FormData;return t.append("client_id",e.client_id),t.append("start_date",e.start_date),t.append("end_date",e.end_date),t.append("type",e.type),r.k.post(a.eg,t)}function u(e){const t=new FormData;return t.append("company_id",e.company_id),t.append("type",e.type),e.financial_years.map((n=>{e.type?t.append("years[]",n):t.append("years[]",n.year_id)})),r.k.post(a.Ll,t)}},21520:function(e,t,n){n.r(t),n.d(t,{default:function(){return R}});var a=n(72791),r=n(23735),i=n(61889),d=n(20890),s=n(36151),l=n(68870),c=n(91923),o=n(79567),p=n(39281),u=n(79836),h=n(90618),x=n(56890),m=n(35855),_=n(68745),Z=n(53382),j=n(72426),v=n.n(j),f=n(80184);var b=e=>{let{reportData:t}=e;const n=t.clientInvoiceData;return(0,f.jsxs)(p.Z,{children:[(0,f.jsx)(u.Z,{sx:{[`& .${h.Z.root}`]:{borderBottom:"none"}},children:(0,f.jsxs)(x.Z,{children:["0"===t.client_id?(0,f.jsx)(m.Z,{children:(0,f.jsx)(_.Z,{align:"center",children:(0,f.jsx)(d.Z,{variant:"h2",children:"All Clients"})})}):(0,f.jsx)(m.Z,{children:(0,f.jsx)(_.Z,{align:"center",children:n.map(((e,t)=>(0,f.jsxs)(a.Fragment,{children:[(0,f.jsx)(d.Z,{variant:"h2",children:e.client_company_name},t),(0,f.jsx)(d.Z,{variant:"inherit",children:e.client_name})]},t)))})}),(0,f.jsx)(m.Z,{children:(0,f.jsxs)(_.Z,{align:"center",children:[(0,f.jsx)(d.Z,{variant:"h3",children:"Client Report"}),(0,f.jsxs)(d.Z,{variant:"h4",children:["For the period ended",` ${v()(t.start_date).format("DD-MMM, YYYY")} To ${v()(t.end_date).format("DD-MMM, YYYY")}`]})]})})]})}),(0,f.jsxs)(u.Z,{size:"small",sx:{marginTop:5,[`& .${h.Z.root}`]:{borderLeft:"1px solid",borderRight:"1px solid",borderTop:"1px solid",borderBottom:"1px solid"}},children:[(0,f.jsx)(x.Z,{sx:{backgroundColor:"lightblue"},children:(0,f.jsxs)(m.Z,{children:[(0,f.jsx)(_.Z,{sx:{width:"60%"},colSpan:3,children:(0,f.jsx)(d.Z,{variant:"h4",children:"Clients"})}),(0,f.jsx)(_.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(d.Z,{variant:"h4",children:["(",t.Subscriber_currency_symbol,")"]})}),(0,f.jsx)(_.Z,{sx:{width:"20%"},align:"center",children:(0,f.jsxs)(d.Z,{variant:"h4",children:["(",t.USD_symbol,")"]})})]})}),(0,f.jsxs)(Z.Z,{children:[n.map((e=>e.companies.map(((t,n)=>t.invoices.map(((a,r)=>(0,f.jsxs)(m.Z,{children:[0===n&&0===r&&(0,f.jsxs)(_.Z,{rowSpan:e.count,children:[e.client_company_name+" - "+e.client_name," ",(0,f.jsx)(d.Z,{variant:"subtitle2",mt:1,children:(0,f.jsxs)("b",{children:[e.subscriber_amount," | ",e.usd_amount]})})]}),0===r&&(0,f.jsxs)(_.Z,{rowSpan:t.count,children:[t.company_name,(0,f.jsx)(d.Z,{variant:"subtitle2",mt:1,children:(0,f.jsxs)("b",{children:[t.subscriber_amount," | ",t.usd_amount]})})]}),(0,f.jsx)(_.Z,{children:a.invoice_no}),(0,f.jsx)(_.Z,{align:"right",children:a.subscriber_currency_total_amount}),(0,f.jsx)(_.Z,{align:"right",children:a.USD_currency_total_amount})]},r))))))),(0,f.jsxs)(m.Z,{sx:{backgroundColor:"lightgreen"},children:[(0,f.jsx)(_.Z,{colSpan:3,children:(0,f.jsx)(d.Z,{variant:"subtitle1",children:"Total"})}),(0,f.jsx)(_.Z,{align:"right",children:(0,f.jsx)(d.Z,{variant:"subtitle1",children:t.total_subscriber_currency})}),(0,f.jsx)(_.Z,{align:"right",children:(0,f.jsx)(d.Z,{variant:"subtitle1",children:t.total_USD})})]})]})]})]})},g=n(58451),y=n(94022),D=n(52463),Y=n(48550),M=n(23786),S=n(36571),k=n(87607),C=n(69783),w=n(92506),F=n(17834);var T=e=>{let{value:t,formID:n,initData:a,setReportData:r,onSubmit:d}=e;const{company:s}=(0,F.Z)(),l=null!==a&&void 0!==a&&a,c=Object.keys(t).length>0&&t,o=(0,w.TA)({initialValues:{client_id:c?c.client_id:"0",start_date:c?v()(c.start_date):v()(s.start_date),end_date:c?v()(c.end_date):v()(s.end_date)},onSubmit:e=>{e.start_date=v()(e.start_date).format("YYYY-MM-DD"),e.end_date=v()(e.end_date).format("YYYY-MM-DD"),(0,g.xb)(e).then((e=>{d&&d(),r(e.data.data)})).catch((e=>{(0,y.c$)(e)}))}});return(0,f.jsx)("form",{id:n,onSubmit:o.handleSubmit,children:(0,f.jsx)(i.ZP,{container:!0,spacing:2,children:(0,f.jsxs)(S._,{dateAdapter:C.Z,localeText:{start:"Start Date",end:"From Date"},children:[(0,f.jsx)(i.ZP,{item:!0,xs:12,children:(0,f.jsx)(k.$,{id:"start_date",name:"start_date",label:"Start Date",inputFormat:"YYYY-MM-DD",value:o.values.start_date,onChange:e=>{o.setFieldValue("start_date",v()(e))},renderInput:e=>(0,f.jsx)(Y.Z,{fullWidth:!0,size:"small",...e})})}),(0,f.jsx)(i.ZP,{item:!0,xs:12,children:(0,f.jsx)(k.$,{id:"end_date",name:"end_date",label:"End date",inputFormat:"YYYY-MM-DD",value:o.values.end_date,onChange:e=>{o.setFieldValue("end_date",v()(e))},renderInput:e=>(0,f.jsx)(Y.Z,{fullWidth:!0,size:"small",...e})})}),(0,f.jsx)(i.ZP,{item:!0,xs:12,children:(0,f.jsxs)(Y.Z,{select:!0,size:"small",label:"Company",fullWidth:!0,id:"client_id",name:"client_id",value:o.values.client_id,onChange:o.handleChange,error:o.touched.client_id&&Boolean(o.errors.client_id),helperText:o.touched.client_id&&o.errors.client_id,children:[(0,f.jsx)(M.Z,{value:0,children:"All Clients"},-1),l&&l.map(((e,t)=>(0,f.jsx)(M.Z,{value:e.id,children:e.company_name},t)))]})})]})})})},P=n(6445);var R=()=>{const{company:e,recall:t}=(0,F.Z)(),[n,p]=(0,a.useState)(!1),[u,h]=(0,a.useState)({}),[x,m]=(0,a.useState)([]);return(0,a.useEffect)((()=>{const t={client_id:"0",start_date:v()(e.start_date).format("YYYY-MM-DD"),end_date:v()(e.end_date).format("YYYY-MM-DD")};(0,g.xb)(t).then((e=>{h(e.data.data)})).catch((e=>{(0,y.c$)(e)}))}),[t]),(0,a.useEffect)((()=>{(0,g.$8)().then((e=>{m(e.data.data)})).catch((()=>{(0,y.c$)(err)}))}),[]),(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(r.Z,{title:(0,f.jsx)(i.ZP,{container:!0,alignItems:"center",spacing:c.dv,sx:{mb:-1,mt:-3},children:(0,f.jsx)(i.ZP,{item:!0,xs:12,children:(0,f.jsxs)(i.ZP,{container:!0,alignItems:"center",spacing:c.dv,children:[(0,f.jsx)(i.ZP,{item:!0,sx:{flexGrow:1},children:(0,f.jsx)(d.Z,{variant:"column",children:"Client Report"})}),(0,f.jsx)(i.ZP,{item:!0,children:(0,f.jsxs)(s.Z,{variant:"outlined",onClick:()=>(()=>{const e={client_id:u.client_id,start_date:v()(u.start_date).format("YYYY-MM-DD"),end_date:v()(u.end_date).format("YYYY-MM-DD"),type:"report"};(0,g.xb)(e).then((e=>{const t=document.createElement("a");t.href=e.data.data.client_report,t.download=e.data.data.client_report_name,t.click()})).catch((e=>{console.error(e)}))})(),children:[(0,f.jsx)(P.Z,{sx:{mr:.5}})," Export"]})}),(0,f.jsx)(i.ZP,{item:!0,children:(0,f.jsxs)(s.Z,{variant:"contained",onClick:()=>{p((e=>!e))},children:[(0,f.jsx)(o.Z,{sx:{mr:.5}})," Generate Report"]})})]})})}),content:!0,children:Object.keys(u).length>0?(0,f.jsx)(b,{reportData:u}):(0,f.jsx)(l.Z,{component:"span",children:(0,f.jsx)(d.Z,{variant:"h2",textAlign:"center",sx:{p:"10%"},color:"GrayText",children:"Please Generate Report"})})}),n&&(0,f.jsx)(D.Z,{title:"Generate Income Statement Report",open:n,onClose:()=>p((e=>!e)),id:"generateForm",children:(0,f.jsx)(T,{value:u,formID:"generateForm",initData:x,setReportData:h,onSubmit:()=>{p((e=>!e))}})})]})}},6445:function(e,t,n){var a=n(64836);t.Z=void 0;var r=a(n(45649)),i=n(80184),d=(0,r.default)((0,i.jsx)("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zM7 9l1.41 1.41L11 7.83V16h2V7.83l2.59 2.58L17 9l-5-5-5 5z"}),"FileUploadOutlined");t.Z=d},79567:function(e,t,n){var a=n(76189),r=n(80184);t.Z=(0,a.Z)((0,r.jsx)("path",{d:"M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"}),"AddCircleOutlineOutlined")},56890:function(e,t,n){n.d(t,{Z:function(){return j}});var a=n(87462),r=n(63366),i=n(72791),d=n(28182),s=n(94419),l=n(829),c=n(93736),o=n(47630),p=n(21217);function u(e){return(0,p.Z)("MuiTableHead",e)}(0,n(75878).Z)("MuiTableHead",["root"]);var h=n(80184);const x=["className","component"],m=(0,o.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),_={variant:"head"},Z="thead";var j=i.forwardRef((function(e,t){const n=(0,c.Z)({props:e,name:"MuiTableHead"}),{className:i,component:o=Z}=n,p=(0,r.Z)(n,x),j=(0,a.Z)({},n,{component:o}),v=(e=>{const{classes:t}=e;return(0,s.Z)({root:["root"]},u,t)})(j);return(0,h.jsx)(l.Z.Provider,{value:_,children:(0,h.jsx)(m,(0,a.Z)({as:o,className:(0,d.Z)(v.root,i),ref:t,role:o===Z?null:"rowgroup",ownerState:j},p))})}))}}]);
//# sourceMappingURL=1520.3251d740.chunk.js.map