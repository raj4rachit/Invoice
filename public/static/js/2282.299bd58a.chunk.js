"use strict";(self.webpackChunkInvoice_Billing=self.webpackChunkInvoice_Billing||[]).push([[2282],{12282:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var n=r(79567),i=r(61889),o=r(20890),s=r(36151),a=r(77196),l=r(63466),c=r(58956),d=r(17834),u=r(72791),p=r(91923),h=r(23735),m=r(52463),x=r(68870),Z=r(48550),j=r(14868),v=r(94454),g=r(88893),f=r(27475);var b=r(92506),S=r(94022),C=r(81724),R=r(80184);const _=C.Ry().shape({name:C.Z_().required("Role name is required."),permission_group:C.Z_().required("Permission group is required."),status:C.Z_().required("Role status is required.")}),D=[{label:"Active"},{label:"Inactive"}];var y=e=>{let{RoleValue:t,formId:r,onSubmit:n,permissionGroup:o}=e;const s=null!==t&&void 0!==t&&t,a=s&&"No"===s.can_delete&&!0,l=(0,b.TA)({initialValues:{id:s?s.id:"",name:s?s.name:"",permission_group:s?s.group_id:"",status:s?s.status:"",formType:s&&s.id?"edit":"add"},validationSchema:_,onSubmit:e=>{(function(e){const t=new FormData;return t.append("name",e.name),t.append("group_id",e.permission_group),t.append("status",e.status),""!==e.id&&"edit"===e.formType?(t.append("id",e.id),f.k.post(g.tU,t)):f.k.post(g.XU,t)})(e).then((e=>{e.data&&1===e.data.status?(n&&n(),(0,S.qX)(e)):(0,S.I5)(e)})).catch((e=>{(0,S.c$)(e)}))}});return(0,R.jsx)(x.Z,{children:(0,R.jsx)("form",{id:r,onSubmit:l.handleSubmit,children:(0,R.jsxs)(i.ZP,{container:!0,spacing:2,children:[(0,R.jsx)(i.ZP,{item:!0,xs:12,children:(0,R.jsx)(Z.Z,{fullWidth:!0,size:"small",id:"name",name:"name",label:"Role name",defaultValue:l.values.name,onChange:l.handleChange,error:l.touched.name&&Boolean(l.errors.name),helperText:l.touched.name&&l.errors.name,disabled:a})}),(0,R.jsx)(i.ZP,{item:!0,xs:12,children:(0,R.jsx)(j.Z,{options:null!==o&&void 0!==o?o:[],getOptionLabel:e=>e.name?e.name:"",value:(e=>{const t=o.findIndex((t=>t.id===e));return t>-1?o[t]:null})(l.values.permission_group),renderOption:(e,t,r)=>{let{selected:n}=r;return(0,R.jsxs)("li",{...e,children:[(0,R.jsx)(v.Z,{checked:n,value:t.id}),t.name]})},renderInput:e=>(0,R.jsx)(Z.Z,{...e,size:"small",id:"permission_group",name:"permission_group",label:"Permission group",error:l.touched.permission_group&&Boolean(l.errors.permission_group),helperText:l.touched.permission_group&&l.errors.permission_group}),onChange:(e,t)=>{const r=t?t.id:"";l.setFieldValue("permission_group",r)}})}),(0,R.jsx)(i.ZP,{item:!0,xs:12,children:(0,R.jsx)(j.Z,{options:null!==D&&void 0!==D?D:[],getOptionLabel:e=>e.label?e.label:"",value:""!==l.values.status?D.filter((e=>e.label===l.values.status))[0]:null,renderOption:(e,t,r)=>{let{selected:n}=r;return(0,R.jsxs)("li",{...e,children:[(0,R.jsx)(v.Z,{checked:n,value:t.label}),t.label]})},disabled:a,renderInput:e=>(0,R.jsx)(Z.Z,{...e,size:"small",id:"status",name:"status",label:"Role status",error:l.touched.status&&Boolean(l.errors.status),helperText:l.touched.status&&l.errors.status}),onChange:(e,t)=>{const r=t?t.label:"";l.setFieldValue("status",r)}})})]})})})},k=r(38820),I=r(84220),P=r(39281),L=r(79836),w=r(53382),A=r(35855),E=r(68745),T=r(13400),z=r(63033),N=r(56890),V=r(80720),O=r(53299);const q={search:"",displayLength:10,displayStart:0,orderDir:"ASC",orderColumn:0};let G=0;var M=e=>{let{search:t,callApi:r,setPermissionGroupData:n,permissionGroupData:i}=e;const{checkRestriction:o,recall:s}=(0,d.Z)(),[a,l]=(0,u.useState)([]),[c,p]=(0,u.useState)(0),[h,x]=(0,u.useState)(10),[Z,j]=(0,u.useState)("asc"),[v,b]=(0,u.useState)("0"),[C,_]=(0,u.useState)(!1),[D,N]=(0,u.useState)(!1),[V,M]=(0,u.useState)({}),$=()=>{(function(e){return f.k.get(g.st,e)})(q).then((e=>{G=e.data.data.totalCount,l(e.data.data.data),n(e.data.data.permissionGroups)})).catch((e=>{(0,S.c$)(e)}))};return(0,u.useEffect)((()=>{var e;q.search=t,q.displayLength=h,q.displayStart=h*c,q.orderDir=null!==(e=null===Z||void 0===Z?void 0:Z.toUpperCase())&&void 0!==e?e:q.orderDir,q.orderColumn=Number(v),$()}),[c,h,Z,v,t,r,s]),(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(P.Z,{children:(0,R.jsxs)(L.Z,{children:[(0,R.jsx)(F,{order:Z,orderBy:v,onRequestSort:e=>{j(v===e&&"asc"===Z?"desc":"asc"),b(e)}}),(0,R.jsx)(w.Z,{children:a.map(((e,t)=>(0,R.jsxs)(A.Z,{hover:!0,role:"checkbox",children:[(0,R.jsx)(E.Z,{align:"left",children:e.name}),(0,R.jsx)(E.Z,{align:"left",children:e.group_name}),(0,R.jsx)(E.Z,{align:"left",children:e.status}),(0,R.jsxs)(E.Z,{align:"right",children:[o("CAN_EDIT_ROLE")&&(0,R.jsx)(T.Z,{color:"primary",component:"label",onClick:()=>{return t=e,_((e=>!e)),void M(t);var t},children:(0,R.jsx)(k.Z,{fontSize:"small"})}),o("CAN_DELETE_ROLE")&&"Yes"===e.can_delete&&(0,R.jsx)(T.Z,{color:"error",component:"label",onClick:()=>{return t=e,N(!0),void M(t);var t},children:(0,R.jsx)(I.Z,{fontSize:"small"})})]})]},t)))})]})}),(0,R.jsx)(z.Z,{rowsPerPageOptions:[10,25,50,100],component:"div",count:Number(G),rowsPerPage:h,page:c,onPageChange:(e,t)=>{p(t)},onRowsPerPageChange:e=>{x(parseInt(e.target.value,10)),p(0)}}),C&&(0,R.jsx)(m.Z,{open:C,title:"Edit Role",onClose:()=>_((e=>!e)),id:"editRole",children:(0,R.jsx)(y,{RoleValue:V,formId:"editRole",onSubmit:()=>{_((e=>!e)),$()},permissionGroup:i})}),D&&(0,R.jsx)(O.Z,{onDeleteHandler:()=>{(function(e){const t=new FormData;return t.append("id",e.id),f.k.post(g.Fv,t)})({id:V.id}).then((e=>{e.data&&1===e.data.status?(p(0),$(),N(!1),(0,S.qX)(e)):(0,S.I5)(e)})).catch((e=>{(0,S.c$)(e)}))},onClose:()=>N(!1),open:D,dept:"Role",name:V.name})]})};function F(e){let{order:t,orderBy:r,onRequestSort:n}=e;const{checkRestriction:i}=(0,d.Z)(),o=e=>()=>{n(e)};return(0,R.jsx)(N.Z,{children:(0,R.jsxs)(A.Z,{children:[(0,R.jsx)(E.Z,{children:(0,R.jsx)(V.Z,{active:"0"===r,direction:"0"===r?t:"asc",onClick:o("0"),children:"Name"})},"name"),(0,R.jsx)(E.Z,{children:(0,R.jsx)(V.Z,{active:"1"===r,direction:"1"===r?t:"asc",onClick:o("1"),children:"Permission group"})},"permissionGroup"),(0,R.jsx)(E.Z,{children:(0,R.jsx)(V.Z,{active:"2"===r,direction:"2"===r?t:"asc",onClick:o("2"),children:"Status"})},"status"),i("CAN_EDIT_ROLE")&&i("CAN_DELETE_ROLE")&&(0,R.jsx)(E.Z,{align:"right",children:"Action"})]})})}var $=()=>{const{checkRestriction:e}=(0,d.Z)(),[t,r]=(0,u.useState)(""),[x,Z]=(0,u.useState)(!1),[j,v]=(0,u.useState)(!1),[g,f]=(0,u.useState)([]);return(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(h.Z,{title:(0,R.jsx)(i.ZP,{container:!0,alignItems:"center",spacing:p.dv,sx:{mb:-1,mt:-4},children:(0,R.jsx)(i.ZP,{item:!0,xs:12,children:(0,R.jsxs)(i.ZP,{container:!0,alignItems:"center",spacing:p.dv,children:[(0,R.jsx)(i.ZP,{item:!0,sx:{flexGrow:1},children:(0,R.jsx)(o.Z,{variant:"column",children:"Role List"})}),e("CAN_ADD_ROLE")&&(0,R.jsx)(i.ZP,{item:!0,children:(0,R.jsxs)(s.Z,{variant:"contained",onClick:()=>{Z((e=>!e))},children:[(0,R.jsx)(n.Z,{sx:{mr:.5}})," Add Role"]})}),(0,R.jsx)(i.ZP,{item:!0,children:(0,R.jsx)(a.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,R.jsx)(l.Z,{position:"start",children:(0,R.jsx)(c.jVj,{stroke:1.5,size:"1rem"})}),size:"small",onChange:e=>{r(e.target.value)},autoComplete:"off"})})]})})}),content:!0,children:(0,R.jsx)(M,{search:t,callApi:j,setPermissionGroupData:f,permissionGroupData:g})}),x&&(0,R.jsx)(m.Z,{open:x,title:"Add Role",onClose:()=>Z((e=>!e)),id:"addRole",children:(0,R.jsx)(y,{formId:"addRole",onSubmit:()=>{Z((e=>!e)),v((e=>!e))},permissionGroup:g})})]})}},53299:function(e,t,r){var n=r(5574),i=r(65661),o=r(97123),s=r(36151),a=r(80184);t.Z=e=>{let{onDeleteHandler:t,onClose:r,open:l,dept:c,title:d,name:u}=e;const p=()=>{r()};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)(n.Z,{open:l,onClose:p,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",sx:{p:3},children:[(0,a.jsxs)(i.Z,{id:"alert-dialog-title",children:["Are you sure you want to delete the",(0,a.jsxs)("strong",{children:[" ",c," ",d," ",u]}),"? Click ",(0,a.jsx)("strong",{children:"Yes, Delete"})," to proceed or ",(0,a.jsx)("strong",{children:"Cancel"})," to cancel this action."]}),(0,a.jsxs)(o.Z,{sx:{pr:2.5},children:[(0,a.jsxs)(s.Z,{variant:"contained",onClick:()=>{t()},children:["Yes, Delete"," "]}),(0,a.jsx)(s.Z,{variant:"text",color:"error",onClick:p,children:"Cancel"})]})]})})}},84220:function(e,t,r){var n=r(76189),i=r(80184);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4z"}),"DeleteOutline")},38820:function(e,t,r){var n=r(76189),i=r(80184);t.Z=(0,n.Z)((0,i.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit")},80720:function(e,t,r){r.d(t,{Z:function(){return b}});var n=r(63366),i=r(87462),o=r(94419),s=r(28182),a=r(72791),l=r(95080),c=r(76189),d=r(80184),u=(0,c.Z)((0,d.jsx)("path",{d:"M20 12l-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownward"),p=r(47630),h=r(93736),m=r(14036),x=r(21217);function Z(e){return(0,x.Z)("MuiTableSortLabel",e)}var j=(0,r(75878).Z)("MuiTableSortLabel",["root","active","icon","iconDirectionDesc","iconDirectionAsc"]);const v=["active","children","className","direction","hideSortIcon","IconComponent"],g=(0,p.ZP)(l.Z,{name:"MuiTableSortLabel",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.active&&t.active]}})((e=>{let{theme:t}=e;return{cursor:"pointer",display:"inline-flex",justifyContent:"flex-start",flexDirection:"inherit",alignItems:"center","&:focus":{color:(t.vars||t).palette.text.secondary},"&:hover":{color:(t.vars||t).palette.text.secondary,[`& .${j.icon}`]:{opacity:.5}},[`&.${j.active}`]:{color:(t.vars||t).palette.text.primary,[`& .${j.icon}`]:{opacity:1,color:(t.vars||t).palette.text.secondary}}}})),f=(0,p.ZP)("span",{name:"MuiTableSortLabel",slot:"Icon",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.icon,t[`iconDirection${(0,m.Z)(r.direction)}`]]}})((e=>{let{theme:t,ownerState:r}=e;return(0,i.Z)({fontSize:18,marginRight:4,marginLeft:4,opacity:0,transition:t.transitions.create(["opacity","transform"],{duration:t.transitions.duration.shorter}),userSelect:"none"},"desc"===r.direction&&{transform:"rotate(0deg)"},"asc"===r.direction&&{transform:"rotate(180deg)"})}));var b=a.forwardRef((function(e,t){const r=(0,h.Z)({props:e,name:"MuiTableSortLabel"}),{active:a=!1,children:l,className:c,direction:p="asc",hideSortIcon:x=!1,IconComponent:j=u}=r,b=(0,n.Z)(r,v),S=(0,i.Z)({},r,{active:a,direction:p,hideSortIcon:x,IconComponent:j}),C=(e=>{const{classes:t,direction:r,active:n}=e,i={root:["root",n&&"active"],icon:["icon",`iconDirection${(0,m.Z)(r)}`]};return(0,o.Z)(i,Z,t)})(S);return(0,d.jsxs)(g,(0,i.Z)({className:(0,s.Z)(C.root,c),component:"span",disableRipple:!0,ownerState:S,ref:t},b,{children:[l,x&&!a?null:(0,d.jsx)(f,{as:j,className:(0,s.Z)(C.icon),ownerState:S})]}))}))}}]);
//# sourceMappingURL=2282.299bd58a.chunk.js.map